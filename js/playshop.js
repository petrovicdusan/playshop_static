var ACCENT_LOWERCASE={a:/[Г ГЎГўГЈГҐДЃДѓД…Р°]/g,ae:/[Г¤Г¦]/g,b:/[бёѓР±]/g,c:/[Г§Д‡Д‰Д‹ДЌС†С›С‡]/g,d:/[ДЏД‘бё‹РґС’СџСЉС‹СЊ]/g,dh:/[Г°]/g,e:/[ГЁГ©ГЄГ«Д“Д•Д—Д™Д›РµС‘СЌ]/g,f:/[Ж’бёџС„]/g,g:/[ДќДџДЎДЈРіС“]/g,h:/[ДҐД§С…]/g,i:/[Г¬Г­Г®ГЇД©Д«ДЇРёР№СЋ]/g,j:/[ДµС]/g,k:/[Д·РєСњ]/g,l:/[ДєДјДѕЕ‚Р»С™]/g,m:/[б№ЃРј]/g,n:/[Г±Е„Е†Е€РЅСљ]/g,o:/[ГІГіГґГµГёЕЌЕ‘ЖЎРѕ]/g,oe:/[Г¶]/g,p:/[б№—Рї]/g,r:/[Е•Е—Е™СЂСЏ]/g,s:/[Е›ЕќЕџЕЎИ™б№ЎСЃС€С‰]/g,ss:/[Гџ]/g,t:/[ЕЈЕҐЕ§И›б№«С‚]/g,th:/[Гѕ]/g,u:/[ВµГ№ГєГ»Е©Е«Е­ЕЇЕ±ЕіЖ°Сѓ]/g,ue:/[Гј]/g,v:/[РІ]/g,w:/[ЕµбєЃбєѓбє…]/g,y:/[ГЅГїЕ·б»і]/g,z:/[ЕєЕјЕѕР¶Р·С•]/g},ACCENT_UPPERCASE={A:/[ГЂГЃГ‚ГѓГ…ДЂД‚Д„Рђ]/g,Ae:/[Г„Г†]/g,B:/[бё‚Р‘]/g,C:/[Г‡Д†Д€ДЉДЊР‹Р¦Р§]/g,D:/[ДЋДђбёЉР”Р‚РЏРЄР«Р¬]/g,Dh:/[Гђ]/g,E:/[Г€Г‰ГЉГ‹Д’Д”Д–ДДљР•РЃР­]/g,F:/[Ж‘бёћР¤]/g,G:/[ДњДћД ДўР“Рѓ]/g,H:/[Д¤Д¦РҐ]/g,I:/[ГЊГЌГЋГЏДЁДЄД®РР™Р®]/g,J:/[ДґР€]/g,K:/[Д¶РљРЊ]/g,L:/[Д№Д»ДЅЕЃР›Р‰]/g,M:/[б№ЂРњ]/g,N:/[Г‘ЕѓЕ…Е‡РќРЉ]/g,O:/[Г’Г“Г”Г•ГЕЊЕђЖ Рћ]/g,Oe:/[Г–]/g,P:/[б№–Рџ]/g,R:/[Е”Е–ЕЕљР РЇ]/g,S:/[ЕњЕћЕ Иб№ РЎРЁР©Р…]/g,T:/[ЕўЕ¤Е¦Иљб№ЄРў]/g,Th:/[Гћ]/g,U:/[Г™ГљГ›ЕЁЕЄЕ¬Е®Е°ЕІЖЇРЈ]/g,Ue:/[Гњ]/g,V:/[Р’]/g,W:/[ЕґбєЂбє‚бє„]/g,Y:/[ГќЕ¶Еёб»І]/g,Z:/[Е№Е»ЕЅР–Р—Р—МЃ]/g};String.prototype.deaccent=function(e){e=+e||0;var t=""+this;if(e<=0)for(var n in ACCENT_LOWERCASE)t=t.replace(ACCENT_LOWERCASE[n],n);if(e>=0)for(var n in ACCENT_UPPERCASE)t=t.replace(ACCENT_UPPERCASE[n],n);return t},String.prototype.isASCII=function(){for(var e=0;e<this.length;e++)if(this.charCodeAt(e)>127)return!1;return!0},typeof String.prototype.startsWith!="function"&&(String.prototype.startsWith=function(e){return this.slice(0,e.length)==e}),function(e){e.extend(e.fn,{validate:function(t){if(!this.length){t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.");return}var n=e.data(this[0],"validator");return n?n:(this.attr("novalidate","novalidate"),n=new e.validator(t,this[0]),e.data(this[0],"validator",n),n.settings.onsubmit&&(this.validateDelegate(":submit","click",function(t){n.settings.submitHandler&&(n.submitButton=t.target),e(t.target).hasClass("cancel")&&(n.cancelSubmit=!0),e(t.target).attr("formnovalidate")!==undefined&&(n.cancelSubmit=!0)}),this.submit(function(t){function r(){var r;return n.settings.submitHandler?(n.submitButton&&(r=e("<input type='hidden'/>").attr("name",n.submitButton.name).val(e(n.submitButton).val()).appendTo(n.currentForm)),n.settings.submitHandler.call(n,n.currentForm,t),n.submitButton&&r.remove(),!1):!0}return n.settings.debug&&t.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,r()):n.form()?n.pendingRequest?(n.formSubmitted=!0,!1):r():(n.focusInvalid(),!1)})),n)},valid:function(){if(e(this[0]).is("form"))return this.validate().form();var t=!0,n=e(this[0].form).validate();return this.each(function(){t=t&&n.element(this)}),t},removeAttrs:function(t){var n={},r=this;return e.each(t.split(/\s/),function(e,t){n[t]=r.attr(t),r.removeAttr(t)}),n},rules:function(t,n){var r=this[0];if(t){var i=e.data(r.form,"validator").settings,s=i.rules,o=e.validator.staticRules(r);switch(t){case"add":e.extend(o,e.validator.normalizeRule(n)),delete o.messages,s[r.name]=o,n.messages&&(i.messages[r.name]=e.extend(i.messages[r.name],n.messages));break;case"remove":if(!n)return delete s[r.name],o;var u={};return e.each(n.split(/\s/),function(e,t){u[t]=o[t],delete o[t]}),u}}var a=e.validator.normalizeRules(e.extend({},e.validator.classRules(r),e.validator.attributeRules(r),e.validator.dataRules(r),e.validator.staticRules(r)),r);if(a.required){var f=a.required;delete a.required,a=e.extend({required:f},a)}return a}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+e(t).val())},filled:function(t){return!!e.trim(""+e(t).val())},unchecked:function(t){return!e(t).prop("checked")}}),e.validator=function(t,n){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=n,this.init()},e.validator.format=function(t,n){return arguments.length===1?function(){var n=e.makeArray(arguments);return n.unshift(t),e.validator.format.apply(this,n)}:(arguments.length>2&&n.constructor!==Array&&(n=e.makeArray(arguments).slice(1)),n.constructor!==Array&&(n=[n]),e.each(n,function(e,n){t=t.replace(new RegExp("\\{"+e+"\\}","g"),function(){return n})}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e,t){this.lastActive=e,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(e)).hide())},onfocusout:function(e,t){!this.checkable(e)&&(e.name in this.submitted||!this.optional(e))&&this.element(e)},onkeyup:function(e,t){if(t.which===9&&this.elementValue(e)==="")return;(e.name in this.submitted||e===this.lastElement)&&this.element(e)},onclick:function(e,t){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,n,r){t.type==="radio"?this.findByName(t.name).addClass(n).removeClass(r):e(t).addClass(n).removeClass(r)},unhighlight:function(t,n,r){t.type==="radio"?this.findByName(t.name).removeClass(n).addClass(r):e(t).removeClass(n).addClass(r)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function r(t){var n=e.data(this[0].form,"validator"),r="on"+t.type.replace(/^validate/,"");n.settings[r]&&n.settings[r].call(n,this[0],t)}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var t=this.groups={};e.each(this.settings.groups,function(n,r){typeof r=="string"&&(r=r.split(/\s/)),e.each(r,function(e,r){t[r]=n})});var n=this.settings.rules;e.each(n,function(t,r){n[t]=e.validator.normalizeRule(r)}),e(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",r).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",r),this.settings.invalidHandler&&e(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){t=this.validationTargetFor(this.clean(t)),this.lastElement=t,this.prepareElement(t),this.currentElements=e(t);var n=this.check(t)!==!1;return n?delete this.invalid[t.name]:this.invalid[t.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),n},showErrors:function(t){if(t){e.extend(this.errorMap,t),this.errorList=[];for(var n in t)this.errorList.push({message:t[n],element:this.findByName(n)[0]});this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t=0;for(var n in e)t++;return t},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()===0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&e.grep(this.errorList,function(e){return e.element.name===t.name}).length===1&&t},elements:function(){var t=this,n={};return e(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in n||!t.objectLength(e(this).rules())?!1:(n[this.name]=!0,!0)})},clean:function(t){return e(t)[0]},errors:function(){var t=this.settings.errorClass.replace(" ",".");return e(this.settings.errorElement+"."+t,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([]),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(t){var n=e(t).attr("type"),r=e(t).val();return n==="radio"||n==="checkbox"?e("input[name='"+e(t).attr("name")+"']:checked").val():typeof r=="string"?r.replace(/\r/g,""):r},check:function(t){t=this.validationTargetFor(this.clean(t));var n=e(t).rules(),r=!1,i=this.elementValue(t),s;for(var o in n){var u={method:o,parameters:n[o]};try{s=e.validator.methods[o].call(this,i,t,u.parameters);if(s==="dependency-mismatch"){r=!0;continue}r=!1;if(s==="pending"){this.toHide=this.toHide.not(this.errorsFor(t));return}if(!s)return this.formatAndAdd(t,u),!1}catch(a){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+u.method+"' method.",a),a}}if(r)return;return this.objectLength(n)&&this.successList.push(t),!0},customDataMessage:function(t,n){return e(t).data("msg-"+n.toLowerCase())||t.attributes&&e(t).attr("data-msg-"+n.toLowerCase())},customMessage:function(e,t){var n=this.settings.messages[e];return n&&(n.constructor===String?n:n[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(arguments[e]!==undefined)return arguments[e];return undefined},defaultMessage:function(t,n){return this.findDefined(this.customMessage(t.name,n),this.customDataMessage(t,n),!this.settings.ignoreTitle&&t.title||undefined,e.validator.messages[n],"<strong>Warning: No message defined for "+t.name+"</strong>")},formatAndAdd:function(t,n){var r=this.defaultMessage(t,n.method),i=/\$?\{(\d+)\}/g;typeof r=="function"?r=r.call(this,n.parameters,t):i.test(r)&&(r=e.validator.format(r.replace(i,"{$1}"),n.parameters)),this.errorList.push({message:r,element:t}),this.errorMap[t.name]=r,this.submitted[t.name]=r},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t;for(e=0;this.errorList[e];e++){var n=this.errorList[e];this.settings.highlight&&this.settings.highlight.call(this,n.element,this.settings.errorClass,this.settings.validClass),this.showLabel(n.element,n.message)}this.errorList.length&&(this.toShow=this.toShow.add(this.containers));if(this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,n){var r=this.errorsFor(t);r.length?(r.removeClass(this.settings.validClass).addClass(this.settings.errorClass),r.html(n)):(r=e("<"+this.settings.errorElement+">").attr("for",this.idOrName(t)).addClass(this.settings.errorClass).html(n||""),this.settings.wrapper&&(r=r.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(r).length||(this.settings.errorPlacement?this.settings.errorPlacement(r,e(t)):r.insertAfter(t))),!n&&this.settings.success&&(r.text(""),typeof this.settings.success=="string"?r.addClass(this.settings.success):this.settings.success(r,t)),this.toShow=this.toShow.add(r)},errorsFor:function(t){var n=this.idOrName(t);return this.errors().filter(function(){return e(this).attr("for")===n})},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name).not(this.settings.ignore)[0]),e},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){return e(this.currentForm).find("[name='"+t+"']")},getLength:function(t,n){switch(n.nodeName.toLowerCase()){case"select":return e("option:selected",n).length;case"input":if(this.checkable(n))return this.findByName(n.name).filter(":checked").length}return t.length},depend:function(e,t){return this.dependTypes[typeof e]?this.dependTypes[typeof e](e,t):!0},dependTypes:{"boolean":function(e,t){return e},string:function(t,n){return!!e(t,n.form).length},"function":function(e,t){return e(t)}},optional:function(t){var n=this.elementValue(t);return!e.validator.methods.required.call(this,n,t)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(t,n){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],n&&this.pendingRequest===0&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!n&&this.pendingRequest===0&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,n){t.constructor===String?this.classRuleSettings[t]=n:e.extend(this.classRuleSettings,t)},classRules:function(t){var n={},r=e(t).attr("class");return r&&e.each(r.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(n,e.validator.classRuleSettings[this])}),n},attributeRules:function(t){var n={},r=e(t),i=r[0].getAttribute("type");for(var s in e.validator.methods){var o;s==="required"?(o=r.get(0).getAttribute(s),o===""&&(o=!0),o=!!o):o=r.attr(s),/min|max/.test(s)&&(i===null||/number|range|text/.test(i))&&(o=Number(o)),o?n[s]=o:i===s&&i!=="range"&&(n[s]=!0)}return n.maxlength&&/-1|2147483647|524288/.test(n.maxlength)&&delete n.maxlength,n},dataRules:function(t){var n,r,i={},s=e(t);for(n in e.validator.methods)r=s.data("rule-"+n.toLowerCase()),r!==undefined&&(i[n]=r);return i},staticRules:function(t){var n={},r=e.data(t.form,"validator");return r.settings.rules&&(n=e.validator.normalizeRule(r.settings.rules[t.name])||{}),n},normalizeRules:function(t,n){return e.each(t,function(r,i){if(i===!1){delete t[r];return}if(i.param||i.depends){var s=!0;switch(typeof i.depends){case"string":s=!!e(i.depends,n.form).length;break;case"function":s=i.depends.call(n,n)}s?t[r]=i.param!==undefined?i.param:!0:delete t[r]}}),e.each(t,function(r,i){t[r]=e.isFunction(i)?i(n):i}),e.each(["minlength","maxlength"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){var n;t[this]&&(e.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:typeof t[this]=="string"&&(n=t[this].split(/[\s,]+/),t[this]=[Number(n[0]),Number(n[1])]))}),e.validator.autoCreateRanges&&(t.min&&t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),t.minlength&&t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if(typeof t=="string"){var n={};e.each(t.split(/\s/),function(){n[this]=!0}),t=n}return t},addMethod:function(t,n,r){e.validator.methods[t]=n,e.validator.messages[t]=r!==undefined?r:e.validator.messages[t],n.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,n,r){if(!this.depend(r,n))return"dependency-mismatch";if(n.nodeName.toLowerCase()==="select"){var i=e(n).val();return i&&i.length>0}return this.checkable(n)?this.getLength(t,n)>0:e.trim(t).length>0},email:function(e,t){return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},url:function(e,t){return this.optional(t)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test((new Date(e)).toString())},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(e)},number:function(e,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(e))return!1;var n=0,r=0,i=!1;e=e.replace(/\D/g,"");for(var s=e.length-1;s>=0;s--){var o=e.charAt(s);r=parseInt(o,10),i&&(r*=2)>9&&(r-=9),n+=r,i=!i}return n%10===0},minlength:function(t,n,r){var i=e.isArray(t)?t.length:this.getLength(e.trim(t),n);return this.optional(n)||i>=r},maxlength:function(t,n,r){var i=e.isArray(t)?t.length:this.getLength(e.trim(t),n);return this.optional(n)||i<=r},rangelength:function(t,n,r){var i=e.isArray(t)?t.length:this.getLength(e.trim(t),n);return this.optional(n)||i>=r[0]&&i<=r[1]},min:function(e,t,n){return this.optional(t)||e>=n},max:function(e,t,n){return this.optional(t)||e<=n},range:function(e,t,n){return this.optional(t)||e>=n[0]&&e<=n[1]},equalTo:function(t,n,r){var i=e(r);return this.settings.onfocusout&&i.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){e(n).valid()}),t===i.val()},remote:function(t,n,r){if(this.optional(n))return"dependency-mismatch";var i=this.previousValue(n);this.settings.messages[n.name]||(this.settings.messages[n.name]={}),i.originalMessage=this.settings.messages[n.name].remote,this.settings.messages[n.name].remote=i.message,r=typeof r=="string"&&{url:r}||r;if(i.old===t)return i.valid;i.old=t;var s=this;this.startRequest(n);var o={};return o[n.name]=t,e.ajax(e.extend(!0,{url:r,mode:"abort",port:"validate"+n.name,dataType:"json",data:o,success:function(r){s.settings.messages[n.name].remote=i.originalMessage;var o=r===!0||r==="true";if(o){var u=s.formSubmitted;s.prepareElement(n),s.formSubmitted=u,s.successList.push(n),delete s.invalid[n.name],s.showErrors()}else{var a={},f=r||s.defaultMessage(n,"remote");a[n.name]=i.message=e.isFunction(f)?f(t):f,s.invalid[n.name]=!0,s.showErrors(a)}i.valid=o,s.stopRequest(n,o)}},r)),"pending"}}}),e.format=e.validator.format}(jQuery),function(e){var t={};if(e.ajaxPrefilter)e.ajaxPrefilter(function(e,n,r){var i=e.port;e.mode==="abort"&&(t[i]&&t[i].abort(),t[i]=r)});else{var n=e.ajax;e.ajax=function(r){var i=("mode"in r?r:e.ajaxSettings).mode,s=("port"in r?r:e.ajaxSettings).port;return i==="abort"?(t[s]&&t[s].abort(),t[s]=n.apply(this,arguments),t[s]):n.apply(this,arguments)}}}(jQuery),function(e){e.extend(e.fn,{validateDelegate:function(t,n,r){return this.bind(n,function(n){var i=e(n.target);if(i.is(t))return r.apply(i,arguments)})}})}(jQuery),function(){function e(e){return e.replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," ").replace(/[.(),;:!?%#$'"_+=\/\-]*/g,"")}jQuery.validator.addMethod("maxWords",function(t,n,r){return this.optional(n)||e(t).match(/\b\w+\b/g).length<=r},jQuery.validator.format("Please enter {0} words or less.")),jQuery.validator.addMethod("minWords",function(t,n,r){return this.optional(n)||e(t).match(/\b\w+\b/g).length>=r},jQuery.validator.format("Please enter at least {0} words.")),jQuery.validator.addMethod("rangeWords",function(t,n,r){var i=e(t),s=/\b\w+\b/g;return this.optional(n)||i.match(s).length>=r[0]&&i.match(s).length<=r[1]},jQuery.validator.format("Please enter between {0} and {1} words."))}(),jQuery.validator.addMethod("letterswithbasicpunc",function(e,t){return this.optional(t)||/^[a-z\-.,()'"\s]+$/i.test(e)},"Letters or punctuation only please"),jQuery.validator.addMethod("alphanumeric",function(e,t){return this.optional(t)||/^\w+$/i.test(e)},"Letters, numbers, and underscores only please"),jQuery.validator.addMethod("lettersonly",function(e,t){return this.optional(t)||/^[a-z]+$/i.test(e)},"Letters only please"),jQuery.validator.addMethod("nowhitespace",function(e,t){return this.optional(t)||/^\S+$/i.test(e)},"No white space please"),jQuery.validator.addMethod("ziprange",function(e,t){return this.optional(t)||/^90[2-5]\d\{2\}-\d{4}$/.test(e)},"Your ZIP-code must be in the range 902xx-xxxx to 905-xx-xxxx"),jQuery.validator.addMethod("zipcodeUS",function(e,t){return this.optional(t)||/\d{5}-\d{4}$|^\d{5}$/.test(e)},"The specified US ZIP Code is invalid"),jQuery.validator.addMethod("integer",function(e,t){return this.optional(t)||/^-?\d+$/.test(e)},"A positive or negative non-decimal number please"),jQuery.validator.addMethod("vinUS",function(e){if(e.length!==17)return!1;var t,n,r,i,s,o,u=["A","B","C","D","E","F","G","H","J","K","L","M","N","P","R","S","T","U","V","W","X","Y","Z"],a=[1,2,3,4,5,6,7,8,1,2,3,4,5,7,9,2,3,4,5,6,7,8,9],f=[8,7,6,5,4,3,2,10,0,9,8,7,6,5,4,3,2],l=0;for(t=0;t<17;t++){i=f[t],r=e.slice(t,t+1),t===8&&(o=r);if(!isNaN(r))r*=i;else for(n=0;n<u.length;n++)if(r.toUpperCase()===u[n]){r=a[n],r*=i,isNaN(o)&&n===8&&(o=u[n]);break}l+=r}return s=l%11,s===10&&(s="X"),s===o?!0:!1},"The specified vehicle identification number (VIN) is invalid."),jQuery.validator.addMethod("dateITA",function(e,t){var n=!1,r=/^\d{1,2}\/\d{1,2}\/\d{4}$/;if(r.test(e)){var i=e.split("/"),s=parseInt(i[0],10),o=parseInt(i[1],10),u=parseInt(i[2],10),a=new Date(u,o-1,s);a.getFullYear()===u&&a.getMonth()===o-1&&a.getDate()===s?n=!0:n=!1}else n=!1;return this.optional(t)||n},"Please enter a correct date"),jQuery.validator.addMethod("iban",function(e,t){if(this.optional(t))return!0;if(!/^([a-zA-Z0-9]{4} ){2,8}[a-zA-Z0-9]{1,4}|[a-zA-Z0-9]{12,34}$/.test(e))return!1;var n=e.replace(/ /g,"").toUpperCase(),r=n.substring(0,2),i={AL:"\\d{8}[\\dA-Z]{16}",AD:"\\d{8}[\\dA-Z]{12}",AT:"\\d{16}",AZ:"[\\dA-Z]{4}\\d{20}",BE:"\\d{12}",BH:"[A-Z]{4}[\\dA-Z]{14}",BA:"\\d{16}",BR:"\\d{23}[A-Z][\\dA-Z]",BG:"[A-Z]{4}\\d{6}[\\dA-Z]{8}",CR:"\\d{17}",HR:"\\d{17}",CY:"\\d{8}[\\dA-Z]{16}",CZ:"\\d{20}",DK:"\\d{14}",DO:"[A-Z]{4}\\d{20}",EE:"\\d{16}",FO:"\\d{14}",FI:"\\d{14}",FR:"\\d{10}[\\dA-Z]{11}\\d{2}",GE:"[\\dA-Z]{2}\\d{16}",DE:"\\d{18}",GI:"[A-Z]{4}[\\dA-Z]{15}",GR:"\\d{7}[\\dA-Z]{16}",GL:"\\d{14}",GT:"[\\dA-Z]{4}[\\dA-Z]{20}",HU:"\\d{24}",IS:"\\d{22}",IE:"[\\dA-Z]{4}\\d{14}",IL:"\\d{19}",IT:"[A-Z]\\d{10}[\\dA-Z]{12}",KZ:"\\d{3}[\\dA-Z]{13}",KW:"[A-Z]{4}[\\dA-Z]{22}",LV:"[A-Z]{4}[\\dA-Z]{13}",LB:"\\d{4}[\\dA-Z]{20}",LI:"\\d{5}[\\dA-Z]{12}",LT:"\\d{16}",LU:"\\d{3}[\\dA-Z]{13}",MK:"\\d{3}[\\dA-Z]{10}\\d{2}",MT:"[A-Z]{4}\\d{5}[\\dA-Z]{18}",MR:"\\d{23}",MU:"[A-Z]{4}\\d{19}[A-Z]{3}",MC:"\\d{10}[\\dA-Z]{11}\\d{2}",MD:"[\\dA-Z]{2}\\d{18}",ME:"\\d{18}",NL:"[A-Z]{4}\\d{10}",NO:"\\d{11}",PK:"[\\dA-Z]{4}\\d{16}",PS:"[\\dA-Z]{4}\\d{21}",PL:"\\d{24}",PT:"\\d{21}",RO:"[A-Z]{4}[\\dA-Z]{16}",SM:"[A-Z]\\d{10}[\\dA-Z]{12}",SA:"\\d{2}[\\dA-Z]{18}",RS:"\\d{18}",SK:"\\d{20}",SI:"\\d{15}",ES:"\\d{20}",SE:"\\d{20}",CH:"\\d{5}[\\dA-Z]{12}",TN:"\\d{20}",TR:"\\d{5}[\\dA-Z]{17}",AE:"\\d{3}\\d{16}",GB:"[A-Z]{4}\\d{14}",VG:"[\\dA-Z]{4}\\d{16}"},s=i[r];if(typeof s!="undefined"){var o=new RegExp("^[A-Z]{2}\\d{2}"+s+"$","");if(!o.test(n))return!1}var u=n.substring(4,n.length)+n.substring(0,4),a="",f=!0,l;for(var c=0;c<u.length;c++)l=u.charAt(c),l!=="0"&&(f=!1),f||(a+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(l));var h="",p="";for(var d=0;d<a.length;d++){var v=a.charAt(d);p=""+h+""+v,h=p%97}return h===1},"Please specify a valid IBAN"),jQuery.validator.addMethod("dateNL",function(e,t){return this.optional(t)||/^(0?[1-9]|[12]\d|3[01])[\.\/\-](0?[1-9]|1[012])[\.\/\-]([12]\d)?(\d\d)$/.test(e)},"Please enter a correct date"),jQuery.validator.addMethod("phoneNL",function(e,t){return this.optional(t)||/^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)[1-9]((\s|\s?\-\s?)?[0-9]){8}$/.test(e)},"Please specify a valid phone number."),jQuery.validator.addMethod("mobileNL",function(e,t){return this.optional(t)||/^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)6((\s|\s?\-\s?)?[0-9]){8}$/.test(e)},"Please specify a valid mobile number"),jQuery.validator.addMethod("postalcodeNL",function(e,t){return this.optional(t)||/^[1-9][0-9]{3}\s?[a-zA-Z]{2}$/.test(e)},"Please specify a valid postal code"),jQuery.validator.addMethod("bankaccountNL",function(e,t){if(this.optional(t))return!0;if(!/^[0-9]{9}|([0-9]{2} ){3}[0-9]{3}$/.test(e))return!1;var n=e.replace(/ /g,""),r=0,i=n.length;for(var s=0;s<i;s++){var o=i-s,u=n.substring(s,s+1);r+=o*u}return r%11===0},"Please specify a valid bank account number"),jQuery.validator.addMethod("giroaccountNL",function(e,t){return this.optional(t)||/^[0-9]{1,7}$/.test(e)},"Please specify a valid giro account number"),jQuery.validator.addMethod("bankorgiroaccountNL",function(e,t){return this.optional(t)||jQuery.validator.methods.bankaccountNL.call(this,e,t)||jQuery.validator.methods.giroaccountNL.call(this,e,t)},"Please specify a valid bank or giro account number"),jQuery.validator.addMethod("time",function(e,t){return this.optional(t)||/^([01]\d|2[0-3])(:[0-5]\d){1,2}$/.test(e)},"Please enter a valid time, between 00:00 and 23:59"),jQuery.validator.addMethod("time12h",function(e,t){return this.optional(t)||/^((0?[1-9]|1[012])(:[0-5]\d){1,2}(\ ?[AP]M))$/i.test(e)},"Please enter a valid time in 12-hour am/pm format"),jQuery.validator.addMethod("phoneUS",function(e,t){return e=e.replace(/\s+/g,""),this.optional(t)||e.length>9&&e.match(/^(\+?1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/)},"Please specify a valid phone number"),jQuery.validator.addMethod("phoneUK",function(e,t){return e=e.replace(/\(|\)|\s+|-/g,""),this.optional(t)||e.length>9&&e.match(/^(?:(?:(?:00\s?|\+)44\s?)|(?:\(?0))(?:\d{2}\)?\s?\d{4}\s?\d{4}|\d{3}\)?\s?\d{3}\s?\d{3,4}|\d{4}\)?\s?(?:\d{5}|\d{3}\s?\d{3})|\d{5}\)?\s?\d{4,5})$/)},"Please specify a valid phone number"),jQuery.validator.addMethod("mobileUK",function(e,t){return e=e.replace(/\(|\)|\s+|-/g,""),this.optional(t)||e.length>9&&e.match(/^(?:(?:(?:00\s?|\+)44\s?|0)7(?:[45789]\d{2}|624)\s?\d{3}\s?\d{3})$/)},"Please specify a valid mobile number"),jQuery.validator.addMethod("phonesUK",function(e,t){return e=e.replace(/\(|\)|\s+|-/g,""),this.optional(t)||e.length>9&&e.match(/^(?:(?:(?:00\s?|\+)44\s?|0)(?:1\d{8,9}|[23]\d{9}|7(?:[45789]\d{8}|624\d{6})))$/)},"Please specify a valid uk phone number"),jQuery.validator.addMethod("postcodeUK",function(e,t){return this.optional(t)||/^((([A-PR-UWYZ][0-9])|([A-PR-UWYZ][0-9][0-9])|([A-PR-UWYZ][A-HK-Y][0-9])|([A-PR-UWYZ][A-HK-Y][0-9][0-9])|([A-PR-UWYZ][0-9][A-HJKSTUW])|([A-PR-UWYZ][A-HK-Y][0-9][ABEHMNPRVWXY]))\s?([0-9][ABD-HJLNP-UW-Z]{2})|(GIR)\s?(0AA))$/i.test(e)},"Please specify a valid UK postcode"),jQuery.validator.addMethod("strippedminlength",function(e,t,n){return jQuery(e).text().length>=n},jQuery.validator.format("Please enter at least {0} characters")),jQuery.validator.addMethod("email2",function(e,t,n){return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)*(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(e)},jQuery.validator.messages.email),jQuery.validator.addMethod("url2",function(e,t,n){return this.optional(t)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)*(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},jQuery.validator.messages.url),jQuery.validator.addMethod("creditcardtypes",function(e,t,n){if(/[^0-9\-]+/.test(e))return!1;e=e.replace(/\D/g,"");var r=0;return n.mastercard&&(r|=1),n.visa&&(r|=2),n.amex&&(r|=4),n.dinersclub&&(r|=8),n.enroute&&(r|=16),n.discover&&(r|=32),n.jcb&&(r|=64),n.unknown&&(r|=128),n.all&&(r=255),r&1&&/^(5[12345])/
    .test(e)?e.length===16:r&2&&/^(4)/.test(e)?e.length===16:r&4&&/^(3[47])/.test(e)?e.length===15:r&8&&/^(3(0[012345]|[68]))/.test(e)?e.length===14:r&16&&/^(2(014|149))/.test(e)?e.length===15:r&32&&/^(6011)/.test(e)?e.length===16:r&64&&/^(3)/.test(e)?e.length===16:r&64&&/^(2131|1800)/.test(e)?e.length===15:r&128?!0:!1},"Please enter a valid credit card number."),jQuery.validator.addMethod("ipv4",function(e,t,n){return this.optional(t)||/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i.test(e)},"Please enter a valid IP v4 address."),jQuery.validator.addMethod("ipv6",function(e,t,n){return this.optional(t)||/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i.test(e)},"Please enter a valid IP v6 address."),jQuery.validator.addMethod("pattern",function(e,t,n){return this.optional(t)?!0:(typeof n=="string"&&(n=new RegExp("^(?:"+n+")$")),n.test(e))},"Invalid format."),jQuery.validator.addMethod("require_from_group",function(e,t,n){var r=this,i=n[1],s=jQuery(i,t.form).filter(function(){return r.elementValue(this)}).length>=n[0];if(!jQuery(t).data("being_validated")){var o=jQuery(i,t.form);o.data("being_validated",!0),o.valid(),o.data("being_validated",!1)}return s},jQuery.format("Please fill at least {0} of these fields.")),jQuery.validator.addMethod("skip_or_fill_minimum",function(e,t,n){var r=this,i=n[0],s=n[1],o=jQuery(s,t.form).filter(function(){return r.elementValue(this)}).length,u=o>=i||o===0;if(!jQuery(t).data("being_validated")){var a=jQuery(s,t.form);a.data("being_validated",!0),a.valid(),a.data("being_validated",!1)}return u},jQuery.format("Please either skip these fields or fill at least {0} of them.")),jQuery.validator.addMethod("accept",function(e,t,n){var r=typeof n=="string"?n.replace(/\s/g,"").replace(/,/g,"|"):"image/*",i=this.optional(t),s,o;if(i)return i;if(jQuery(t).attr("type")==="file"){r=r.replace(/\*/g,".*");if(t.files&&t.files.length)for(s=0;s<t.files.length;s++){o=t.files[s];if(!o.type.match(new RegExp(".?("+r+")$","i")))return!1}}return!0},jQuery.format("Please enter a value with a valid mimetype.")),jQuery.validator.addMethod("extension",function(e,t,n){return n=typeof n=="string"?n.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(t)||e.match(new RegExp(".("+n+")$","i"))},jQuery.format("Please enter a value with a valid extension.")),function(e){e.widget("custom.combobox",{_create:function(){this.wrapper=e("<span>").addClass("custom-combobox").insertAfter(this.element),this.element.hide(),this._createAutocomplete(),this._createShowAllButton()},_createAutocomplete:function(){var t=this.element.children(":selected"),n=t.val()?t.text():"",r=e.extend({},{"class":""},this.options);delete r.select,this.input=e("<input>").appendTo(this.wrapper).val(n).attr("title","").addClass("custom-combobox-input ui-widget ui-widget-content ui-state-default ui-corner-left "+r["class"]).autocomplete(e.extend({delay:0,minLength:0,source:e.proxy(this,"_source")},r)).tooltip({tooltipClass:"ui-state-highlight"}),this._on(this.input,{autocompleteselect:function(e,t){t.item.option.selected=!0,this._trigger("select",e,{item:t.item.option})},autocompletechange:"_removeIfInvalid"})},_createShowAllButton:function(){var t=this.input,n=!1;e("<a>").attr("tabIndex",-1).attr("title","Show All Items").tooltip().appendTo(this.wrapper).button({icons:{primary:"ui-icon-triangle-1-s"},text:!1}).removeClass("ui-corner-all").addClass("custom-combobox-toggle ui-corner-right").mousedown(function(){n=t.autocomplete("widget").is(":visible")}).click(function(){t.focus();if(n)return;t.autocomplete("search","")})},_source:function(t,n){var r=new RegExp("^"+e.ui.autocomplete.escapeRegex(t.term),"i");n(this.element.children("option").map(function(){var n=e(this).text();if(this.value&&(!t.term||r.test(n)))return{label:n,value:n,option:this}}))},_removeIfInvalid:function(t,n){if(n.item)return;var r=this.input.val(),i=r.toLowerCase(),s=!1;this.element.children("option").each(function(){if(e(this).text().toLowerCase()===i)return this.selected=s=!0,!1});if(s)return;this.input.val("").attr("title",r+" didn't match any item").tooltip("open"),this.element.val(""),this._delay(function(){this.input.tooltip("close").attr("title","")},2500),this.input.data("ui-autocomplete").term=""},_destroy:function(){this.wrapper.remove(),this.element.show()},disable:function(){this.input.autocomplete("disable")},enable:function(){this.input.autocomplete("enable")}})}(jQuery),function(e){var t=this.SelectBox=function(e,t){if(e instanceof jQuery){if(!(e.length>0))return;e=e[0]}this.typeTimer=null,this.typeSearch="",this.isMac=navigator.platform.match(/mac/i),t="object"==typeof t?t:{},this.selectElement=e;if(!t.mobile&&navigator.userAgent.match(/iPad|iPhone|Android|IEMobile|BlackBerry/i))return!1;if("select"!==e.tagName.toLowerCase())return!1;this.init(t)};t.prototype.version="1.2.0",t.prototype.init=function(t){var n=e(this.selectElement);if(n.data("selectBox-control"))return!1;var r=e('<a class="selectBox" />'),i=n.attr("multiple")||parseInt(n.attr("size"))>1,s=t||{},o=parseInt(n.prop("tabindex"))||0,u=this;r.width(n.outerWidth()).addClass(n.attr("class")).attr("title",n.attr("title")||"").attr("tabindex",o).css("display","inline-block").bind("focus.selectBox",function(){this!==document.activeElement&&document.body!==document.activeElement&&e(document.activeElement).blur();if(r.hasClass("selectBox-active"))return;r.addClass("selectBox-active"),n.trigger("focus")}).bind("blur.selectBox",function(){if(!r.hasClass("selectBox-active"))return;r.removeClass("selectBox-active"),n.trigger("blur")}),e(window).data("selectBox-bindings")||e(window).data("selectBox-bindings",!0).bind("scroll.selectBox",this.hideMenus).bind("resize.selectBox",this.hideMenus),n.attr("disabled")&&r.addClass("selectBox-disabled"),n.bind("click.selectBox",function(e){r.focus(),e.preventDefault()});if(i){t=this.getOptions("inline"),r.append(t).data("selectBox-options",t).addClass("selectBox-inline selectBox-menuShowing").bind("keydown.selectBox",function(e){u.handleKeyDown(e)}).bind("keypress.selectBox",function(e){u.handleKeyPress(e)}).bind("mousedown.selectBox",function(t){if(1!==t.which)return;e(t.target).is("A.selectBox-inline")&&t.preventDefault(),r.hasClass("selectBox-focus")||r.focus()}).insertAfter(n);if(!n[0].style.height){var f=n.attr("size")?parseInt(n.attr("size")):5,l=r.clone().removeAttr("id").css({position:"absolute",top:"-9999em"}).show().appendTo("body");l.find(".selectBox-options").html("<li><a>В </a></li>");var c=parseInt(l.find(".selectBox-options A:first").html("&nbsp;").outerHeight());l.remove(),r.height(c*f)}this.disableSelection(r)}else{var h=e('<span class="selectBox-label" />'),p=e('<span class="selectBox-arrow" />');h.attr("class",this.getLabelClass()).text(this.getLabelText()),t=this.getOptions("dropdown"),t.appendTo("BODY"),r.data("selectBox-options",t).addClass("selectBox-dropdown").append(h).append(p).bind("mousedown.selectBox",function(e){1===e.which&&(r.hasClass("selectBox-menuShowing")?u.hideMenus():(e.stopPropagation(),t.data("selectBox-down-at-x",e.screenX).data("selectBox-down-at-y",e.screenY),u.showMenu()))}).bind("keydown.selectBox",function(e){u.handleKeyDown(e)}).bind("keypress.selectBox",function(e){u.handleKeyPress(e)}).bind("open.selectBox",function(e,t){if(t&&t._selectBox===!0)return;u.showMenu()}).bind("close.selectBox",function(e,t){if(t&&t._selectBox===!0)return;u.hideMenus()}).insertAfter(n);var d=r.width()-p.outerWidth()-parseInt(h.css("paddingLeft"))||0-parseInt(h.css("paddingRight"))||0;h.width(d),this.disableSelection(r)}n.addClass("selectBox").data("selectBox-control",r).data("selectBox-settings",s).hide()},t.prototype.getOptions=function(t){var n,r=e(this.selectElement),i=this,s=function(t,n){return t.children("OPTION, OPTGROUP").each(function(){if(e(this).is("OPTION"))e(this).length>0?i.generateOptions(e(this),n):n.append("<li>В </li>");else{var t=e('<li class="selectBox-optgroup" />');t.text(e(this).attr("label")),n.append(t),n=s(e(this),n)}}),n};switch(t){case"inline":return n=e('<ul class="selectBox-options" />'),n=s(r,n),n.find("A").bind("mouseover.selectBox",function(t){i.addHover(e(this).parent())}).bind("mouseout.selectBox",function(t){i.removeHover(e(this).parent())}).bind("mousedown.selectBox",function(e){if(1!==e.which)return;e.preventDefault(),r.selectBox("control").hasClass("selectBox-active")||r.selectBox("control").focus()}).bind("mouseup.selectBox",function(t){if(1!==t.which)return;i.hideMenus(),i.selectOption(e(this).parent(),t)}),this.disableSelection(n),n;case"dropdown":n=e('<ul class="selectBox-dropdown-menu selectBox-options" />'),n=s(r,n),n.data("selectBox-select",r).css("display","none").appendTo("BODY").find("A").bind("mousedown.selectBox",function(e){e.which===1&&(e.preventDefault(),e.screenX===n.data("selectBox-down-at-x")&&e.screenY===n.data("selectBox-down-at-y")&&(n.removeData("selectBox-down-at-x").removeData("selectBox-down-at-y"),i.hideMenus()))}).bind("mouseup.selectBox",function(t){if(1!==t.which)return;if(t.screenX===n.data("selectBox-down-at-x")&&t.screenY===n.data("selectBox-down-at-y"))return;n.removeData("selectBox-down-at-x").removeData("selectBox-down-at-y"),i.selectOption(e(this).parent()),i.hideMenus()}).bind("mouseover.selectBox",function(t){i.addHover(e(this).parent())}).bind("mouseout.selectBox",function(t){i.removeHover(e(this).parent())});var o=r.attr("class")||"";if(""!==o){o=o.split(" ");for(var u in o)n.addClass(o[u]+"-selectBox-dropdown-menu")}return this.disableSelection(n),n}},t.prototype.getLabelClass=function(){var t=e(this.selectElement).find("OPTION:selected");return("selectBox-label "+(t.attr("class")||"")).replace(/\s+$/,"")},t.prototype.getLabelText=function(){var t=e(this.selectElement).find("OPTION:selected");return t.text()||"В "},t.prototype.setLabel=function(){var t=e(this.selectElement),n=t.data("selectBox-control");if(!n)return;n.find(".selectBox-label").attr("class",this.getLabelClass()).text(this.getLabelText())},t.prototype.destroy=function(){var t=e(this.selectElement),n=t.data("selectBox-control");if(!n)return;var r=n.data("selectBox-options");r.remove(),n.remove(),t.removeClass("selectBox").removeData("selectBox-control").data("selectBox-control",null).removeData("selectBox-settings").data("selectBox-settings",null).show()},t.prototype.refresh=function(){var t=e(this.selectElement),n=t.data("selectBox-control"),r=n.hasClass("selectBox-dropdown"),i=n.hasClass("selectBox-menuShowing");t.selectBox("options",t.html()),r&&i&&this.showMenu()},t.prototype.showMenu=function(){var t=this,n=e(this.selectElement),r=n.data("selectBox-control"),i=n.data("selectBox-settings"),s=r.data("selectBox-options");if(r.hasClass("selectBox-disabled"))return!1;this.hideMenus();var o=parseInt(r.css("borderBottomWidth"))||0;s.width(r.innerWidth()).css({top:r.offset().top+r.outerHeight()-o,left:r.offset().left});if(n.triggerHandler("beforeopen"))return!1;var u=function(){n.triggerHandler("open",{_selectBox:!0})};switch(i.menuTransition){case"fade":s.fadeIn(i.menuSpeed,u);break;case"slide":s.slideDown(i.menuSpeed,u);break;default:s.show(i.menuSpeed,u)}i.menuSpeed||u();var f=s.find(".selectBox-selected:first");this.keepOptionInView(f,!0),this.addHover(f),r.addClass("selectBox-menuShowing"),e(document).bind("mousedown.selectBox",function(n){if(1===n.which){if(e(n.target).parents().andSelf().hasClass("selectBox-options"))return;t.hideMenus()}})},t.prototype.hideMenus=function(){if(e(".selectBox-dropdown-menu:visible").length===0)return;e(document).unbind("mousedown.selectBox"),e(".selectBox-dropdown-menu").each(function(){var t=e(this),n=t.data("selectBox-select"),r=n.data("selectBox-control"),i=n.data("selectBox-settings");if(n.triggerHandler("beforeclose"))return!1;var s=function(){n.triggerHandler("close",{_selectBox:!0})};if(i){switch(i.menuTransition){case"fade":t.fadeOut(i.menuSpeed,s);break;case"slide":t.slideUp(i.menuSpeed,s);break;default:t.hide(i.menuSpeed,s)}i.menuSpeed||s(),r.removeClass("selectBox-menuShowing")}else e(this).hide(),e(this).triggerHandler("close",{_selectBox:!0}),e(this).removeClass("selectBox-menuShowing")})},t.prototype.selectOption=function(t,n){var r=e(this.selectElement);t=e(t);var i=r.data("selectBox-control"),s=r.data("selectBox-settings");if(i.hasClass("selectBox-disabled"))return!1;if(0===t.length||t.hasClass("selectBox-disabled"))return!1;if(r.attr("multiple"))if(n.shiftKey&&i.data("selectBox-last-selected")){t.toggleClass("selectBox-selected");var o;t.index()>i.data("selectBox-last-selected").index()?o=t.siblings().slice(i.data("selectBox-last-selected").index(),t.index()):o=t.siblings().slice(t.index(),i.data("selectBox-last-selected").index()),o=o.not(".selectBox-optgroup, .selectBox-disabled"),t.hasClass("selectBox-selected")?o.addClass("selectBox-selected"):o.removeClass("selectBox-selected")}else this.isMac&&n.metaKey||!this.isMac&&n.ctrlKey?t.toggleClass("selectBox-selected"):(t.siblings().removeClass("selectBox-selected"),t.addClass("selectBox-selected"));else t.siblings().removeClass("selectBox-selected"),t.addClass("selectBox-selected");i.hasClass("selectBox-dropdown")&&i.find(".selectBox-label").text(t.text());var u=0,f=[];return r.attr("multiple")?i.find(".selectBox-selected A").each(function(){f[u++]=e(this).attr("rel")}):f=t.find("A").attr("rel"),i.data("selectBox-last-selected",t),r.val()!==f&&(r.val(f),this.setLabel(),r.trigger("change")),!0},t.prototype.addHover=function(t){t=e(t);var n=e(this.selectElement),r=n.data("selectBox-control"),i=r.data("selectBox-options");i.find(".selectBox-hover").removeClass("selectBox-hover"),t.addClass("selectBox-hover")},t.prototype.getSelectElement=function(){return this.selectElement},t.prototype.removeHover=function(t){t=e(t);var n=e(this.selectElement),r=n.data("selectBox-control"),i=r.data("selectBox-options");i.find(".selectBox-hover").removeClass("selectBox-hover")},t.prototype.keepOptionInView=function(t,n){if(!t||t.length===0)return;var r=e(this.selectElement),i=r.data("selectBox-control"),s=i.data("selectBox-options"),o=i.hasClass("selectBox-dropdown")?s:s.parent(),u=parseInt(t.offset().top-o.position().top),f=parseInt(u+t.outerHeight());n?o.scrollTop(t.offset().top-o.offset().top+o.scrollTop()-o.height()/2):(u<0&&o.scrollTop(t.offset().top-o.offset().top+o.scrollTop()),f>o.height()&&o.scrollTop(t.offset().top+t.outerHeight()-o.offset().top+o.scrollTop()-o.height()))},t.prototype.handleKeyDown=function(t){var n=e(this.selectElement),r=n.data("selectBox-control"),i=r.data("selectBox-options"),s=n.data("selectBox-settings"),o=0,u=0;if(r.hasClass("selectBox-disabled"))return;switch(t.keyCode){case 8:t.preventDefault(),this.typeSearch="";break;case 9:case 27:this.hideMenus(),this.removeHover();break;case 13:r.hasClass("selectBox-menuShowing")?(this.selectOption(i.find("LI.selectBox-hover:first"),t),r.hasClass("selectBox-dropdown")&&this.hideMenus()):this.showMenu();break;case 38:case 37:t.preventDefault();if(r.hasClass("selectBox-menuShowing")){var f=i.find(".selectBox-hover").prev("LI");o=i.find("LI:not(.selectBox-optgroup)").length,u=0;while(f.length===0||f.hasClass("selectBox-disabled")||f.hasClass("selectBox-optgroup")){f=f.prev("LI"),f.length===0&&(s.loopOptions?f=i.find("LI:last"):f=i.find("LI:first"));if(++u>=o)break}this.addHover(f),this.selectOption(f,t),this.keepOptionInView(f)}else this.showMenu();break;case 40:case 39:t.preventDefault();if(r.hasClass("selectBox-menuShowing")){var l=i.find(".selectBox-hover").next("LI");o=i.find("LI:not(.selectBox-optgroup)").length,u=0;while(0===l.length||l.hasClass("selectBox-disabled")||l.hasClass("selectBox-optgroup")){l=l.next("LI"),l.length===0&&(s.loopOptions?l=i.find("LI:first"):l=i.find("LI:last"));if(++u>=o)break}this.addHover(l),this.selectOption(l,t),this.keepOptionInView(l)}else this.showMenu()}},t.prototype.handleKeyPress=function(t){var n=e(this.selectElement),r=n.data("selectBox-control"),i=r.data("selectBox-options");if(r.hasClass("selectBox-disabled"))return;switch(t.keyCode){case 9:case 27:case 13:case 38:case 37:case 40:case 39:break;default:r.hasClass("selectBox-menuShowing")||this.showMenu(),t.preventDefault(),clearTimeout(this.typeTimer),this.typeSearch+=String.fromCharCode(t.charCode||t.keyCode),i.find("A").each(function(){if(e(this).text().substr(0,this.typeSearch.length).toLowerCase()===this.typeSearch.toLowerCase())return this.addHover(e(this).parent()),this.selectOption(e(this).parent(),t),this.keepOptionInView(e(this).parent()),!1}),this.typeTimer=setTimeout(function(){this.typeSearch=""},1e3)}},t.prototype.enable=function(){var t=e(this.selectElement);t.prop("disabled",!1);var n=t.data("selectBox-control");if(!n)return;n.removeClass("selectBox-disabled")},t.prototype.disable=function(){var t=e(this.selectElement);t.prop("disabled",!0);var n=t.data("selectBox-control");if(!n)return;n.addClass("selectBox-disabled")},t.prototype.setValue=function(t){var n=e(this.selectElement);n.val(t),t=n.val(),null===t&&(t=n.children().first().val(),n.val(t));var r=n.data("selectBox-control");if(!r)return;var i=n.data("selectBox-settings"),s=r.data("selectBox-options");this.setLabel(),s.find(".selectBox-selected").removeClass("selectBox-selected"),s.find("A").each(function(){if(typeof t=="object")for(var n=0;n<t.length;n++)e(this).attr("rel")==t[n]&&e(this).parent().addClass("selectBox-selected");else e(this).attr("rel")==t&&e(this).parent().addClass("selectBox-selected")}),i.change&&i.change.call(n)},t.prototype.setOptions=function(t){var n=e(this.selectElement),r=n.data("selectBox-control"),i=n.data("selectBox-settings"),s;switch(typeof t){case"string":n.html(t);break;case"object":n.html("");for(var o in t){if(t[o]===null)continue;if(typeof t[o]=="object"){var u=e('<optgroup label="'+o+'" />');for(var f in t[o])u.append('<option value="'+f+'">'+t[o][f]+"</option>");n.append(u)}else{var l=e('<option value="'+o+'">'+t[o]+"</option>");n.append(l)}}}if(!r)return;r.data("selectBox-options").remove(),s=r.hasClass("selectBox-dropdown")?"dropdown":"inline",t=this.getOptions(s),r.data("selectBox-options",t);switch(s){case"inline":r.append(t);break;case"dropdown":this.setLabel(),e("BODY").append(t)}},t.prototype.disableSelection=function(t){e(t).css("MozUserSelect","none").bind("selectstart",function(e){e.preventDefault()})},t.prototype.generateOptions=function(t,n){var r=e("<li />"),i=e("<a />");r.addClass(t.attr("class")),r.data(t.data()),i.attr("rel",t.val()).text(t.text()),r.append(i),t.attr("disabled")&&r.addClass("selectBox-disabled"),t.attr("selected")&&r.addClass("selectBox-selected"),n.append(r)},e.extend(e.fn,{selectBox:function(n,r){var i;switch(n){case"control":return e(this).data("selectBox-control");case"settings":if(!r)return e(this).data("selectBox-settings");e(this).each(function(){e(this).data("selectBox-settings",e.extend(!0,e(this).data("selectBox-settings"),r))});break;case"options":if(undefined===r)return e(this).data("selectBox-control").data("selectBox-options");e(this).each(function(){(i=e(this).data("selectBox"))&&i.setOptions(r)});break;case"value":if(undefined===r)return e(this).val();e(this).each(function(){(i=e(this).data("selectBox"))&&i.setValue(r)});break;case"refresh":e(this).each(function(){(i=e(this).data("selectBox"))&&i.refresh()});break;case"enable":e(this).each(function(){(i=e(this).data("selectBox"))&&i.enable(this)});break;case"disable":e(this).each(function(){(i=e(this).data("selectBox"))&&i.disable()});break;case"destroy":e(this).each(function(){if(i=e(this).data("selectBox"))i.destroy(),e(this).data("selectBox",null)});break;case"instance":return e(this).data("selectBox");default:e(this).each(function(r,i){e(i).data("selectBox")||e(i).data("selectBox",new t(i,n))})}return e(this)}})}(jQuery);var msBeautify=msBeautify||{};(function($){function dd(element,settings){var settings=$.extend(!0,{byJson:{data:null,selectedIndex:0,name:null,size:0,multiple:!1,width:250},mainCSS:"dd",height:120,visibleRows:7,rowHeight:0,showIcon:!0,zIndex:9999,useSprite:!1,animStyle:"slideDown",event:"click",openDirection:"auto",jsonTitle:!0,style:"",disabledOpacity:.7,disabledOptionEvents:!0,childWidth:0,enableCheckbox:!1,checkboxNameSuffix:"_mscheck",append:"",prepend:"",reverseMode:!0,roundedCorner:!0,enableAutoFilter:!0,on:{create:null,open:null,close:null,add:null,remove:null,change:null,blur:null,click:null,dblclick:null,mousemove:null,mouseover:null,mouseout:null,focus:null,mousedown:null,mouseup:null}},settings),$this=this,holderId={postElementHolder:"_msddHolder",postID:"_msdd",postTitleID:"_title",postTitleTextID:"_titleText",postChildID:"_child"},css={dd:settings.mainCSS,ddTitle:"ddTitle",arrow:"ddArrow arrowoff",ddChild:"ddChild",ddTitleText:"ddTitleText",disabled:"disabled",enabled:"enabled",ddOutOfVision:"ddOutOfVision",borderTop:"borderTop",noBorderTop:"noBorderTop",selected:"selected",divider:"divider",optgroup:"optgroup",optgroupTitle:"optgroupTitle",description:"description",label:"ddlabel",hover:"hover",disabledAll:"disabledAll"},css_i={li:"_msddli_",borderRadiusTp:"borderRadiusTp",ddChildMore:"border shadow",fnone:"fnone"},isList=!1,isMultiple=!1,isDisabled=!1,cacheElement={},element,orginial={},isOpen=!1,DOWN_ARROW=40,UP_ARROW=38,LEFT_ARROW=37,RIGHT_ARROW=39,ESCAPE=27,ENTER=13,ALPHABETS_START=47,SHIFT=16,CONTROL=17,BACKSPACE=8,DELETE=46,shiftHolded=!1,controlHolded=!1,lastTarget=null,forcedTrigger=!1,oldSelected,isCreated=!1,doc=document,ua=window.navigator.userAgent,isIE=ua.match(/msie/i);settings.reverseMode=settings.reverseMode.toString(),settings.roundedCorner=settings.roundedCorner.toString();var isArray=function(e){return Object.prototype.toString.call(e)=="[object Array]"?!0:!1},msieversion=function(){var e=ua.indexOf("MSIE");return e>0?parseInt(ua.substring(e+5,ua.indexOf(".",e))):0},checkDataSetting=function(){settings.mainCSS=$("#"+element).data("maincss")||settings.mainCSS,settings.visibleRows=$("#"+element).data("visiblerows")||settings.visibleRows,$("#"+element).data("showicon")==0&&(settings.showIcon=$("#"+element).data("showicon")),settings.useSprite=$("#"+element).data("usesprite")||settings.useSprite,settings.animStyle=$("#"+element).data("animstyle")||settings.animStyle,settings.event=$("#"+element).data("event")||settings.event,settings.openDirection=$("#"+element).data("opendirection")||settings.openDirection,settings.jsonTitle=$("#"+element).data("jsontitle")||settings.jsonTitle,settings.disabledOpacity=$("#"+element).data("disabledopacity")||settings.disabledOpacity,settings.childWidth=$("#"+element).data("childwidth")||settings.childWidth,settings.enableCheckbox=$("#"+element).data("enablecheckbox")||settings.enableCheckbox,settings.checkboxNameSuffix=$("#"+element).data("checkboxnamesuffix")||settings.checkboxNameSuffix,settings.append=$("#"+element).data("append")||settings.append,settings.prepend=$("#"+element).data("prepend")||settings.prepend,settings.reverseMode=$("#"+element).data("reversemode")||settings.reverseMode,settings.roundedCorner=$("#"+element).data("roundedcorner")||settings.roundedCorner,settings.enableAutoFilter=$("#"+element).data("enableautofilter")||settings.enableAutoFilter,settings.reverseMode=settings.reverseMode.toString(),settings.roundedCorner=settings.roundedCorner.toString(),settings.enableAutoFilter=settings.enableAutoFilter.toString()},getElement=function(e){return cacheElement[e]===undefined&&(cacheElement[e]=doc.getElementById(e)),cacheElement[e]},getIndex=function(e){var t=getPostID("postChildID");return $("#"+t+" li."+css_i.li).index(e)},createByJson=function(){if(settings.byJson.data){var validData=["description","image","title"];try{element.id||(element.id="dropdown"+msBeautify.counter),settings.byJson.data=eval(settings.byJson.data);var id="msdropdown"+msBeautify.counter++,obj={};obj.id=id,obj.name=settings.byJson.name||element.id,settings.byJson.size>0&&(obj.size=settings.byJson.size),obj.multiple=settings.byJson.multiple;var oSelect=createElement("select",obj);for(var i=0;i<settings.byJson.data.length;i++){var current=settings.byJson.data[i],opt=new Option(current.text,current.value);for(var p in current)if(p.toLowerCase()!="text"){var key=$.inArray(p.toLowerCase(),validData)!=-1?"data-":"";opt.setAttribute(key+p,current[p])}oSelect.options[i]=opt}getElement(element.id).appendChild(oSelect),oSelect.selectedIndex=settings.byJson.selectedIndex,$(oSelect).css({width:settings.byJson.width+"px"}),element=oSelect}catch(e){throw"There is an error in json data."}}},init=function(){createByJson(),element.id||(element.id="msdrpdd"+msBeautify.counter++),element=element.id,$this.element=element,checkDataSetting(),isDisabled=getElement(element).disabled;var e=settings.enableCheckbox;e.toString()==="true"&&(getElement(element).multiple=!0,settings.enableCheckbox=!0),isList=getElement(element).size>1||getElement(element).multiple==1?!0:!1,isList&&(isMultiple=getElement(element).multiple),mergeAllProp(),createLayout(),updateProp("uiData",getDataAndUI()),updateProp("selectedOptions",$("#"+element+" option:selected"));var t=getPostID("postChildID");oldSelected=$("#"+t+" li."+css.selected),settings.reverseMode==="true"&&$("#"+element).on("change",function(){setValue(this.selectedIndex)}),getElement(element).refresh=function(e){$("#"+element).msDropdown().data("dd").refresh()}},getPostID=function(e){return element+holderId[e]},getInternalStyle=function(e){var t=e.style===undefined?"":e.style.cssText;return t},parseOption=function(opt){var imagePath="",title="",description="",value=-1,text="",className="",imagecss="",index;if(opt!==undefined){var attrTitle=opt.title||"";if(attrTitle!=""){var reg=/^\{.*\}$/,isJson=reg.test(attrTitle);if(isJson&&settings.jsonTitle)var obj=eval("["+attrTitle+"]");title=isJson&&settings.jsonTitle?obj[0].title:title,description=isJson&&settings.jsonTitle?obj[0].description:description,imagePath=isJson&&settings.jsonTitle?obj[0].image:attrTitle,imagecss=isJson&&settings.jsonTitle?obj[0].imagecss:imagecss,index=opt.index}text=opt.text||"",value=opt.value||"",className=opt.className||"",title=$(opt).prop("data-title")||$(opt).data("title")||title||"",description=$(opt).prop("data-description")||$(opt).data("description")||description||"",imagePath=$(opt).prop("data-image")||$(opt).data("image")||imagePath||"",imagecss=$(opt).prop("data-imagecss")||$(opt).data("imagecss")||imagecss||"",index=$(opt).index()}var o={image:imagePath,title:title,description:description,value:value,text:text,className:className,imagecss:imagecss,index:index};return o},createElement=function(e,t,n){var r=doc.createElement(e);if(t)for(var i in t)switch(i){case"style":r.style.cssText=t[i];break;default:r[i]=t[i]}return n&&(r.innerHTML=n),r},hideOriginal=function(){var e=getPostID("postElementHolder");if($("#"+e).length==0){var t={style:"height: 0px;overflow: hidden;position: absolute;",className:css.ddOutOfVision};t.id=e;var n=createElement("div",t);$("#"+element).after(n),$("#"+element).appendTo($("#"+e))}else $("#"+e).css({height:0,overflow:"hidden",position:"absolute"});getElement(element).tabIndex=-1},createWrapper=function(){var e=settings.roundedCorner=="true"?" borderRadius":"",t={className:css.dd+" ddcommon"+e},n=getInternalStyle(getElement(element)),r=$("#"+element).outerWidth();t.style="width: "+r+"px;",n.length>0&&(t.style=t.style+""+n),t.id=getPostID("postID"),t.tabIndex=getElement(element).tabIndex;var i=createElement("div",t);return i},createTitle=function(){var e;getElement(element).selectedIndex>=0?e=getElement(element).options[getElement(element).selectedIndex]:e={value:"",text:""};var t="",n="",r=$("#"+element).data("usesprite");r&&(settings.useSprite=r),settings.useSprite!=0&&(t=" "+settings.useSprite,n=" "+e.className);var i=settings.roundedCorner=="true"?" "+css_i.borderRadiusTp:"",s=createElement("div",{className:css.ddTitle+t+i}),o=createElement("span",{className:css.divider}),u=createElement("span",{className:css.arrow}),a=getPostID("postTitleID"),f=createElement("span",{className:css.ddTitleText+n,id:a}),l=parseOption(e),c=l.image,h=l.text||"";if(c!=""&&settings.showIcon){var p=createElement("img");p.src=c,l.imagecss!=""&&(p.className=l.imagecss+" ")}var d=createElement("span",{className:css.label},h);s.appendChild(o),s.appendChild(u),p&&f.appendChild(p),f.appendChild(d),s.appendChild(f);var v=createElement("span",{className:css.description},l.description);return f.appendChild(v),s},createFilterBox=function(){var e=getPostID("postTitleTextID"),t=settings.roundedCorner=="true"?"borderRadius":"",n=createElement("input",{id:e,type:"text",value:"",autocomplete:"off",className:"text shadow "+t,style:"display: none"});return n},createChild=function(e){var t={},n=getInternalStyle(e);n.length>0&&(t.style=n);var r=e.disabled?css.disabled:css.enabled;r=e.selected?r+" "+css.selected:r,r=r+" "+css_i.li,t.className=r,settings.useSprite!=0&&(t.className=r+" "+e.className);var i=createElement("li",t),s=parseOption(e);s.title!=""&&(i.title=s.title);var o=s.image;if(o!=""&&settings.showIcon){var u=createElement("img");u.src=o,s.imagecss!=""&&(u.className=s.imagecss+" ")}if(s.description!="")var a=createElement("span",{className:css.description},s.description);var f=e.text||"",l=createElement("span",{className:css.label},f);if(settings.enableCheckbox===!0){var c=createElement("input",{type:"checkbox",name:element+settings.checkboxNameSuffix+"[]",value:e.value||"",className:"checkbox"});i.appendChild(c),settings.enableCheckbox===!0&&(c.checked=e.selected?!0:!1)}u&&i.appendChild(u),i.appendChild(l),a?i.appendChild(a):u&&(u.className=u.className+css_i.fnone);var h=createElement("div",{className:"clear"});return i.appendChild(h),i},createChildren=function(){var e=getPostID("postChildID"),t={className:css.ddChild+" ddchild_ "+css_i.ddChildMore,id:e};isList==0?t.style="z-index: "+settings.zIndex:t.style="z-index:1";var n=$("#"+element).data("childwidth")||settings.childWidth;n&&(t.style=(t.style||"")+";width:"+n);var r=createElement("div",t),i=createElement("ul");settings.useSprite!=0&&(i.className=settings.useSprite);var s=getElement(element).children;for(var o=0;o<s.length;o++){var u=s[o],a;if(u.nodeName.toLowerCase()=="optgroup"){a=createElement("li",{className:css.optgroup});var f=createElement("span",{className:css.optgroupTitle},u.label);a.appendChild(f);var l=u.children,c=createElement("ul");for(var h=0;h<l.length;h++){var p=createChild(l[h]);c.appendChild(p)}a.appendChild(c)}else a=createChild(u);i.appendChild(a)}return r.appendChild(i),r},childHeight=function(e){var t=getPostID("postChildID");if(e)return e==-1?$("#"+t).css({height:"auto",overflow:"auto"}):$("#"+t).css("height",e+"px"),!1;var n,r=getElement(element).options.length;if(r>settings.visibleRows||settings.visibleRows){var i=$("#"+t+" li:first"),s=parseInt(i.css("padding-bottom"))+parseInt(i.css("padding-top"));if(settings.rowHeight===0){$("#"+t).css({visibility:"hidden",display:"block"});var o=8;$("#"+t+" li").each(function(e){if(e>=settings.visibleRows)return!1;o+=jQuery(this).height()+s}),n=o,$("#"+t).css({visibility:"visible"}),(!isList||settings.enableCheckbox===!0)&&$("#"+t).css({display:"none"})}else n=(settings.rowHeight+s)*Math.min(settings.visibleRows,r)+3}else isList&&(n=$("#"+element).height());return n},applyChildEvents=function(){var e=getPostID("postChildID");$("#"+e).on("click",function(e){if(isDisabled===!0)return!1;e.preventDefault(),e.stopPropagation(),isList&&bind_on_events()}),$("#"+e+" li."+css.enabled).on("click",function(e){e.target.nodeName.toLowerCase()!=="input"&&close(this)}),$("#"+e+" li."+css.enabled).on("mousedown",function(t){if(isDisabled===!0)return!1;oldSelected=$("#"+e+" li."+css.selected),lastTarget=this,t.preventDefault(),t.stopPropagation(),settings.enableCheckbox===!0&&t.target.nodeName.toLowerCase()==="input"&&(controlHolded=!0);if(isList===!0)if(isMultiple)if(shiftHolded===!0){$(this).addClass(css.selected);var n=$("#"+e+" li."+css.selected),r=getIndex(this);if(n.length>1){var i=$("#"+e+" li."+css_i.li),s=getIndex(n[0]),o=getIndex
(n[1]);r>o&&(s=r,o+=1);for(var u=Math.min(s,o);u<=Math.max(s,o);u++){var a=i[u];$(a).hasClass(css.enabled)&&$(a).addClass(css.selected)}}}else if(controlHolded===!0){$(this).toggleClass(css.selected);if(settings.enableCheckbox===!0){var f=this.childNodes[0];f.checked=!f.checked}}else $("#"+e+" li."+css.selected).removeClass(css.selected),$("#"+e+" input:checkbox").prop("checked",!1),$(this).addClass(css.selected),settings.enableCheckbox===!0&&(this.childNodes[0].checked=!0);else $("#"+e+" li."+css.selected).removeClass(css.selected),$(this).addClass(css.selected);else $("#"+e+" li."+css.selected).removeClass(css.selected),$(this).addClass(css.selected)}),$("#"+e+" li."+css.enabled).on("mouseenter",function(e){if(isDisabled===!0)return!1;e.preventDefault(),e.stopPropagation(),lastTarget!=null&&isMultiple&&($(this).addClass(css.selected),settings.enableCheckbox===!0&&(this.childNodes[0].checked=!0))}),$("#"+e+" li."+css.enabled).on("mouseover",function(e){if(isDisabled===!0)return!1;$(this).addClass(css.hover)}),$("#"+e+" li."+css.enabled).on("mouseout",function(t){if(isDisabled===!0)return!1;$("#"+e+" li."+css.hover).removeClass(css.hover)}),$("#"+e+" li."+css.enabled).on("mouseup",function(t){if(isDisabled===!0)return!1;t.preventDefault(),t.stopPropagation(),settings.enableCheckbox===!0&&(controlHolded=!1);var n=$("#"+e+" li."+css.selected).length;forcedTrigger=oldSelected.length!=n||n==0?!0:!1,fireAfterItemClicked(),unbind_on_events(),bind_on_events(),lastTarget=null}),settings.disabledOptionEvents==0&&($("#"+e+" li."+css_i.li).on("click",function(e){if(isDisabled===!0)return!1;fireOptionEventIfExist(this,"click")}),$("#"+e+" li."+css_i.li).on("mouseenter",function(e){if(isDisabled===!0)return!1;fireOptionEventIfExist(this,"mouseenter")}),$("#"+e+" li."+css_i.li).on("mouseover",function(e){if(isDisabled===!0)return!1;fireOptionEventIfExist(this,"mouseover")}),$("#"+e+" li."+css_i.li).on("mouseout",function(e){if(isDisabled===!0)return!1;fireOptionEventIfExist(this,"mouseout")}),$("#"+e+" li."+css_i.li).on("mousedown",function(e){if(isDisabled===!0)return!1;fireOptionEventIfExist(this,"mousedown")}),$("#"+e+" li."+css_i.li).on("mouseup",function(e){if(isDisabled===!0)return!1;fireOptionEventIfExist(this,"mouseup")}))},removeChildEvents=function(){var e=getPostID("postChildID");$("#"+e).off("click"),$("#"+e+" li."+css.enabled).off("mouseenter"),$("#"+e+" li."+css.enabled).off("click"),$("#"+e+" li."+css.enabled).off("mouseover"),$("#"+e+" li."+css.enabled).off("mouseout"),$("#"+e+" li."+css.enabled).off("mousedown"),$("#"+e+" li."+css.enabled).off("mouseup")},triggerBypassingHandler=function(e,t,n){$("#"+e).off(t,n),$("#"+e).trigger(t),$("#"+e).on(t,n)},applyEvents=function(){var e=getPostID("postID"),t=getPostID("postTitleTextID"),n=getPostID("postChildID");$("#"+e).on(settings.event,function(e){if(isDisabled===!0)return!1;fireEventIfExist(settings.event),e.preventDefault(),e.stopPropagation(),open(e)}),$("#"+e).on("keydown",function(e){var t=e.which;!isOpen&&(t==ENTER||t==UP_ARROW||t==DOWN_ARROW||t==LEFT_ARROW||t==RIGHT_ARROW||t>=ALPHABETS_START&&!isList)&&(open(e),t>=ALPHABETS_START?showFilterBox():(e.preventDefault(),e.stopImmediatePropagation()))}),$("#"+e).on("focus",wrapperFocusHandler),$("#"+e).on("blur",wrapperBlurHandler),$("#"+t).on("blur",function(t){triggerBypassingHandler(e,"focus",wrapperFocusHandler)}),applyChildEvents(),$("#"+e).on("dblclick",on_dblclick),$("#"+e).on("mousemove",on_mousemove),$("#"+e).on("mouseenter",on_mouseover),$("#"+e).on("mouseleave",on_mouseout),$("#"+e).on("mousedown",on_mousedown),$("#"+e).on("mouseup",on_mouseup)},wrapperFocusHandler=function(e){fireEventIfExist("focus")},wrapperBlurHandler=function(e){fireEventIfExist("blur")},fixedForList=function(){var e=getPostID("postID"),t=getPostID("postChildID");if(isList===!0&&settings.enableCheckbox===!1)$("#"+e+" ."+css.ddTitle).hide(),$("#"+t).css({display:"block",position:"relative"});else{settings.enableCheckbox===!1&&(isMultiple=!1),$("#"+e+" ."+css.ddTitle).show(),$("#"+t).css({display:"none",position:"absolute"});var n=$("#"+t+" li."+css.selected)[0];$("#"+t+" li."+css.selected).removeClass(css.selected);var r=getIndex($(n).addClass(css.selected));setValue(r)}childHeight(childHeight())},fixedForDisabled=function(){var e=getPostID("postID"),t=isDisabled==1?settings.disabledOpacity:1;isDisabled===!0?$("#"+e).addClass(css.disabledAll):$("#"+e).removeClass(css.disabledAll)},fixedSomeUI=function(){var e=getPostID("postTitleTextID");settings.enableAutoFilter=="true"&&$("#"+e).on("keyup",applyFilters),fixedForList(),fixedForDisabled()},createLayout=function(){var e=createWrapper(),t=createTitle();e.appendChild(t);var n=createFilterBox();e.appendChild(n);var r=createChildren();e.appendChild(r),$("#"+element).after(e),hideOriginal(),fixedSomeUI(),applyEvents();var i=getPostID("postChildID");settings.append!=""&&$("#"+i).append(settings.append),settings.prepend!=""&&$("#"+i).prepend(settings.prepend),typeof settings.on.create=="function"&&settings.on.create.apply($this,arguments)},selectUI_LI=function(e){function r(e){$($("#"+t+" li."+css_i.li)[e]).addClass(css.selected),settings.enableCheckbox===!0&&$($("#"+t+" li."+css_i.li)[e]).find("input.checkbox").prop("checked","checked")}var t=getPostID("postChildID");$("#"+t+" li."+css_i.li).removeClass(css.selected),settings.enableCheckbox===!0&&$("#"+t+" li."+css_i.li+" input.checkbox").prop("checked",!1);if(isArray(e)===!0)for(var n=0;n<e.length;n++)r(e[n]);else r(e)},selectMutipleOptions=function(e,t){var n=getPostID("postChildID"),r=e||$("#"+n+" li."+css.selected);for(var i=0;i<r.length;i++){var s=t===!0?r[i]:getIndex(r[i]);getElement(element).options[s].selected="selected"}setValue(r)},fireAfterItemClicked=function(){var e=getPostID("postChildID"),t=$("#"+e+" li."+css.selected);if(isMultiple&&(shiftHolded||controlHolded)||forcedTrigger)getElement(element).selectedIndex=-1;var n;t.length==0?n=-1:t.length>1?selectMutipleOptions(t):n=getIndex($("#"+e+" li."+css.selected));if((getElement(element).selectedIndex!=n||forcedTrigger)&&t.length<=1){forcedTrigger=!1;var r=has_handler("change");getElement(element).selectedIndex=n,setValue(n);if(typeof settings.on.change=="function"){var i=getDataAndUI();settings.on.change(i.data,i.ui)}$("#"+element).trigger("change")}},setValue=function(e,t){if(e!==undefined){var n,r,i;if(e==-1)n=-1,r="",i="",updateTitleUI(-1);else if(typeof e!="object"){var s=getElement(element).options[e];getElement(element).selectedIndex=e,n=e,r=parseOption(s),i=e>=0?getElement(element).options[e].text:"",updateTitleUI(undefined,r),r=r.value}else n=t&&t.index||getElement(element).selectedIndex,r=t&&t.value||getElement(element).value,i=t&&t.text||getElement(element).options[getElement(element).selectedIndex].text||"",updateTitleUI(n);updateProp("selectedIndex",n),updateProp("value",r),updateProp("selectedText",i),updateProp("children",getElement(element).children),updateProp("uiData",getDataAndUI()),updateProp("selectedOptions",$("#"+element+" option:selected"))}},has_handler=function(e){var t={byElement:!1,byJQuery:!1,hasEvent:!1},n=$("#"+element);try{n.prop("on"+e)!==null&&(t.hasEvent=!0,t.byElement=!0)}catch(r){}var i;return typeof $._data=="function"?i=$._data(n[0],"events"):i=n.data("events"),i&&i[e]&&(t.hasEvent=!0,t.byJQuery=!0),t},bind_on_events=function(){unbind_on_events(),$("body").on("click",close),$(document).on("keydown",on_keydown),$(document).on("keyup",on_keyup)},unbind_on_events=function(){$("body").off("click",close),$(document).off("keydown",on_keydown),$(document).off("keyup",on_keyup)},applyFilters=function(e){if(e.keyCode<ALPHABETS_START&&e.keyCode!=BACKSPACE&&e.keyCode!=DELETE)return!1;var t=getPostID("postChildID"),n=getPostID("postTitleTextID"),r=getElement(n).value;if(r.length==0)$("#"+t+" li:hidden").show(),childHeight(childHeight());else{$("#"+t+" li").hide();var i=$("#"+t+" li:Contains('"+r+"')").show();$("#"+t+" li:visible").length<=settings.visibleRows&&childHeight(-1);if(i.length>0&&!isList||!isMultiple)$("#"+t+" ."+css.selected).removeClass(css.selected),$(i[0]).addClass(css.selected)}isList||adjustOpen()},showFilterBox=function(){if(settings.enableAutoFilter=="true"){var e=getPostID("postID"),t=getPostID("postTitleTextID");$("#"+t+":hidden").length>0&&controlHolded==0&&($("#"+t+":hidden").show().val(""),triggerBypassingHandler(e,"blur",wrapperBlurHandler),getElement(t).focus())}},hideFilterBox=function(){var e=getPostID("postTitleTextID");$("#"+e+":visible").length>0&&($("#"+e+":visible").hide(),getElement(e).blur())},on_keydown=function(e){var t=getPostID("postTitleTextID"),n=getPostID("postChildID");switch(e.keyCode){case DOWN_ARROW:case RIGHT_ARROW:e.preventDefault(),e.stopPropagation(),next();break;case UP_ARROW:case LEFT_ARROW:e.preventDefault(),e.stopPropagation(),previous();break;case ESCAPE:case ENTER:e.preventDefault(),e.stopPropagation(),close();var r=$("#"+n+" li."+css.selected).length;forcedTrigger=oldSelected.length!=r||r==0?!0:!1,fireAfterItemClicked(),unbind_on_events(),lastTarget=null;break;case SHIFT:shiftHolded=!0;break;case CONTROL:controlHolded=!0;break;default:e.keyCode>=ALPHABETS_START&&isList===!1&&showFilterBox()}if(isDisabled===!0)return!1;fireEventIfExist("keydown")},on_keyup=function(e){switch(e.keyCode){case SHIFT:shiftHolded=!1;break;case CONTROL:controlHolded=!1}if(isDisabled===!0)return!1;fireEventIfExist("keyup")},on_dblclick=function(e){if(isDisabled===!0)return!1;fireEventIfExist("dblclick")},on_mousemove=function(e){if(isDisabled===!0)return!1;fireEventIfExist("mousemove")},on_mouseover=function(e){if(isDisabled===!0)return!1;e.preventDefault(),fireEventIfExist("mouseover")},on_mouseout=function(e){if(isDisabled===!0)return!1;e.preventDefault(),fireEventIfExist("mouseout")},on_mousedown=function(e){if(isDisabled===!0)return!1;fireEventIfExist("mousedown")},on_mouseup=function(e){if(isDisabled===!0)return!1;fireEventIfExist("mouseup")},option_has_handler=function(e,t){var n={byElement:!1,byJQuery:!1,hasEvent:!1};$(e).prop("on"+t)!=undefined&&(n.hasEvent=!0,n.byElement=!0);var r=$(e).data("events");return r&&r[t]&&(n.hasEvent=!0,n.byJQuery=!0),n},fireOptionEventIfExist=function(e,t){if(settings.disabledOptionEvents==0){var n=getElement(element).options[getIndex(e)];if(option_has_handler(n,t).hasEvent===!0){option_has_handler(n,t).byElement===!0&&n["on"+t]();if(option_has_handler(n,t).byJQuery===!0)switch(t){case"keydown":case"keyup":break;default:$(n).trigger(t)}return!1}}},fireEventIfExist=function(e){typeof settings.on[e]=="function"&&settings.on[e].apply(this,arguments);if(has_handler(e).hasEvent===!0){if(has_handler(e).byElement===!0)getElement(element)["on"+e]();else if(has_handler(e).byJQuery===!0)switch(e){case"keydown":case"keyup":break;default:$("#"+element).triggerHandler(e)}return!1}},scrollToIfNeeded=function(e){var t=getPostID("postChildID");e=e!==undefined?e:$("#"+t+" li."+css.selected);if(e.length>0){var n=parseInt($(e).position().top),r=parseInt($("#"+t).height());if(n>r){var i=n+$("#"+t).scrollTop()-r/2;$("#"+t).animate({scrollTop:i},500)}}},next=function(){function i(e){return e+=1,e>t.length?e:$(t[e]).hasClass(css.enabled)===!0?e:e=i(e)}var e=getPostID("postChildID"),t=$("#"+e+" li:visible."+css_i.li),n=$("#"+e+" li:visible."+css.selected);n=n.length==0?t[0]:n;var r=$("#"+e+" li:visible."+css_i.li).index(n);r<t.length-1&&(r=i(r),r<t.length&&((!shiftHolded||!isList||!isMultiple)&&$("#"+e+" ."+css.selected).removeClass(css.selected),$(t[r]).addClass(css.selected),updateTitleUI(r),isList==1&&fireAfterItemClicked(),scrollToIfNeeded($(t[r]))),isList||adjustOpen())},previous=function(){function s(e){return e-=1,e<0?e:$(n[e]).hasClass(css.enabled)===!0?e:e=s(e)}var e=getPostID("postChildID"),t=$("#"+e+" li:visible."+css.selected),n=$("#"+e+" li:visible."+css_i.li),r=$("#"+e+" li:visible."+css_i.li).index(t[0]);if(r>=0){r=s(r);if(r>=0){(!shiftHolded||!isList||!isMultiple)&&$("#"+e+" ."+css.selected).removeClass(css.selected),$(n[r]).addClass(css.selected),updateTitleUI(r),isList==1&&fireAfterItemClicked();if(parseInt($(n[r]).position().top+$(n[r]).height())<=0){var i=$("#"+e).scrollTop()-$("#"+e).height()-$(n[r]).height();$("#"+e).animate({scrollTop:i},500)}}isList||adjustOpen()}},adjustOpen=function(){var e=getPostID("postID"),t=getPostID("postChildID"),n=$("#"+e).offset(),r=$("#"+e).height(),i=$(window).height(),s=$(window).scrollTop(),o=$("#"+t).height(),u=$("#"+e).height(),a=settings.openDirection.toLowerCase();if((i+s<Math.floor(o+r+n.top)||a=="alwaysup")&&a!="alwaysdown"){u=o,$("#"+t).css({top:"-"+u+"px",display:"block",zIndex:settings.zIndex}),settings.roundedCorner=="true"&&$("#"+e).removeClass("borderRadius borderRadiusTp").addClass("borderRadiusBtm");var u=$("#"+t).offset().top;u<-10&&($("#"+t).css({top:parseInt($("#"+t).css("top"))-u+20+s+"px",zIndex:settings.zIndex}),settings.roundedCorner=="true"&&$("#"+e).removeClass("borderRadiusBtm borderRadiusTp").addClass("borderRadius"))}else $("#"+t).css({top:u+"px",zIndex:settings.zIndex}),settings.roundedCorner=="true"&&$("#"+e).removeClass("borderRadius borderRadiusBtm").addClass("borderRadiusTp");isIE&&msieversion()<=7&&($("div.ddcommon").css("zIndex",settings.zIndex-10),$("#"+e).css("zIndex",settings.zIndex+5))},open=function(e){if(isDisabled===!0)return!1;var t=getPostID("postID"),n=getPostID("postChildID");if(!isOpen){isOpen=!0,msBeautify.oldDiv!=""&&$("#"+msBeautify.oldDiv).css({display:"none"}),msBeautify.oldDiv=n,$("#"+n+" li:hidden").show(),adjustOpen();var r=settings.animStyle;if(r==""||r=="none"){$("#"+n).css({display:"block"}),scrollToIfNeeded();if(typeof settings.on.open=="function"){var i=getDataAndUI();settings.on.open(i.data,i.ui)}}else $("#"+n)[r]("fast",function(){scrollToIfNeeded();if(typeof settings.on.open=="function"){var e=getDataAndUI();settings.on.open(e.data,e.ui)}});bind_on_events()}else settings.event!=="mouseover"&&close()},close=function(e){isOpen=!1;var t=getPostID("postID"),n=getPostID("postChildID");if(isList===!1||settings.enableCheckbox===!0)$("#"+n).css({display:"none"}),settings.roundedCorner=="true"&&$("#"+t).removeClass("borderRadiusTp borderRadiusBtm").addClass("borderRadius");unbind_on_events();if(typeof settings.on.close=="function"){var r=getDataAndUI();settings.on.close(r.data,r.ui)}hideFilterBox(),childHeight(childHeight()),$("#"+n).css({zIndex:1}),updateTitleUI(getElement(element).selectedIndex)},mergeAllProp=function(){try{orginial=$.extend(!0,{},getElement(element));for(var e in orginial)typeof orginial[e]!="function"&&($this[e]=orginial[e])}catch(t){}$this.selectedText=getElement(element).selectedIndex>=0?getElement(element).options[getElement(element).selectedIndex].text:"",$this.version=msBeautify.version.msDropdown,$this.author=msBeautify.author},getDataAndUIByOption=function(e){if(e!=null&&typeof e!="undefined"){var t=getPostID("postChildID"),n=parseOption(e),r=$("#"+t+" li."+css_i.li+":eq("+e.index+")");return{data:n,ui:r,option:e,index:e.index}}return null},getDataAndUI=function(){var e=getPostID("postChildID"),t=getElement(element),n,r,i,s;if(t.selectedIndex==-1)n=null,r=null,i=null,s=-1;else{r=$("#"+e+" li."+css.selected);if(r.length>1){var o=[],u=[],a=[];for(var f=0;f<r.length;f++){var l=getIndex(r[f]);o.push(l),u.push(t.options[l])}n=o,i=u,s=o}else i=t.options[t.selectedIndex],n=parseOption(i),s=t.selectedIndex}return{data:n,ui:r,index:s,option:i}},updateTitleUI=function(e,t){var n=getPostID("postTitleID"),r={};if(e==-1)r.text="&nbsp;",r.className="",r.description="",r.image="";else if(typeof e!="undefined"){var i=getElement(element).options[e];r=parseOption(i)}else r=t;$("#"+n).find("."+css.label).html(r.text),getElement(n).className=css.ddTitleText+" "+r.className,r.description!=""?$("#"+n).find("."+css.description).html(r.description).show():$("#"+n).find("."+css.description).html("").hide();var s=$("#"+n).find("img");s.length>0&&$(s).remove(),r.image!=""&&settings.showIcon&&(s=createElement("img",{src:r.image}),$("#"+n).prepend(s),r.imagecss!=""&&(s.className=r.imagecss+" "),r.description==""&&(s.className=s.className+css_i.fnone))},updateProp=function(e,t){$this[e]=t},updateUI=function(e,t,n){var r=getPostID("postChildID"),i=!1;switch(e){case"add":var s=createChild(t||getElement(element).options[n]),o;arguments.length==3?o=n:o=$("#"+r+" li."+css_i.li).length-1;if(o<0||!o)$("#"+r+" ul").append(s);else{var u=$("#"+r+" li."+css_i.li)[o];$(u).before(s)}removeChildEvents(),applyChildEvents(),settings.on.add!=null&&settings.on.add.apply(this,arguments);break;case"remove":i=$($("#"+r+" li."+css_i.li)[n]).hasClass(css.selected),$("#"+r+" li."+css_i.li+":eq("+n+")").remove();var a=$("#"+r+" li."+css.enabled);if(i==1&&a.length>0){$(a[0]).addClass(css.selected);var f=$("#"+r+" li."+css_i.li).index(a[0]);setValue(f)}a.length==0&&setValue(-1),$("#"+r+" li."+css_i.li).length<settings.visibleRows&&!isList&&childHeight(-1),settings.on.remove!=null&&settings.on.remove.apply(this,arguments)}};this.act=function(){var e=arguments[0];Array.prototype.shift.call(arguments);switch(e){case"add":$this.add.apply(this,arguments);break;case"remove":$this.remove.apply(this,arguments);break;default:try{getElement(element)[e].apply(getElement(element),arguments)}catch(t){}}},this.add=function(){var e,t,n,r,i,s=arguments[0];typeof s=="string"?(e=s,t=e,opt=new Option(e,t)):(e=s.text||"",t=s.value||e,n=s.title||"",r=s.image||"",i=s.description||"",opt=new Option(e,t),$(opt).data("description",i),$(opt).data("image",r),$(opt).data("title",n)),arguments[0]=opt,getElement(element).add.apply(getElement(element),arguments),updateProp("children",getElement(element).children),updateProp("length",getElement(element).length),updateUI("add",opt,arguments[1])},this.remove=function(e){getElement(element).remove(e),updateProp("children",getElement(element).children),updateProp("length",getElement(element).length),updateUI("remove",undefined,e)},this.set=function(e,t){if(typeof e=="undefined"||typeof t=="undefined")return!1;e=e.toString();try{updateProp(e,t)}catch(n){}switch(e){case"size":getElement(element)[e]=t,t==0&&(getElement(element).multiple=!1),isList=getElement(element).size>1||getElement(element).multiple==1?!0:!1,fixedForList();break;case"multiple":getElement(element)[e]=t,isList=getElement(element).size>1||getElement(element).multiple==1?!0:!1,isMultiple=getElement(element).multiple,fixedForList(),updateProp(e,t);break;case"disabled":getElement(element)[e]=t,isDisabled=t,fixedForDisabled();break;case"selectedIndex":case"value":e=="selectedIndex"&&isArray(t)===!0?($("#"+element+" option").prop("selected",!1),selectMutipleOptions(t,!0),selectUI_LI(t)):(getElement(element)[e]=t,selectUI_LI(getElement(element).selectedIndex),setValue(getElement(element).selectedIndex));break;case"length":var r=getPostID("postChildID");t<getElement(element).length&&(getElement(element)[e]=t,t==0?($("#"+r+" li."+css_i.li).remove(),setValue(-1)):($("#"+r+" li."+css_i.li+":gt("+(t-1)+")").remove(),$("#"+r+" li."+css.selected).length==0&&$("#"+r+" li."+css.enabled+":eq(0)").addClass(css.selected)),updateProp(e,t),updateProp("children",getElement(element).children));break;case"id":break;default:try{getElement(element)[e]=t,updateProp(e,t)}catch(n){}}},this.get=function(e){return $this[e]||getElement(element)[e]},this.visible=function(e){var t=getPostID("postID");if(e===!0)$("#"+t).show();else{if(e!==!1)return $("#"+t).css("display")=="none"?!1:!0;$("#"+t).hide()}},this.debug=function(e){msBeautify.debug(e)},this.close=function(){close()},this.open=function(){open()},this.showRows=function(e){if(typeof e=="undefined"||e==0)return!1;settings.visibleRows=e,childHeight(childHeight())},this.visibleRows=this.showRows,this.on=function(e,t){$("#"+element).on(e,t)},this.off=function(e,t){$("#"+element).off(e,t)},this.addMyEvent=this.on,this.getData=function(){return getDataAndUI()},this.namedItem=function(){var e=getElement(element).namedItem.apply(getElement(element),arguments);return getDataAndUIByOption(e)},this.item=function(){var e=getElement(element).item.apply(getElement(element),arguments);return getDataAndUIByOption(e)},this.setIndexByValue=function(e){this.set("value",e)},this.destroy=function(){var e=getPostID("postElementHolder"),t=getPostID("postID");$("#"+t+", #"+t+" *").off(),getElement(element).tabIndex=getElement(t).tabIndex,$("#"+t).remove(),$("#"+element).parent().replaceWith($("#"+element)),$("#"+element).data("dd",null)},this.refresh=function(){setValue(getElement(element).selectedIndex)},init()}msBeautify={version:{msDropdown:"3.5.2"},author:"Marghoob Suleman",counter:20,debug:function(e){e!==!1?$(".ddOutOfVision").css({height:"auto",position:"relative"}):$(".ddOutOfVision").css({height:"0px",position:"absolute"})},oldDiv:"",create:function(e,t,n){n=n||"dropdown";var r;switch(n.toLowerCase()){case"dropdown":case"select":r=$(e).msDropdown(t).data("dd")}return r}},$.msDropDown={},$.msDropdown={},$.extend(!0,$.msDropDown,msBeautify),$.extend(!0,$.msDropdown,msBeautify),$.fn.prop===undefined&&($.fn.prop=$.fn.attr),$.fn.on===undefined&&($.fn.on=$.fn.bind,$.fn.off=$.fn.unbind),typeof $.expr.createPseudo=="function"?$.expr[":"].Contains=$.expr.createPseudo(function(e){return function(t){return $(t).text().toUpperCase().indexOf(e.toUpperCase())>=0}}):$.expr[":"].Contains=function(e,t,n){return $(e).text().toUpperCase().indexOf(n[3].toUpperCase())>=0},$.fn.extend({msDropDown:function(e){return this.each(function(){if(!$(this).data("dd")){var t=new dd(this,e);$(this).data("dd",t)}})}}),$.fn.msDropdown=$.fn.msDropDown})(jQuery),function(e){typeof define=="function"&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){function n(e){return e}function r(e){return decodeURIComponent(e.replace(t," "))}function i(e){e.indexOf('"')===0&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return s.json?JSON.parse(e):e}catch(t){}}var t=/\+/g,s=e.cookie=function(t,o,u){if(o!==undefined){u=e.extend({},s.defaults,u);if(typeof u.expires=="number"){var a=u.expires,f=u.expires=new Date;f.setDate(f.getDate()+a)}return o=s.json?JSON.stringify(o):String(o),document.cookie=[s.raw?t:encodeURIComponent(t),"=",s.raw?o:encodeURIComponent(o),u.expires?"; expires="+u.expires.toUTCString():"",u.path?"; path="+u.path:"",u.domain?"; domain="+u.domain:"",u.secure?"; secure":""].join("")}var l=s.raw?n:r,c=document.cookie.split("; "),h=t?undefined:{};for(var p=0,d=c.length;p<d;p++){var v=c[p].split("="),m=l(v.shift()),g=l(v.join("="));if(t&&t===m){h=i(g);break}t||(h[m]=i(g))}return h};s.defaults={},e.removeCookie=function(t,n){return e.cookie(t)!==undefined?(e.cookie(t,"",e.extend({},n,{expires:-1})),!0):!1}}),function($){$.extend({tablesorter:new function(){function benchmark(e,t){log(e+","+((new Date).getTime()-t.getTime())+"ms")}function log(e){typeof console!="undefined"&&typeof console.debug!="undefined"?console.log(e):alert(e)}function buildParserCache(e,t){if(e.config.debug)var n="";if(e.tBodies.length==0)return;var r=e.tBodies[0].rows;if(r[0]){var i=[],s=r[0].cells,o=s.length;for(var u=0;u<o;u++){var a=!1;$.metadata&&$(t[u]).metadata()&&$(t[u]).metadata().sorter?a=getParserById($(t[u]).metadata().sorter):e.config.headers[u]&&e.config.headers[u].sorter&&(a=getParserById(e.config.headers[u].sorter)),a||(a=detectParserForColumn(e,r,-1,u)),e.config.debug&&(n+="column:"+u+" parser:"+a.id+"\n"),i.push(a)}}return e.config.debug&&log(n),i}function detectParserForColumn(e,t,n,r){var i=parsers.length,s=!1,o=!1,u=!0;while(o==""&&u)n++,t[n]?(s=getNodeFromRowAndCellIndex(t,n,r),o=trimAndGetNodeText(e.config,s),e.config.debug&&log("Checking if value was empty on row:"+n)):u=!1;for(var a=1;a<i;a++)if(parsers[a].is(o,e,s))return parsers[a];return parsers[0]}function getNodeFromRowAndCellIndex(e,t,n){return e[t].cells[n]}function trimAndGetNodeText(e,t){return $.trim(getElementText(e,t))}function getParserById(e){var t=parsers.length;for(var n=0;n<t;n++)if(parsers[n].id.toLowerCase()==e.toLowerCase())return parsers[n];return!1}function buildCache(e){if(e.config.debug)var t=new Date;var n=e.tBodies[0]&&e.tBodies[0].rows.length||0,r=e.tBodies[0].rows[0]&&e.tBodies[0].rows[0].cells.length||0,i=e.config.parsers,s={row:[],normalized:[]};for(var o=0;o<n;++o){var u=$(e.tBodies[0].rows[o]),a=[];if(u.hasClass(e.config.cssChildRow)){s.row[s.row.length-1]=s.row[s.row.length-1].add(u);continue}s.row.push(u);for(var f=0;f<r;++f)a.push(i[f].format(getElementText(e.config,u[0].cells[f]),e,u[0].cells[f]));a.push(s.normalized.length),s.normalized.push(a),a=null}return e.config.debug&&benchmark("Building cache for "+n+" rows:",t),s}function getElementText(e,t){var n="";return t?(e.supportsTextContent||(e.supportsTextContent=t.textContent||!1),e.textExtraction=="simple"?e.supportsTextContent?n=t.textContent:t.childNodes[0]&&t.childNodes[0].hasChildNodes()?n=t.childNodes[0].innerHTML:n=t.innerHTML:typeof e.textExtraction=="function"?n=e.textExtraction(t):n=$(t).text(),n):""}function appendToTable(e,t){if(e.config.debug)var n=new Date;var r=t,i=r.row,s=r.normalized,o=s.length,u=s[0].length-1,a=$(e.tBodies[0]),f=[];for(var l=0;l<o;l++){var c=s[l][u];f.push(i[c]);if(!e.config.appender){var h=i[c].length;for(var p=0;p<h;p++)a[0].appendChild(i[c][p])}}e.config.appender&&e.config.appender(e,f),f=null,e.config.debug&&benchmark("Rebuilt table:",n),applyWidget(e),setTimeout(function(){$(e).trigger("sortEnd")},0)}function buildHeaders(e){if(e.config.debug)var t=new Date;var n=$.metadata?!0:!1,r=computeTableHeaderCellIndexes(e);return $tableHeaders=$(e.config.selectorHeaders,e).each(function(t){this.column=r[this.parentNode.rowIndex+"-"+this.cellIndex],this.order=formatSortingOrder(e.config.sortInitialOrder),this.count=this.order;if(checkHeaderMetadata(this)||checkHeaderOptions(e,t))this.sortDisabled=!0;checkHeaderOptionsSortingLocked(e,t)&&(this.order=this.lockedOrder=checkHeaderOptionsSortingLocked(e,t));if(!this.sortDisabled){var n=$(this).addClass(e.config.cssHeader);e.config.onRenderHeader&&e.config.onRenderHeader.apply(n)}e.config.headerList[t]=this}),e.config.debug&&(benchmark("Built headers:",t),log($tableHeaders)),$tableHeaders}function computeTableHeaderCellIndexes(e){var t=[],n={},r=e.getElementsByTagName("THEAD")[0],i=r.getElementsByTagName("TR");for(var s=0;s<i.length;s++){var o=i[s].cells;for(var u=0;u<o.length;u++){var a=o[u],f=a.parentNode.rowIndex,l=f+"-"+a.cellIndex,c=a.rowSpan||1,h=a.colSpan||1,p;typeof t[f]=="undefined"&&(t[f]=[]);for(var d=0;d<t[f].length+1;d++)if(typeof t[f][d]=="undefined"){p=d;break}n[l]=p;for(var d=f;d<f+c;d++){typeof t[d]=="undefined"&&(t[d]=[]);var v=t[d];for(var m=p;m<p+h;m++)v[m]="x"}}}return n}function checkCellColSpan(e,t,n){var r=[],i=e.tHead.rows,s=i[n].cells;for(var o=0;o<s.length;o++){var u=s[o];u.colSpan>1?r=r.concat(checkCellColSpan(e,headerArr,n++)):(e.tHead.length==1||u.rowSpan>1||!i[n+1])&&r.push(u)}return r}function checkHeaderMetadata(e){return $.metadata&&$(e).metadata().sorter===!1?!0:!1}function checkHeaderOptions(e,t){return e.config.headers[t]&&e.config.headers[t].sorter===!1?!0:!1}function checkHeaderOptionsSortingLocked(e,t){return e.config.headers[t]&&e.config.headers[t].lockedOrder?e.config.headers[t].lockedOrder:!1}function applyWidget(e){var t=e.config.widgets,n=t.length;for(var r=0;r<n;r++)getWidgetById(t[r]).format(e)}function getWidgetById(e){var t=widgets.length;for(var n=0;n<t;n++)if(widgets[n].id.toLowerCase()==e.toLowerCase())return widgets[n]}function formatSortingOrder(e){return typeof e!="Number"?e.toLowerCase()=="desc"?1:0:e==1?1:0}function isValueInArray(e,t){var n=t.length;for(var r=0;r<n;r++)if(t[r][0]==e)return!0;return!1}function setHeadersCss(e,t,n,r){t.removeClass(r[0]).removeClass(r[1]);var i=[];t.each(function(e){this.sortDisabled||(i[this.column]=$(this))});var s=n.length;for(var o=0;o<s;o++)i[n[o][0]].addClass(r[n[o][1]])}function fixColumnWidth(e,t){var n=e.config;if(n.widthFixed){var r=$("<colgroup>");$("tr:first td",e.tBodies[0]).each(function(){r.append($("<col>").css("width",$(this).width()))}),$(e).prepend(r)}}function updateHeaderSortCount(e,t){var n=e.config,r=t.length;for(var i=0;i<r;i++){var s=t[i],o=n.headerList[s[0]];o.count=s[1],o.count++}}function multisort(table,sortList,cache){if(table.config.debug)var sortTime=new Date;var dynamicExp="var sortWrapper = function(a,b) {",l=sortList.length;for(var i=0;i<l;i++){var c=sortList[i][0],order=sortList[i][1],s=table.config.parsers[c].type=="text"?order==0?makeSortFunction("text","asc",c):makeSortFunction("text","desc",c):order==0?makeSortFunction("numeric","asc",c):makeSortFunction("numeric","desc",c),e="e"+i;dynamicExp+="var "+e+" = "+s,dynamicExp+="if("+e+") { return "+e+"; } ",dynamicExp+="else { "}var orgOrderCol=cache.normalized[0].length-1;dynamicExp+="return a["+orgOrderCol+"]-b["+orgOrderCol+"];";for(var i=0;i<l;i++)dynamicExp+="}; ";return dynamicExp+="return 0; ",dynamicExp+="}; ",table.config.debug&&benchmark("Evaling expression:"+dynamicExp,new Date),eval(dynamicExp),cache.normalized.sort(sortWrapper),table.config.debug&&benchmark("Sorting on "+sortList.toString()+" and dir "+order+" time:",sortTime),cache}function makeSortFunction(e,t,n){var r="a["+n+"]",i="b["+n+"]";if(e=="text"&&t=="asc")return"("+r+" == "+i+" ? 0 : ("+r+" === null ? Number.POSITIVE_INFINITY : ("+i+" === null ? Number.NEGATIVE_INFINITY : ("+r+" < "+i+") ? -1 : 1 )));";if(e=="text"&&t=="desc")return"("+r+" == "+i+" ? 0 : ("+r+" === null ? Number.POSITIVE_INFINITY : ("+i+" === null ? Number.NEGATIVE_INFINITY : ("+i+" < "+r+") ? -1 : 1 )));";if(e=="numeric"&&t=="asc")return"("+r+" === null && "+i+" === null) ? 0 :("+r+" === null ? Number.POSITIVE_INFINITY : ("+i+" === null ? Number.NEGATIVE_INFINITY : "+r+" - "+i+"));";if(e=="numeric"&&t=="desc")return"("+r+" === null && "+i+" === null) ? 0 :("+r+" === null ? Number.POSITIVE_INFINITY : ("+i+" === null ? Number.NEGATIVE_INFINITY : "+i+" - "+r+"));"}function makeSortText(e){return"((a["+e+"] < b["+e+"]) ? -1 : ((a["+e+"] > b["+e+"]) ? 1 : 0));"}function makeSortTextDesc(e){return"((b["+e+"] < a["+e+"]) ? -1 : ((b["+e+"] > a["+e+"]) ? 1 : 0));"}function makeSortNumeric(e){return"a["+e+"]-b["+e+"];"}function makeSortNumericDesc(e){return"b["+e+"]-a["+e+"];"}function sortText(e,t){return table.config.sortLocaleCompare?e.localeCompare(t):e<t?-1:e>t?1:0}function sortTextDesc(e,t){return table.config.sortLocaleCompare?t.localeCompare(e):t<e?-1:t>e?1:0}function sortNumeric(e,t){return e-t}function sortNumericDesc(e,t){return t-e}function getCachedSortType(e,t){return e[t].type}var parsers=[],widgets=[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",cssChildRow:"expand-child",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,sortLocaleCompare:!0,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:!1,cancelSelection:!0,sortList:[],headerList:[],dateFormat:"us",decimal:"/.|,/g",onRenderHeader:null,selectorHeaders:"thead th",debug:!1},this.benchmark=benchmark,this.construct=function(e){return this.each(function(){if(!this.tHead||!this.tBodies)return;var t,n,r,i,s,o=0,u;this.config={},s=$.extend(this.config,$.tablesorter.defaults,e),t=$(this),$.data(this,"tablesorter",s),r=buildHeaders(this),this.config.parsers=buildParserCache(this,r),i=buildCache(this);var a=[s.cssDesc,s.cssAsc];fixColumnWidth(this),r.click(function(e){var n=t[0].tBodies[0]&&t[0].tBodies[0].rows.length||0;if(!this.sortDisabled&&n>0){t.trigger("sortStart");var o=$(this),u=this.column;this.order=this.count++%2,this.lockedOrder&&(this.order=this.lockedOrder);if(!e[s.sortMultiSortKey]){s.sortList=[];if(s.sortForce!=null){var f=s.sortForce;for(var l=0;l<f.length;l++)f[l][0]!=u&&s.sortList.push(f[l])}s.sortList.push([u,this.order])}else if(isValueInArray(u,s.sortList))for(var l=0;l<s.sortList.length;l++){var c=s.sortList[l],h=s.headerList[c[0]];c[0]==u&&(h.count=c[1],h.count++,c[1]=h.count%2)}else s.sortList.push([u,this.order]);return setTimeout(function(){setHeadersCss(t[0],r,s.sortList,a),appendToTable(t[0],multisort(t[0],s.sortList,i))},1),!1}}).mousedown(function(){if(s.cancelSelection)return this.onselectstart=function(){return!1},!1}),t.bind("update",function(){var e=this;setTimeout(function(){e.config.parsers=buildParserCache(e,r),i=buildCache(e)},1)}).bind("updateCell",function(e,t){var n=this.config,r=[t.parentNode.rowIndex-1,t.cellIndex];i.normalized[r[0]][r[1]]=n.parsers[r[1]].format(getElementText(n,t),t)}).bind("sorton",function(e,t){$(this).trigger("sortStart"),s.sortList=t;var n=s.sortList;updateHeaderSortCount(this,n),setHeadersCss(this,r,n,a),appendToTable(this,multisort(this,n,i))}).bind("appendCache",function(){appendToTable(this,i)}).bind("applyWidgetId",function(e,t){getWidgetById(t).format(this)}).bind("applyWidgets",function(){applyWidget(this)}),$.metadata&&
    $(this).metadata()&&$(this).metadata().sortlist&&(s.sortList=$(this).metadata().sortlist),s.sortList.length>0&&t.trigger("sorton",[s.sortList]),applyWidget(this)})},this.addParser=function(e){var t=parsers.length,n=!0;for(var r=0;r<t;r++)parsers[r].id.toLowerCase()==e.id.toLowerCase()&&(n=!1);n&&parsers.push(e)},this.addWidget=function(e){widgets.push(e)},this.formatFloat=function(e){var t=parseFloat(e);return isNaN(t)?0:t},this.formatInt=function(e){var t=parseInt(e);return isNaN(t)?0:t},this.isDigit=function(e,t){return/^[-+]?\d*$/.test($.trim(e.replace(/[,.']/g,"")))},this.clearTableBody=function(e){if($.browser.msie){function t(){while(this.firstChild)this.removeChild(this.firstChild)}t.apply(e.tBodies[0])}else e.tBodies[0].innerHTML=""}}}),$.fn.extend({tablesorter:$.tablesorter.construct});var ts=$.tablesorter;ts.addParser({id:"text",is:function(e){return!0},format:function(e){return $.trim(e.toLocaleLowerCase())},type:"text"}),ts.addParser({id:"digit",is:function(e,t){var n=t.config;return $.tablesorter.isDigit(e,n)},format:function(e){return $.tablesorter.formatFloat(e)},type:"numeric"}),ts.addParser({id:"currency",is:function(e){return/^[ВЈ$в‚¬?.]/.test(e)},format:function(e){return $.tablesorter.formatFloat(e.replace(new RegExp(/[ВЈ$в‚¬]/g),""))},type:"numeric"}),ts.addParser({id:"ipAddress",is:function(e){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(e)},format:function(e){var t=e.split("."),n="",r=t.length;for(var i=0;i<r;i++){var s=t[i];s.length==2?n+="0"+s:n+=s}return $.tablesorter.formatFloat(n)},type:"numeric"}),ts.addParser({id:"url",is:function(e){return/^(https?|ftp|file):\/\/$/.test(e)},format:function(e){return jQuery.trim(e.replace(new RegExp(/(https?|ftp|file):\/\//),""))},type:"text"}),ts.addParser({id:"isoDate",is:function(e){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(e)},format:function(e){return $.tablesorter.formatFloat(e!=""?(new Date(e.replace(new RegExp(/-/g),"/"))).getTime():"0")},type:"numeric"}),ts.addParser({id:"percent",is:function(e){return/\%$/.test($.trim(e))},format:function(e){return $.tablesorter.formatFloat(e.replace(new RegExp(/%/g),""))},type:"numeric"}),ts.addParser({id:"usLongDate",is:function(e){return e.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/))},format:function(e){return $.tablesorter.formatFloat((new Date(e)).getTime())},type:"numeric"}),ts.addParser({id:"shortDate",is:function(e){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(e)},format:function(e,t){var n=t.config;e=e.replace(/\-/g,"/");if(n.dateFormat=="us")e=e.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2");else if(n.dateFormat=="uk")e=e.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1");else if(n.dateFormat=="dd/mm/yy"||n.dateFormat=="dd-mm-yy")e=e.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3");return $.tablesorter.formatFloat((new Date(e)).getTime())},type:"numeric"}),ts.addParser({id:"time",is:function(e){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(e)},format:function(e){return $.tablesorter.formatFloat((new Date("2000/01/01 "+e)).getTime())},type:"numeric"}),ts.addParser({id:"metadata",is:function(e){return!1},format:function(e,t,n){var r=t.config,i=r.parserMetadataName?r.parserMetadataName:"sortValue";return $(n).metadata()[i]},type:"numeric"}),ts.addWidget({id:"zebra",format:function(e){if(e.config.debug)var t=new Date;var n,r=-1,i;$("tr:visible",e.tBodies[0]).each(function(t){n=$(this),n.hasClass(e.config.cssChildRow)||r++,i=r%2==0,n.removeClass(e.config.widgetZebra.css[i?0:1]).addClass(e.config.widgetZebra.css[i?1:0])}),e.config.debug&&$.tablesorter.benchmark("Applying Zebra widget",t)}})}(jQuery),function(e,t,n){e.fn.jScrollPane=function(r){function i(r,i){function V(t){var i,o,g,y,w,E,x=!1,T=!1;s=t;if(u===n)w=r.scrollTop(),E=r.scrollLeft(),r.css({overflow:"hidden",padding:0}),a=r.innerWidth()+F,f=r.innerHeight(),r.width(a),u=e('<div class="jspPane" />').css("padding",j).append(r.children()),l=e('<div class="jspContainer" />').css({width:a+"px",height:f+"px"}).append(u).appendTo(r);else{r.css("width",""),x=s.stickToBottom&&mt(),T=s.stickToRight&&gt(),y=r.innerWidth()+F!=a||r.outerHeight()!=f,y&&(a=r.innerWidth()+F,f=r.innerHeight(),l.css({width:a+"px",height:f+"px"}));if(!y&&I==c&&u.outerHeight()==h){r.width(a);return}I=c,u.css("width",""),r.width(a),l.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}u.css("overflow","auto"),t.contentWidth?c=t.contentWidth:c=u[0].scrollWidth,h=u[0].scrollHeight,u.css("overflow",""),p=c/a,d=h/f,v=d>1,m=p>1,!m&&!v?(r.removeClass("jspScrollable"),u.css({top:0,left:0,width:l.width()-F}),bt(),St(),Tt(),rt()):(r.addClass("jspScrollable"),i=s.maintainPosition&&(b||S),i&&(o=dt(),g=vt()),J(),Q(),Y(),i&&(ht(T?c-a:o,!1),ct(x?h-f:g,!1)),Et(),yt(),kt(),s.enableKeyboardNavigation&&xt(),s.clickOnTrack&&nt(),Nt(),s.hijackInternalLinks&&Ct()),s.autoReinitialise&&!B?B=setInterval(function(){V(s)},s.autoReinitialiseDelay):!s.autoReinitialise&&B&&clearInterval(B),w&&r.scrollTop(0)&&ct(w,!1),E&&r.scrollLeft(0)&&ht(E,!1),r.trigger("jsp-initialised",[m||v])}function J(){v&&(l.append(e('<div class="jspVerticalBar" />').append(e('<div class="jspCap jspCapTop" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragTop" />'),e('<div class="jspDragBottom" />'))),e('<div class="jspCap jspCapBottom" />'))),x=l.find(">.jspVerticalBar"),T=x.find(">.jspTrack"),g=T.find(">.jspDrag"),s.showArrows&&(L=e('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",et(0,-1)).bind("click.jsp",wt),A=e('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",et(0,1)).bind("click.jsp",wt),s.arrowScrollOnHover&&(L.bind("mouseover.jsp",et(0,-1,L)),A.bind("mouseover.jsp",et(0,1,A))),Z(T,s.verticalArrowPositions,L,A)),C=f,l.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){C-=e(this).outerHeight()}),g.hover(function(){g.addClass("jspHover")},function(){g.removeClass("jspHover")}).bind("mousedown.jsp",function(t){e("html").bind("dragstart.jsp selectstart.jsp",wt),g.addClass("jspActive");var n=t.pageY-g.position().top;return e("html").bind("mousemove.jsp",function(e){st(e.pageY-n,!1)}).bind("mouseup.jsp mouseleave.jsp",it),!1}),K())}function K(){T.height(C+"px"),b=0,N=s.verticalGutter+T.outerWidth(),u.width(a-N-F);try{x.position().left===0&&u.css("margin-left",N+"px")}catch(e){}}function Q(){m&&(l.append(e('<div class="jspHorizontalBar" />').append(e('<div class="jspCap jspCapLeft" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragLeft" />'),e('<div class="jspDragRight" />'))),e('<div class="jspCap jspCapRight" />'))),O=l.find(">.jspHorizontalBar"),M=O.find(">.jspTrack"),w=M.find(">.jspDrag"),s.showArrows&&(P=e('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",et(-1,0)).bind("click.jsp",wt),H=e('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",et(1,0)).bind("click.jsp",wt),s.arrowScrollOnHover&&(P.bind("mouseover.jsp",et(-1,0,P)),H.bind("mouseover.jsp",et(1,0,H))),Z(M,s.horizontalArrowPositions,P,H)),w.hover(function(){w.addClass("jspHover")},function(){w.removeClass("jspHover")}).bind("mousedown.jsp",function(t){e("html").bind("dragstart.jsp selectstart.jsp",wt),w.addClass("jspActive");var n=t.pageX-w.position().left;return e("html").bind("mousemove.jsp",function(e){ut(e.pageX-n,!1)}).bind("mouseup.jsp mouseleave.jsp",it),!1}),_=l.innerWidth(),G())}function G(){l.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){_-=e(this).outerWidth()}),M.width(_+"px"),S=0}function Y(){if(m&&v){var t=M.outerHeight(),n=T.outerWidth();C-=t,e(O).find(">.jspCap:visible,>.jspArrow").each(function(){_+=e(this).outerWidth()}),_-=n,f-=n,a-=t,M.parent().append(e('<div class="jspCorner" />').css("width",t+"px")),K(),G()}m&&u.width(l.outerWidth()-F+"px"),h=u.outerHeight(),d=h/f,m&&(D=Math.ceil(1/p*_),D>s.horizontalDragMaxWidth?D=s.horizontalDragMaxWidth:D<s.horizontalDragMinWidth&&(D=s.horizontalDragMinWidth),w.width(D+"px"),E=_-D,at(S)),v&&(k=Math.ceil(1/d*C),k>s.verticalDragMaxHeight?k=s.verticalDragMaxHeight:k<s.verticalDragMinHeight&&(k=s.verticalDragMinHeight),g.height(k+"px"),y=C-k,ot(b))}function Z(e,t,n,r){var i="before",s="after",o;t=="os"&&(t=/Mac/.test(navigator.platform)?"after":"split"),t==i?s=t:t==s&&(i=t,o=n,n=r,r=o),e[i](n)[s](r)}function et(e,t,n){return function(){return tt(e,t,this,n),this.blur(),!1}}function tt(t,n,r,i){r=e(r).addClass("jspActive");var u,a,f=!0,l=function(){t!==0&&o.scrollByX(t*s.arrowButtonSpeed),n!==0&&o.scrollByY(n*s.arrowButtonSpeed),a=setTimeout(l,f?s.initialDelay:s.arrowRepeatFreq),f=!1};l(),u=i?"mouseout.jsp":"mouseup.jsp",i=i||e("html"),i.bind(u,function(){r.removeClass("jspActive"),a&&clearTimeout(a),a=null,i.unbind(u)})}function nt(){rt(),v&&T.bind("mousedown.jsp",function(t){if(t.originalTarget===n||t.originalTarget==t.currentTarget){var r=e(this),i=r.offset(),u=t.pageY-i.top-b,a,l=!0,c=function(){var e=r.offset(),n=t.pageY-e.top-k/2,i=f*s.scrollPagePercent,d=y*i/(h-f);if(u<0)b-d>n?o.scrollByY(-i):st(n);else{if(!(u>0)){p();return}b+d<n?o.scrollByY(i):st(n)}a=setTimeout(c,l?s.initialDelay:s.trackClickRepeatFreq),l=!1},p=function(){a&&clearTimeout(a),a=null,e(document).unbind("mouseup.jsp",p)};return c(),e(document).bind("mouseup.jsp",p),!1}}),m&&M.bind("mousedown.jsp",function(t){if(t.originalTarget===n||t.originalTarget==t.currentTarget){var r=e(this),i=r.offset(),u=t.pageX-i.left-S,f,l=!0,h=function(){var e=r.offset(),n=t.pageX-e.left-D/2,i=a*s.scrollPagePercent,d=E*i/(c-a);if(u<0)S-d>n?o.scrollByX(-i):ut(n);else{if(!(u>0)){p();return}S+d<n?o.scrollByX(i):ut(n)}f=setTimeout(h,l?s.initialDelay:s.trackClickRepeatFreq),l=!1},p=function(){f&&clearTimeout(f),f=null,e(document).unbind("mouseup.jsp",p)};return h(),e(document).bind("mouseup.jsp",p),!1}})}function rt(){M&&M.unbind("mousedown.jsp"),T&&T.unbind("mousedown.jsp")}function it(){e("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),g&&g.removeClass("jspActive"),w&&w.removeClass("jspActive")}function st(e,t){if(!v)return;e<0?e=0:e>y&&(e=y),t===n&&(t=s.animateScroll),t?o.animate(g,"top",e,ot):(g.css("top",e),ot(e))}function ot(e){e===n&&(e=g.position().top),l.scrollTop(0),b=e;var t=b===0,i=b==y,s=e/y,o=-s*(h-f);if(q!=t||U!=i)q=t,U=i,r.trigger("jsp-arrow-change",[q,U,R,z]);ft(t,i),u.css("top",o),r.trigger("jsp-scroll-y",[-o,t,i]).trigger("scroll")}function ut(e,t){if(!m)return;e<0?e=0:e>E&&(e=E),t===n&&(t=s.animateScroll),t?o.animate(w,"left",e,at):(w.css("left",e),at(e))}function at(e){e===n&&(e=w.position().left),l.scrollTop(0),S=e;var t=S===0,i=S==E,s=e/E,o=-s*(c-a);if(R!=t||z!=i)R=t,z=i,r.trigger("jsp-arrow-change",[q,U,R,z]);lt(t,i),u.css("left",o),r.trigger("jsp-scroll-x",[-o,t,i]).trigger("scroll")}function ft(e,t){s.showArrows&&(L[e?"addClass":"removeClass"]("jspDisabled"),A[t?"addClass":"removeClass"]("jspDisabled"))}function lt(e,t){s.showArrows&&(P[e?"addClass":"removeClass"]("jspDisabled"),H[t?"addClass":"removeClass"]("jspDisabled"))}function ct(e,t){var n=e/(h-f);st(n*y,t)}function ht(e,t){var n=e/(c-a);ut(n*E,t)}function pt(t,n,r){var i,o,u,c=0,h=0,p,d,v,m,g,y;try{i=e(t)}catch(b){return}o=i.outerHeight(),u=i.outerWidth(),l.scrollTop(0),l.scrollLeft(0);while(!i.is(".jspPane")){c+=i.position().top,h+=i.position().left,i=i.offsetParent();if(/^body|html$/i.test(i[0].nodeName))return}p=vt(),v=p+f,c<p||n?g=c-s.verticalGutter:c+o>v&&(g=c-f+o+s.verticalGutter),isNaN(g)||ct(g,r),d=dt(),m=d+a,h<d||n?y=h-s.horizontalGutter:h+u>m&&(y=h-a+u+s.horizontalGutter),isNaN(y)||ht(y,r)}function dt(){return-u.position().left}function vt(){return-u.position().top}function mt(){var e=h-f;return e>20&&e-vt()<10}function gt(){var e=c-a;return e>20&&e-dt()<10}function yt(){l.unbind(X).bind(X,function(e,t,n,r){var i=S,u=b;return o.scrollBy(n*s.mouseWheelSpeed,-r*s.mouseWheelSpeed,!1),i==S&&u==b})}function bt(){l.unbind(X)}function wt(){return!1}function Et(){u.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(e){pt(e.target,!1)})}function St(){u.find(":input,a").unbind("focus.jsp")}function xt(){function a(){var e=S,r=b;switch(t){case 40:o.scrollByY(s.keyboardSpeed,!1);break;case 38:o.scrollByY(-s.keyboardSpeed,!1);break;case 34:case 32:o.scrollByY(f*s.scrollPagePercent,!1);break;case 33:o.scrollByY(-f*s.scrollPagePercent,!1);break;case 39:o.scrollByX(s.keyboardSpeed,!1);break;case 37:o.scrollByX(-s.keyboardSpeed,!1)}return n=e!=S||r!=b,n}var t,n,i=[];m&&i.push(O[0]),v&&i.push(x[0]),u.focus(function(){r.focus()}),r.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(r){if(r.target!==this&&(!i.length||!e(r.target).closest(i).length))return;var s=S,o=b;switch(r.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:t=r.keyCode,a();break;case 35:ct(h-f),t=null;break;case 36:ct(0),t=null}return n=r.keyCode==t&&s!=S||o!=b,!n}).bind("keypress.jsp",function(e){return e.keyCode==t&&a(),!n}),s.hideFocus?(r.css("outline","none"),"hideFocus"in l[0]&&r.attr("hideFocus",!0)):(r.css("outline",""),"hideFocus"in l[0]&&r.attr("hideFocus",!1))}function Tt(){r.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function Nt(){if(location.hash&&location.hash.length>1){var t,n,r=escape(location.hash.substr(1));try{t=e("#"+r+', a[name="'+r+'"]')}catch(i){return}t.length&&u.find(r)&&(l.scrollTop()===0?n=setInterval(function(){l.scrollTop()>0&&(pt(t,!0),e(document).scrollTop(l.position().top),clearInterval(n))},50):(pt(t,!0),e(document).scrollTop(l.position().top)))}}function Ct(){if(e(document.body).data("jspHijack"))return;e(document.body).data("jspHijack",!0),e(document.body).delegate("a[href*=#]","click",function(n){var r=this.href.substr(0,this.href.indexOf("#")),i=location.href,s,o,u,a,f,l;location.href.indexOf("#")!==-1&&(i=location.href.substr(0,location.href.indexOf("#")));if(r!==i)return;s=escape(this.href.substr(this.href.indexOf("#")+1)),o;try{o=e("#"+s+', a[name="'+s+'"]')}catch(c){return}if(!o.length)return;u=o.closest(".jspScrollable"),a=u.data("jsp"),a.scrollToElement(o,!0),u[0].scrollIntoView&&(f=e(t).scrollTop(),l=o.offset().top,(l<f||l>f+e(t).height())&&u[0].scrollIntoView()),n.preventDefault()})}function kt(){var e,t,n,r,i,s=!1;l.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(o){var u=o.originalEvent.touches[0];e=dt(),t=vt(),n=u.pageX,r=u.pageY,i=!1,s=!0}).bind("touchmove.jsp",function(u){if(!s)return;var a=u.originalEvent.touches[0],f=S,l=b;return o.scrollTo(e+n-a.pageX,t+r-a.pageY),i=i||Math.abs(n-a.pageX)>5||Math.abs(r-a.pageY)>5,f==S&&l==b}).bind("touchend.jsp",function(e){s=!1}).bind("click.jsp-touchclick",function(e){if(i)return i=!1,!1})}function Lt(){var e=vt(),t=dt();r.removeClass("jspScrollable").unbind(".jsp"),r.replaceWith(W.append(u.children())),W.scrollTop(e),W.scrollLeft(t),B&&clearInterval(B)}var s,o=this,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q=!0,R=!0,U=!1,z=!1,W=r.clone(!1,!1).empty(),X=e.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";j=r.css("paddingTop")+" "+r.css("paddingRight")+" "+r.css("paddingBottom")+" "+r.css("paddingLeft"),F=(parseInt(r.css("paddingLeft"),10)||0)+(parseInt(r.css("paddingRight"),10)||0),e.extend(o,{reinitialise:function(t){t=e.extend({},s,t),V(t)},scrollToElement:function(e,t,n){pt(e,t,n)},scrollTo:function(e,t,n){ht(e,n),ct(t,n)},scrollToX:function(e,t){ht(e,t)},scrollToY:function(e,t){ct(e,t)},scrollToPercentX:function(e,t){ht(e*(c-a),t)},scrollToPercentY:function(e,t){ct(e*(h-f),t)},scrollBy:function(e,t,n){o.scrollByX(e,n),o.scrollByY(t,n)},scrollByX:function(e,t){var n=dt()+Math[e<0?"floor":"ceil"](e),r=n/(c-a);ut(r*E,t)},scrollByY:function(e,t){var n=vt()+Math[e<0?"floor":"ceil"](e),r=n/(h-f);st(r*y,t)},positionDragX:function(e,t){ut(e,t)},positionDragY:function(e,t){st(e,t)},animate:function(e,t,n,r){var i={};i[t]=n,e.animate(i,{duration:s.animateDuration,easing:s.animateEase,queue:!1,step:r})},getContentPositionX:function(){return dt()},getContentPositionY:function(){return vt()},getContentWidth:function(){return c},getContentHeight:function(){return h},getPercentScrolledX:function(){return dt()/(c-a)},getPercentScrolledY:function(){return vt()/(h-f)},getIsScrollableH:function(){return m},getIsScrollableV:function(){return v},getContentPane:function(){return u},scrollToBottom:function(e){st(y,e)},hijackInternalLinks:e.noop,destroy:function(){Lt()}}),V(i)}return r=e.extend({},e.fn.jScrollPane.defaults,r),e.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){r[this]=r[this]||r.speed}),this.each(function(){var t=e(this),n=t.data("jsp");n?n.reinitialise(r):(e("script",t).filter('[type="text/javascript"],:not([type])').remove(),n=new i(t,r),t.data("jsp",n))})},e.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:n,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}}(jQuery,this),function(e){typeof define=="function"&&define.amd?define(["jquery"],e):typeof exports=="object"?module.exports=e:e(jQuery)}(function(e){function o(t){var n=t||window.event,s=[].slice.call(arguments,1),o=0,u=0,a=0,f=0,l=0,c;t=e.event.fix(n),t.type="mousewheel",n.wheelDelta&&(o=n.wheelDelta),n.detail&&(o=n.detail*-1),n.deltaY&&(a=n.deltaY*-1,o=a),n.deltaX&&(u=n.deltaX,o=u*-1),n.wheelDeltaY!==undefined&&(a=n.wheelDeltaY),n.wheelDeltaX!==undefined&&(u=n.wheelDeltaX*-1),f=Math.abs(o);if(!r||f<r)r=f;l=Math.max(Math.abs(a),Math.abs(u));if(!i||l<i)i=l;return c=o>0?"floor":"ceil",o=Math[c](o/r),u=Math[c](u/i),a=Math[c](a/i),s.unshift(t,o,u,a),(e.event.dispatch||e.event.handle).apply(this,s)}var t=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],n="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],r,i;if(e.event.fixHooks)for(var s=t.length;s;)e.event.fixHooks[t[--s]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=n.length;e;)this.addEventListener(n[--e],o,!1);else this.onmousewheel=o},teardown:function(){if(this.removeEventListener)for(var e=n.length;e;)this.removeEventListener(n[--e],o,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),!function(e){function t(){var e=location.href;return hashtag=-1!==e.indexOf("#prettyPhoto")?decodeURI(e.substring(e.indexOf("#prettyPhoto")+1,e.length)):!1,hashtag&&(hashtag=hashtag.replace(/<|>/g,"")),hashtag}function n(){"undefined"!=typeof theRel&&(location.hash=theRel+"/"+rel_index+"/")}function r(){-1!==location.href.indexOf("#prettyPhoto")&&(location.hash="prettyPhoto")}function i(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n="[\\?&]"+e+"=([^&#]*)",r=new RegExp(n),i=r.exec(t);return null==i?"":i[1]}e.prettyPhoto={version:"3.1.6"},e.fn.prettyPhoto=function(s){function u(){e(".pp_loaderIcon").hide(),projectedTop=scroll_pos.scrollTop+(L/2-b.containerHeight/2),projectedTop<0&&(projectedTop=0),$ppt.fadeTo(settings.animation_speed,1),$pp_pic_holder.find(".pp_content").animate({height:b.contentHeight,width:b.contentWidth},settings.animation_speed),$pp_pic_holder.animate({top:projectedTop,left:A/2-b.containerWidth/2<0?0:A/2-b.containerWidth/2,width:b.containerWidth},settings.animation_speed,function(){$pp_pic_holder.find(".pp_hoverContainer,#fullResImage").height(b.height).width(b.width),$pp_pic_holder.find(".pp_fade").fadeIn(settings.animation_speed),isSet&&"image"==h(pp_images[set_position])?$pp_pic_holder.find(".pp_hoverContainer").show():$pp_pic_holder.find(".pp_hoverContainer").hide(),settings.allow_expand&&(b.resized?e("a.pp_expand,a.pp_contract").show():e("a.pp_expand").hide()),!settings.autoplay_slideshow||N||w||e.prettyPhoto.startSlideshow(),settings.changepicturecallback(),w=!0}),g(),s.ajaxcallback()}function a(t){$pp_pic_holder.find("#pp_full_res object,#pp_full_res embed").css("visibility","hidden"),$pp_pic_holder.find(".pp_fade").fadeOut(settings.animation_speed,function(){e(".pp_loaderIcon").show(),t()})}function f(t){t>1?e(".pp_nav").show():e(".pp_nav").hide()}function l(e,t){if(resized=!1,c(e,t),imageWidth=e,imageHeight=t,(T>A||x>L)&&doresize&&settings.allow_resize&&!k){for(resized=!0,fitting=!1;!fitting;)T>A?(imageWidth=A-200,imageHeight=t/e*imageWidth):x>L?(imageHeight=L-200,imageWidth=e/t*imageHeight):fitting=!0,x=imageHeight,T=imageWidth;(T>A||x>L)&&l(T,x),c(imageWidth,imageHeight)}return{width:Math.floor(imageWidth),height:Math.floor(imageHeight),containerHeight:Math.floor(x),containerWidth:Math.floor(T)+2*settings.horizontal_padding,contentHeight:Math.floor(E),contentWidth:Math.floor(S),resized:resized}}function c(t,n){t=parseFloat(t),n=parseFloat(n),$pp_details=$pp_pic_holder.find(".pp_details"),$pp_details.width(t),detailsHeight=parseFloat($pp_details.css("marginTop"))+parseFloat($pp_details.css("marginBottom")),$pp_details=$pp_details.clone().addClass(settings.theme).width(t).appendTo(e("body")).css({position:"absolute",top:-1e4}),detailsHeight+=$pp_details.height(),detailsHeight=detailsHeight<=34?36:detailsHeight,$pp_details.remove(),$pp_title=$pp_pic_holder.find(".ppt"),$pp_title.width(t),titleHeight=parseFloat($pp_title.css("marginTop"))+parseFloat($pp_title.css("marginBottom")),$pp_title=$pp_title.clone().appendTo(e("body")).css({position:"absolute",top:-1e4}),titleHeight+=$pp_title.height(),$pp_title.remove(),E=n+detailsHeight,S=t,x=E+titleHeight+$pp_pic_holder.find(".pp_top").height()+$pp_pic_holder.find(".pp_bottom").height(),T=t}function h(e){return e.match(/youtube\.com\/watch/i)||e.match(/youtu\.be/i)?"youtube":e.match(/vimeo\.com/i)?"vimeo":e.match(/\b.mov\b/i)?"quicktime":e.match(/\b.swf\b/i)?"flash":e.match(/\biframe=true\b/i)?"iframe":e.match(/\bajax=true\b/i)?"ajax":e.match(/\bcustom=true\b/i)?"custom":"#"==e.substr(0,1)?"inline":"image"}function d(){if(doresize&&"undefined"!=typeof $pp_pic_holder){if(scroll_pos=v(),contentHeight=$pp_pic_holder.height(),contentwidth=$pp_pic_holder.width(),projectedTop=L/2+scroll_pos.scrollTop-contentHeight/2,projectedTop<0&&(projectedTop=0),contentHeight>L)return;$pp_pic_holder.css({top:projectedTop,left:A/2+scroll_pos.scrollLeft-contentwidth/2})}}function v(){return self.pageYOffset?{scrollTop:self.pageYOffset,scrollLeft:self.pageXOffset}:document.documentElement&&document.documentElement.scrollTop?{scrollTop:document.documentElement.scrollTop,scrollLeft:document.documentElement.scrollLeft}:document.body?{scrollTop:document.body.scrollTop,scrollLeft:document.body.scrollLeft}:void 0}function m(){L=e(window).height(),A=e(window).width(),"undefined"!=typeof $pp_overlay&&$pp_overlay.height(e(document).height()).width(A)}function g(){isSet&&settings.overlay_gallery&&"image"==h(pp_images[set_position])?(itemWidth=57,navWidth="facebook"==settings.theme||"pp_default"==settings.theme?50:30,itemsPerPage=Math.floor((b.containerWidth-100-navWidth)/itemWidth),itemsPerPage=itemsPerPage<pp_images.length?itemsPerPage:pp_images.length,totalPage=Math.ceil(pp_images.length/itemsPerPage)-1,0==totalPage?(navWidth=0,$pp_gallery.find(".pp_arrow_next,.pp_arrow_previous").hide()):$pp_gallery.find(".pp_arrow_next,.pp_arrow_previous").show(),galleryWidth=itemsPerPage*itemWidth,fullGalleryWidth=pp_images.length*itemWidth,$pp_gallery.css("margin-left",-(galleryWidth/2+navWidth/2)).find("div:first").width(galleryWidth+5).find("ul").width(fullGalleryWidth).find("li.selected").removeClass("selected"),goToPage=Math.floor(set_position/itemsPerPage)<totalPage?Math.floor(set_position/itemsPerPage):totalPage,e.prettyPhoto.changeGalleryPage(goToPage),$pp_gallery_li.filter(":eq("+set_position+")").addClass("selected")):$pp_pic_holder.find(".pp_content").unbind("mouseenter mouseleave")}function y(){if(settings.social_tools&&(facebook_like_link=settings.social_tools.replace("{location_href}",encodeURIComponent(location.href))),settings.markup=settings.markup.replace("{pp_social}",""),e("body").append(settings.markup),$pp_pic_holder=e(".pp_pic_holder"),$ppt=e(".ppt"),$pp_overlay=e("div.pp_overlay"),isSet&&settings.overlay_gallery){currentGalleryPage=0,toInject="";for(var t=0;t<pp_images.length;t++)pp_images[t].match(/\b(jpg|jpeg|png|gif)\b/gi)?(classname="",img_src=pp_images[t]):(classname="default",img_src=""),toInject+="<li class='"+classname+"'><a href='#'><img src='"+img_src+"' width='50' alt='' /></a></li>";toInject=settings.gallery_markup.replace(/{gallery}/g,toInject),$pp_pic_holder.find("#pp_full_res").after(toInject),$pp_gallery=e(".pp_pic_holder .pp_gallery"),$pp_gallery_li=$pp_gallery.find("li"),$pp_gallery.find(".pp_arrow_next").click(function(){return e.prettyPhoto.changeGalleryPage("next"),e.prettyPhoto.stopSlideshow(),!1}),$pp_gallery.find(".pp_arrow_previous").click(function(){return e.prettyPhoto.changeGalleryPage("previous"),e.prettyPhoto.stopSlideshow(),!1}),$pp_pic_holder.find(".pp_content").hover(function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeIn()},function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeOut()}),itemWidth=57,$pp_gallery_li.each(function(t){e(this).find("a").click(function(){return e.prettyPhoto.changePage(t),e.prettyPhoto.stopSlideshow(),!1})})}settings.slideshow&&($pp_pic_holder.find(".pp_nav").prepend('<a href="#" class="pp_play">Play</a>'),$pp_pic_holder.find(".pp_nav .pp_play").click(function(){return e.prettyPhoto.startSlideshow(),!1})),$pp_pic_holder.attr("class","pp_pic_holder "+settings.theme),$pp_overlay.css({opacity:0,height:e(document).height(),width:e(window).width()}).bind("click",function(){settings.modal||e.prettyPhoto.close()}),e("a.pp_close").bind("click",function(){return e.prettyPhoto.close(),!1}),settings.allow_expand&&e("a.pp_expand").bind("click",function(){return e(this).hasClass("pp_expand")?(e(this).removeClass("pp_expand").addClass("pp_contract"),doresize=!1):(e(this).removeClass("pp_contract").addClass("pp_expand"),doresize=!0),a(function(){e.prettyPhoto.open()}),!1}),$pp_pic_holder.find(".pp_previous, .pp_nav .pp_arrow_previous").bind("click",function(){return e.prettyPhoto.changePage("previous"),e.prettyPhoto.stopSlideshow(),!1}),$pp_pic_holder.find(".pp_next, .pp_nav .pp_arrow_next").bind("click",function(){return e.prettyPhoto.changePage("next"),e.prettyPhoto.stopSlideshow(),!1}),d()}s=jQuery.extend({hook:"rel",animation_speed:"fast",ajaxcallback:function(){},slideshow:5e3,autoplay_slideshow:!1,opacity:.8,show_title:!0,allow_resize:!0,allow_expand:!0,default_width:500,default_height:344,counter_separator_label:"/",theme:"pp_default",horizontal_padding:20,hideflash:!1,wmode:"opaque",autoplay:!0,modal:!1,deeplinking:!0,overlay_gallery:!0,overlay_gallery_max:30,keyboard_shortcuts:!0,changepicturecallback:function(){},callback:function(){},ie6_fallback:!0,markup:'<div class="pp_pic_holder"> 						<div class="ppt">&nbsp;</div> 						<div class="pp_top"> 							<div class="pp_left"></div> 							<div class="pp_middle"></div> 							<div class="pp_right"></div> 						</div> 						<div class="pp_content_container"> 							<div class="pp_left"> 							<div class="pp_right"> 								<div class="pp_content"> 									<div class="pp_loaderIcon"></div> 									<div class="pp_fade"> 										<a href="#" class="pp_expand" title="Expand the image">Expand</a> 										<div class="pp_hoverContainer"> 											<a class="pp_next" href="#">next</a> 											<a class="pp_previous" href="#">previous</a> 										</div> 										<div id="pp_full_res"></div> 										<div class="pp_details"> 											<div class="pp_nav"> 												<a href="#" class="pp_arrow_previous">Previous</a> 												<p class="currentTextHolder">0/0</p> 												<a href="#" class="pp_arrow_next">Next</a> 											</div> 											<p class="pp_description"></p> 											<div class="pp_social">{pp_social}</div> 											<a class="pp_close" href="#">Close</a> 										</div> 									</div> 								</div> 							</div> 							</div> 						</div> 						<div class="pp_bottom"> 							<div class="pp_left"></div> 							<div class="pp_middle"></div> 							<div class="pp_right"></div> 						</div> 					</div> 					<div class="pp_overlay"></div>',gallery_markup:'<div class="pp_gallery"> 								<a href="#" class="pp_arrow_previous">Previous</a> 								<div> 									<ul> 										{gallery} 									</ul> 								</div> 								<a href="#" class="pp_arrow_next">Next</a> 							</div>',image_markup:'<img id="fullResImage" src="{path}" />',flash_markup:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="{width}" height="{height}"><param name="wmode" value="{wmode}" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{path}" /><embed src="{path}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="{width}" height="{height}" wmode="{wmode}"></embed></object>',quicktime_markup:'<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab" height="{height}" width="{width}"><param name="src" value="{path}"><param name="autoplay" value="{autoplay}"><param name="type" value="video/quicktime"><embed src="{path}" height="{height}" width="{width}" autoplay="{autoplay}" type="video/quicktime" pluginspage="http://www.apple.com/quicktime/download/"></embed></object>',iframe_markup:'<iframe src ="{path}" width="{width}" height="{height}" frameborder="no"></iframe>',inline_markup:'<div class="pp_inline">{content}</div>',custom_markup:"",social_tools:'<div class="twitter"><a href="http://twitter.com/share" class="twitter-share-button" data-count="none">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script></div><div class="facebook"><iframe src="//www.facebook.com/plugins/like.php?locale=en_US&href={location_href}&layout=button_count&show_faces=true&width=500&action=like&font&colorscheme=light&height=23" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:500px; height:23px;" allowTransparency="true"></iframe></div>'},s);var b,w,E,S,x,T,N,C=this,k=!1,L=e(window).height(),A=e(window).width();return doresize=!0,scroll_pos=v(),e(window).unbind("resize.prettyphoto").bind("resize.prettyphoto",function(){d(),m()}),s.keyboard_shortcuts&&e(document).unbind("keydown.prettyphoto").bind("keydown.prettyphoto",function(t){if("undefined"!=typeof $pp_pic_holder&&$pp_pic_holder.is(":visible"))switch(t.keyCode){case 37:e.prettyPhoto.changePage("previous"),t.preventDefault();break;case 39:e.prettyPhoto.changePage("next"),t.preventDefault();break;case 27:settings.modal||e.prettyPhoto.close(),t.preventDefault()}}),e.prettyPhoto.initialize=function(){return settings=s,"pp_default"==settings.theme&&(settings.horizontal_padding=16),theRel=e(this).attr(settings.hook),galleryRegExp=/\[(?:.*)\]/,isSet=galleryRegExp.exec(theRel)?!0:!1,pp_images=isSet?jQuery.map(C,function(t){return-1!=e(t).attr(settings.hook).indexOf(theRel)?e(t).attr("href"):void 0}):e.makeArray(e(this).attr("href")),pp_titles=isSet?jQuery.map(C,function(t){return-1!=e(t).attr(settings.hook).indexOf(theRel)?e(t).find("img").attr("alt")?e(t).find("img").attr("alt"):"":void 0}):e.makeArray(e(this).find("img").attr("alt")),pp_descriptions=isSet?jQuery.map(C,function(t){return-1!=e(t).attr(settings.hook).indexOf(theRel)?e(t).attr("title")?e(t).attr("title"):"":void 0}):e.makeArray(e(this).attr("title")),pp_images.length>settings.overlay_gallery_max&&(settings.overlay_gallery=!1),set_position=jQuery.inArray(e(this).attr("href"),pp_images),rel_index=isSet?set_position:e("a["+settings.hook+"^='"+theRel+"']").index(e(this)),y(this),settings.allow_resize&&e(window).bind("scroll.prettyphoto",function(){d()}),e.prettyPhoto.open(),!1},e.prettyPhoto.open=function(t){return"undefined"==typeof settings&&(settings=s,pp_images=e.makeArray(arguments[0]),pp_titles=e.makeArray(arguments[1]?arguments[1]:""),pp_descriptions=e.makeArray(arguments[2]?arguments[2]:""),isSet=pp_images.length>1?!0:!1,set_position=arguments[3]?arguments[3]:0,y(t.target)),settings.hideflash&&e("object,embed,iframe[src*=youtube],iframe[src*=vimeo]"
).css("visibility","hidden"),f(e(pp_images).size()),e(".pp_loaderIcon").show(),settings.deeplinking&&n(),settings.social_tools&&(facebook_like_link=settings.social_tools.replace("{location_href}",encodeURIComponent(location.href)),$pp_pic_holder.find(".pp_social").html(facebook_like_link)),$ppt.is(":hidden")&&$ppt.css("opacity",0).show(),$pp_overlay.show().fadeTo(settings.animation_speed,settings.opacity),$pp_pic_holder.find(".currentTextHolder").text(set_position+1+settings.counter_separator_label+e(pp_images).size()),"undefined"!=typeof pp_descriptions[set_position]&&""!=pp_descriptions[set_position]?$pp_pic_holder.find(".pp_description").show().html(unescape(pp_descriptions[set_position])):$pp_pic_holder.find(".pp_description").hide(),movie_width=parseFloat(i("width",pp_images[set_position]))?i("width",pp_images[set_position]):settings.default_width.toString(),movie_height=parseFloat(i("height",pp_images[set_position]))?i("height",pp_images[set_position]):settings.default_height.toString(),k=!1,-1!=movie_height.indexOf("%")&&(movie_height=parseFloat(e(window).height()*parseFloat(movie_height)/100-150),k=!0),-1!=movie_width.indexOf("%")&&(movie_width=parseFloat(e(window).width()*parseFloat(movie_width)/100-150),k=!0),$pp_pic_holder.fadeIn(function(){switch($ppt.html(settings.show_title&&""!=pp_titles[set_position]&&"undefined"!=typeof pp_titles[set_position]?unescape(pp_titles[set_position]):"&nbsp;"),imgPreloader="",skipInjection=!1,h(pp_images[set_position])){case"image":imgPreloader=new Image,nextImage=new Image,isSet&&set_position<e(pp_images).size()-1&&(nextImage.src=pp_images[set_position+1]),prevImage=new Image,isSet&&pp_images[set_position-1]&&(prevImage.src=pp_images[set_position-1]),$pp_pic_holder.find("#pp_full_res")[0].innerHTML=settings.image_markup.replace(/{path}/g,pp_images[set_position]),imgPreloader.onload=function(){b=l(imgPreloader.width,imgPreloader.height),u()},imgPreloader.onerror=function(){alert("Image cannot be loaded. Make sure the path is correct and image exist."),e.prettyPhoto.close()},imgPreloader.src=pp_images[set_position];break;case"youtube":b=l(movie_width,movie_height),movie_id=i("v",pp_images[set_position]),""==movie_id&&(movie_id=pp_images[set_position].split("youtu.be/"),movie_id=movie_id[1],movie_id.indexOf("?")>0&&(movie_id=movie_id.substr(0,movie_id.indexOf("?"))),movie_id.indexOf("&")>0&&(movie_id=movie_id.substr(0,movie_id.indexOf("&")))),movie="http://www.youtube.com/embed/"+movie_id,movie+=i("rel",pp_images[set_position])?"?rel="+i("rel",pp_images[set_position]):"?rel=1",settings.autoplay&&(movie+="&autoplay=1"),toInject=settings.iframe_markup.replace(/{width}/g,b.width).replace(/{height}/g,b.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,movie);break;case"vimeo":b=l(movie_width,movie_height),movie_id=pp_images[set_position];var t=/http(s?):\/\/(www\.)?vimeo.com\/(\d+)/,n=movie_id.match(t);movie="http://player.vimeo.com/video/"+n[3]+"?title=0&byline=0&portrait=0",settings.autoplay&&(movie+="&autoplay=1;"),vimeo_width=b.width+"/embed/?moog_width="+b.width,toInject=settings.iframe_markup.replace(/{width}/g,vimeo_width).replace(/{height}/g,b.height).replace(/{path}/g,movie);break;case"quicktime":b=l(movie_width,movie_height),b.height+=15,b.contentHeight+=15,b.containerHeight+=15,toInject=settings.quicktime_markup.replace(/{width}/g,b.width).replace(/{height}/g,b.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,pp_images[set_position]).replace(/{autoplay}/g,settings.autoplay);break;case"flash":b=l(movie_width,movie_height),flash_vars=pp_images[set_position],flash_vars=flash_vars.substring(pp_images[set_position].indexOf("flashvars")+10,pp_images[set_position].length),filename=pp_images[set_position],filename=filename.substring(0,filename.indexOf("?")),toInject=settings.flash_markup.replace(/{width}/g,b.width).replace(/{height}/g,b.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,filename+"?"+flash_vars);break;case"iframe":b=l(movie_width,movie_height),frame_url=pp_images[set_position],frame_url=frame_url.substr(0,frame_url.indexOf("iframe")-1),toInject=settings.iframe_markup.replace(/{width}/g,b.width).replace(/{height}/g,b.height).replace(/{path}/g,frame_url);break;case"ajax":doresize=!1,b=l(movie_width,movie_height),doresize=!0,skipInjection=!0,e.get(pp_images[set_position],function(e){toInject=settings.inline_markup.replace(/{content}/g,e),$pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject,u()});break;case"custom":b=l(movie_width,movie_height),toInject=settings.custom_markup;break;case"inline":myClone=e(pp_images[set_position]).clone().append('<br clear="all" />').css({width:settings.default_width}).wrapInner('<div id="pp_full_res"><div class="pp_inline"></div></div>').appendTo(e("body")).show(),doresize=!1,b=l(e(myClone).width(),e(myClone).height()),doresize=!0,e(myClone).remove(),toInject=settings.inline_markup.replace(/{content}/g,e(pp_images[set_position]).html())}imgPreloader||skipInjection||($pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject,u())}),!1},e.prettyPhoto.changePage=function(t){currentGalleryPage=0,"previous"==t?(set_position--,set_position<0&&(set_position=e(pp_images).size()-1)):"next"==t?(set_position++,set_position>e(pp_images).size()-1&&(set_position=0)):set_position=t,rel_index=set_position,doresize||(doresize=!0),settings.allow_expand&&e(".pp_contract").removeClass("pp_contract").addClass("pp_expand"),a(function(){e.prettyPhoto.open()})},e.prettyPhoto.changeGalleryPage=function(e){"next"==e?(currentGalleryPage++,currentGalleryPage>totalPage&&(currentGalleryPage=0)):"previous"==e?(currentGalleryPage--,currentGalleryPage<0&&(currentGalleryPage=totalPage)):currentGalleryPage=e,slide_speed="next"==e||"previous"==e?settings.animation_speed:0,slide_to=currentGalleryPage*itemsPerPage*itemWidth,$pp_gallery.find("ul").animate({left:-slide_to},slide_speed)},e.prettyPhoto.startSlideshow=function(){"undefined"==typeof N?($pp_pic_holder.find(".pp_play").unbind("click").removeClass("pp_play").addClass("pp_pause").click(function(){return e.prettyPhoto.stopSlideshow(),!1}),N=setInterval(e.prettyPhoto.startSlideshow,settings.slideshow)):e.prettyPhoto.changePage("next")},e.prettyPhoto.stopSlideshow=function(){$pp_pic_holder.find(".pp_pause").unbind("click").removeClass("pp_pause").addClass("pp_play").click(function(){return e.prettyPhoto.startSlideshow(),!1}),clearInterval(N),N=void 0},e.prettyPhoto.close=function(){$pp_overlay.is(":animated")||(e.prettyPhoto.stopSlideshow(),$pp_pic_holder.stop().find("object,embed").css("visibility","hidden"),e("div.pp_pic_holder,div.ppt,.pp_fade").fadeOut(settings.animation_speed,function(){e(this).remove()}),$pp_overlay.fadeOut(settings.animation_speed,function(){settings.hideflash&&e("object,embed,iframe[src*=youtube],iframe[src*=vimeo]").css("visibility","visible"),e(this).remove(),e(window).unbind("scroll.prettyphoto"),r(),settings.callback(),doresize=!0,w=!1,delete settings}))},!pp_alreadyInitialized&&t()&&(pp_alreadyInitialized=!0,hashIndex=t(),hashRel=hashIndex,hashIndex=hashIndex.substring(hashIndex.indexOf("/")+1,hashIndex.length-1),hashRel=hashRel.substring(0,hashRel.indexOf("/")),setTimeout(function(){e("a["+s.hook+"^='"+hashRel+"']:eq("+hashIndex+")").trigger("click")},50)),this.unbind("click.prettyphoto").bind("click.prettyphoto",e.prettyPhoto.initialize)}}(jQuery);var pp_alreadyInitialized=!1;(function(e,t){function r(e,t,n){var r=e.children(),i=!1;e.empty();for(var s=0,u=r.length;s<u;s++){var a=r.eq(s);e.append(a),n&&e.append(n);if(o(e,t)){a.remove(),i=!0;break}n&&n.detach()}return i}function i(t,n,r,u,a){var f=!1,l="table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style",c="script, .dotdotdot-keep";return t.contents().detach().each(function(){var h=this,p=e(h);if(typeof h=="undefined"||h.nodeType==3&&e.trim(h.data).length==0)return!0;if(p.is(c))t.append(p);else{if(f)return!0;t.append(p),a&&t[t.is(l)?"after":"append"](a),o(r,u)&&(h.nodeType==3?f=s(p,n,r,u,a):f=i(p,n,r,u,a),f||(p.detach(),f=!0)),f||a&&a.detach()}}),f}function s(t,n,r,i,s){var a=t[0];if(!a)return!1;var c=l(a),p=c.indexOf(" ")!==-1?" ":"гЂЂ",d=i.wrap=="letter"?"":p,v=c.split(d),m=-1,g=-1,y=0,b=v.length-1;i.fallbackToLetter&&y==0&&b==0&&(d="",v=c.split(d),b=v.length-1);while(y<=b&&(y!=0||b!=0)){var w=Math.floor((y+b)/2);if(w==g)break;g=w,f(a,v.slice(0,g+1).join(d)+i.ellipsis),o(r,i)?(b=g,i.fallbackToLetter&&y==0&&b==0&&(d="",v=v[0].split(d),m=-1,g=-1,y=0,b=v.length-1)):(m=g,y=g)}if(m==-1||v.length==1&&v[0].length==0){var E=t.parent();t.detach();var S=s&&s.closest(E).length?s.length:0;E.contents().length>S?a=h(E.contents().eq(-1-S),n):(a=h(E,n,!0),S||E.detach()),a&&(c=u(l(a),i),f(a,c),S&&s&&e(a).parent().append(s))}else c=u(v.slice(0,m+1).join(d),i),f(a,c);return!0}function o(e,t){return e.innerHeight()>t.maxHeight}function u(t,n){while(e.inArray(t.slice(-1),n.lastCharacter.remove)>-1)t=t.slice(0,-1);return e.inArray(t.slice(-1),n.lastCharacter.noEllipsis)<0&&(t+=n.ellipsis),t}function a(e){return{width:e.innerWidth(),height:e.innerHeight()}}function f(e,t){e.innerText?e.innerText=t:e.nodeValue?e.nodeValue=t:e.textContent&&(e.textContent=t)}function l(e){return e.innerText?e.innerText:e.nodeValue?e.nodeValue:e.textContent?e.textContent:""}function c(e){do e=e.previousSibling;while(e&&e.nodeType!==1&&e.nodeType!==3);return e}function h(t,n,r){var i=t&&t[0],s;if(i){if(!r){if(i.nodeType===3)return i;if(e.trim(t.text()))return h(t.contents().last(),n)}s=c(i);while(!s){t=t.parent();if(t.is(n)||!t.length)return!1;s=c(t[0])}if(s)return h(e(s),n)}return!1}function p(t,n){return t?typeof t=="string"?(t=e(t,n),t.length?t:!1):t.jquery?t:!1:!1}function d(e){var t=e.innerHeight(),n=["paddingTop","paddingBottom"];for(var r=0,i=n.length;r<i;r++){var s=parseInt(e.css(n[r]),10);isNaN(s)&&(s=0),t-=s}return t}if(e.fn.dotdotdot)return;e.fn.dotdotdot=function(t){if(this.length==0)return e.fn.dotdotdot.debug('No element found for "'+this.selector+'".'),this;if(this.length>1)return this.each(function(){e(this).dotdotdot(t)});var s=this;s.data("dotdotdot")&&s.trigger("destroy.dot"),s.data("dotdotdot-style",s.attr("style")||""),s.css("word-wrap","break-word"),s.css("white-space")==="nowrap"&&s.css("white-space","normal"),s.bind_events=function(){return s.bind("update.dot",function(t,n){t.preventDefault(),t.stopPropagation(),f.maxHeight=typeof f.height=="number"?f.height:d(s),f.maxHeight+=f.tolerance;if(typeof n!="undefined"){if(typeof n=="string"||n instanceof HTMLElement)n=e("<div />").append(n).contents();n instanceof e&&(u=n)}v=s.wrapInner('<div class="dotdotdot" />').children(),v.contents().detach().end().append(u.clone(!0)).find("br").replaceWith("  <br />  ").end().css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var a=!1,c=!1;return l.afterElement&&(a=l.afterElement.clone(!0),a.show(),l.afterElement.detach()),o(v,f)&&(f.wrap=="children"?c=r(v,f,a):c=i(v,s,v,f,a)),v.replaceWith(v.contents()),v=null,e.isFunction(f.callback)&&f.callback.call(s[0],c,u),l.isTruncated=c,c}).bind("isTruncated.dot",function(e,t){return e.preventDefault(),e.stopPropagation(),typeof t=="function"&&t.call(s[0],l.isTruncated),l.isTruncated}).bind("originalContent.dot",function(e,t){return e.preventDefault(),e.stopPropagation(),typeof t=="function"&&t.call(s[0],u),u}).bind("destroy.dot",function(e){e.preventDefault(),e.stopPropagation(),s.unwatch().unbind_events().contents().detach().end().append(u).attr("style",s.data("dotdotdot-style")||"").data("dotdotdot",!1)}),s},s.unbind_events=function(){return s.unbind(".dot"),s},s.watch=function(){s.unwatch();if(f.watch=="window"){var t=e(window),n=t.width(),r=t.height();t.bind("resize.dot"+l.dotId,function(){if(n!=t.width()||r!=t.height()||!f.windowResizeFix)n=t.width(),r=t.height(),h&&clearInterval(h),h=setTimeout(function(){s.trigger("update.dot")},100)})}else c=a(s),h=setInterval(function(){if(s.is(":visible")){var e=a(s);if(c.width!=e.width||c.height!=e.height)s.trigger("update.dot"),c=e}},500);return s},s.unwatch=function(){return e(window).unbind("resize.dot"+l.dotId),h&&clearInterval(h),s};var u=s.contents(),f=e.extend(!0,{},e.fn.dotdotdot.defaults,t),l={},c={},h=null,v=null;return f.lastCharacter.remove instanceof Array||(f.lastCharacter.remove=e.fn.dotdotdot.defaultArrays.lastCharacter.remove),f.lastCharacter.noEllipsis instanceof Array||(f.lastCharacter.noEllipsis=e.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis),l.afterElement=p(f.after,s),l.isTruncated=!1,l.dotId=n++,s.data("dotdotdot",!0).bind_events().trigger("update.dot"),f.watch&&s.watch(),s},e.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",fallbackToLetter:!0,lastCharacter:{},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0},e.fn.dotdotdot.defaultArrays={lastCharacter:{remove:[" ","гЂЂ",",",";",".","!","?"],noEllipsis:[]}},e.fn.dotdotdot.debug=function(e){};var n=1,v=e.fn.html;e.fn.html=function(n){return n!=t&&!e.isFunction(n)&&this.data("dotdotdot")?this.trigger("update",[n]):v.apply(this,arguments)};var m=e.fn.text;e.fn.text=function(n){return n!=t&&!e.isFunction(n)&&this.data("dotdotdot")?(n=e("<div />").text(n).html(),this.trigger("update",[n])):m.apply(this,arguments)}})(jQuery),jQuery.extend({highlight:function(e,t,n,r){if(e.nodeType===3){var i=e.data.match(t);if(i){var s=document.createElement(n||"span");s.className=r||"highlight";var o=e.splitText(i.index);o.splitText(i[0].length);var u=o.cloneNode(!0);return s.appendChild(u),o.parentNode.replaceChild(s,o),1}}else if(e.nodeType===1&&e.childNodes&&!/(script|style)/i.test(e.tagName)&&(e.tagName!==n.toUpperCase()||e.className!==r))for(var a=0;a<e.childNodes.length;a++)a+=jQuery.highlight(e.childNodes[a],t,n,r);return 0}}),jQuery.fn.unhighlight=function(e){var t={className:"highlight",element:"span"};return jQuery.extend(t,e),this.find(t.element+"."+t.className).each(function(){var e=this.parentNode;e.replaceChild(this.firstChild,this),e.normalize()}).end()},jQuery.fn.highlight=function(e,t){var n={className:"highlight",element:"span",caseSensitive:!1,wordsOnly:!1};jQuery.extend(n,t),e.constructor===String&&(e=[e]),e=jQuery.grep(e,function(e,t){return e!=""}),e=jQuery.map(e,function(e,t){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")});if(e.length==0)return this;var r=n.caseSensitive?"":"i",i="("+e.join("|")+")";n.wordsOnly&&(i="\\b"+i+"\\b");var s=new RegExp(i,r);return this.each(function(){jQuery.highlight(this,s,n.element,n.className)})};var qq=function(e){"use strict";return{hide:function(){return e.style.display="none",this},attach:function(t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n),function(){qq(e).detach(t,n)}},detach:function(t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.attachEvent&&e.detachEvent("on"+t,n),this},contains:function(t){return e===t?!0:e.contains?e.contains(t):!!(t.compareDocumentPosition(e)&8)},insertBefore:function(t){return t.parentNode.insertBefore(e,t),this},remove:function(){return e.parentNode.removeChild(e),this},css:function(t){return t.opacity!=null&&typeof e.style.opacity!="string"&&typeof e.filters!="undefined"&&(t.filter="alpha(opacity="+Math.round(100*t.opacity)+")"),qq.extend(e.style,t),this},hasClass:function(t){var n=new RegExp("(^| )"+t+"( |$)");return n.test(e.className)},addClass:function(t){return qq(e).hasClass(t)||(e.className+=" "+t),this},removeClass:function(t){var n=new RegExp("(^| )"+t+"( |$)");return e.className=e.className.replace(n," ").replace(/^\s+|\s+$/g,""),this},getByClass:function(t){var n,r=[];return e.querySelectorAll?e.querySelectorAll("."+t):(n=e.getElementsByTagName("*"),qq.each(n,function(e,n){qq(n).hasClass(t)&&r.push(n)}),r)},children:function(){var t=[],n=e.firstChild;while(n)n.nodeType===1&&t.push(n),n=n.nextSibling;return t},setText:function(t){return e.innerText=t,e.textContent=t,this},clearText:function(){return qq(e).setText("")}}};qq.log=function(e,t){"use strict";window.console&&(!t||t==="info"?window.console.log(e):window.console[t]?window.console[t](e):window.console.log("<"+t+"> "+e))},qq.isObject=function(e){"use strict";return e&&!e.nodeType&&Object.prototype.toString.call(e)==="[object Object]"},qq.isFunction=function(e){"use strict";return typeof e=="function"},qq.isArray=function(e){"use strict";return Object.prototype.toString.call(e)==="[object Array]"},qq.isString=function(e){"use strict";return Object.prototype.toString.call(e)==="[object String]"},qq.trimStr=function(e){return String.prototype.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},qq.isFile=function(e){"use strict";return window.File&&Object.prototype.toString.call(e)==="[object File]"},qq.isFileList=function(e){return window.FileList&&Object.prototype.toString.call(e)==="[object FileList]"},qq.isFileOrInput=function(e){"use strict";return qq.isFile(e)||qq.isInput(e)},qq.isInput=function(e){return window.HTMLInputElement&&Object.prototype.toString.call(e)==="[object HTMLInputElement]"&&e.type&&e.type.toLowerCase()==="file"?!0:e.tagName&&e.tagName.toLowerCase()==="input"&&e.type&&e.type.toLowerCase()==="file"?!0:!1},qq.isBlob=function(e){"use strict";return window.Blob&&Object.prototype.toString.call(e)==="[object Blob]"},qq.isXhrUploadSupported=function(){"use strict";var e=document.createElement("input");return e.type="file",e.multiple!==undefined&&typeof File!="undefined"&&typeof FormData!="undefined"&&typeof (new XMLHttpRequest).upload!="undefined"},qq.isFolderDropSupported=function(e){"use strict";return e.items&&e.items[0].webkitGetAsEntry},qq.isFileChunkingSupported=function(){"use strict";return!qq.android()&&qq.isXhrUploadSupported()&&(File.prototype.slice!==undefined||File.prototype.webkitSlice!==undefined||File.prototype.mozSlice!==undefined)},qq.extend=function(e,t,n){"use strict";return qq.each(t,function(t,r){n&&qq.isObject(r)?(e[t]===undefined&&(e[t]={}),qq.extend(e[t],r,!0)):e[t]=r}),e},qq.indexOf=function(e,t,n){"use strict";if(e.indexOf)return e.indexOf(t,n);n=n||0;var r=e.length;n<0&&(n+=r);for(;n<r;n+=1)if(e.hasOwnProperty(n)&&e[n]===t)return n;return-1},qq.getUniqueId=function(){"use strict";return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)})},qq.ie=function(){"use strict";return navigator.userAgent.indexOf("MSIE")!==-1},qq.ie10=function(){"use strict";return navigator.userAgent.indexOf("MSIE 10")!==-1},qq.safari=function(){"use strict";return navigator.vendor!==undefined&&navigator.vendor.indexOf("Apple")!==-1},qq.chrome=function(){"use strict";return navigator.vendor!==undefined&&navigator.vendor.indexOf("Google")!==-1},qq.firefox=function(){"use strict";return navigator.userAgent.indexOf("Mozilla")!==-1&&navigator.vendor!==undefined&&navigator.vendor===""},qq.windows=function(){"use strict";return navigator.platform==="Win32"},qq.android=function(){"use strict";return navigator.userAgent.toLowerCase().indexOf("android")!==-1},qq.ios=function(){"use strict";return navigator.userAgent.indexOf("iPad")!==-1||navigator.userAgent.indexOf("iPod")!==-1||navigator.userAgent.indexOf("iPhone")!==-1},qq.preventDefault=function(e){"use strict";e.preventDefault?e.preventDefault():e.returnValue=!1},qq.toElement=function(){"use strict";var e=document.createElement("div");return function(t){e.innerHTML=t;var n=e.firstChild;return e.removeChild(n),n}}(),qq.each=function(e,t){"use strict";var n,r;if(e)if(qq.isArray(e))for(n=0;n<e.length;n++){r=t(n,e[n]);if(r===!1)break}else for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)){r=t(n,e[n]);if(r===!1)break}},qq.bind=function(e,t){if(qq.isFunction(e)){var n=Array.prototype.slice.call(arguments,2);return function(){return arguments.length&&(n=n.concat(Array.prototype.slice.call(arguments))),e.apply(t,n)}}throw new Error("first parameter must be a function!")},qq.obj2url=function(e,t,n){"use strict";var r,i,s=[],o="&",u=function(e,n){var r=t?/\[\]$/.test(t)?t:t+"["+n+"]":n;r!=="undefined"&&n!=="undefined"&&s.push(typeof e=="object"?qq.obj2url(e,r,!0):Object.prototype.toString.call(e)==="[object Function]"?encodeURIComponent(r)+"="+encodeURIComponent(e()):encodeURIComponent(r)+"="+encodeURIComponent(e))};if(!n&&t)o=/\?/.test(t)?/\?$/.test(t)?"":"&":"?",s.push(t),s.push(qq.obj2url(e));else if(Object.prototype.toString.call(e)==="[object Array]"&&typeof e!="undefined")for(r=-1,i=e.length;r<i;r+=1)u(e[r],r);else if(typeof e!="undefined"&&e!==null&&typeof e=="object")for(r in e)e.hasOwnProperty(r)&&u(e[r],r);else s.push(encodeURIComponent(t)+"="+encodeURIComponent(e));return t?s.join(o):s.join(o).replace(/^&/,"").replace(/%20/g,"+")},qq.obj2FormData=function(e,t,n){"use strict";return t||(t=new FormData),qq.each(e,function(e,r){e=n?n+"["+e+"]":e,qq.isObject(r)?qq.obj2FormData(r,t,e):qq.isFunction(r)?t.append(e,r()):t.append(e,r)}),t},qq.obj2Inputs=function(e,t){"use strict";var n;return t||(t=document.createElement("form")),qq.obj2FormData(e,{append:function(e,r){n=document.createElement("input"),n.setAttribute("name",e),n.setAttribute("value",r),t.appendChild(n)}}),t},qq.setCookie=function(e,t,n){var r=new Date,i="";n&&(r.setTime(r.getTime()+n*24*60*60*1e3),i="; expires="+r.toGMTString()),document.cookie=e+"="+t+i+"; path=/"},qq.getCookie=function(e){var t=e+"=",n=document.cookie.split(";"),r;return qq.each(n,function(e,n){var i=n;while(i.charAt(0)==" ")i=i.substring(1,i.length);if(i.indexOf(t)===0)return r=i.substring(t.length,i.length),!1}),r},qq.getCookieNames=function(e){var t=document.cookie.split(";"),n=[];return qq.each(t,function(t,r){r=qq.trimStr(r);var i=r.indexOf("=");r.match(e)&&n.push(r.substr(0,i))}),n},qq.deleteCookie=function(e){qq.setCookie(e,"",-1)},qq.areCookiesEnabled=function(){var e=Math.random()*1e5,t="qqCookieTest:"+e;return qq.setCookie(t,1),qq.getCookie(t)?(qq.deleteCookie(t),!0):!1},qq.parseJson=function(json){return window.JSON&&qq.isFunction(JSON.parse)?JSON.parse(json):eval("("+json+")")},qq.DisposeSupport=function(){"use strict";var e=[];return{dispose:function(){var t;do t=e.shift(),t&&t();while(t)},attach:function(){var e=arguments;this.addDisposer(qq(e[0]).attach.apply(this,Array.prototype.slice.call(arguments,1)))},addDisposer:function(t){e.push(t)}}},qq.version="-unstable-",qq.supportedFeatures=function(){function a(){var e=!0,t;try{t=document.createElement("input"),t.type="file",qq(t).hide(),t.disabled&&(e=!1)}catch(n){e=!1}return e}function f(){return qq.chrome()&&navigator.userAgent.match(/Chrome\/[2][1-9]|Chrome\/[3-9][0-9]/)!==undefined}function l(){return qq.chrome()&&navigator.userAgent.match(/Chrome\/[1][4-9]|Chrome\/[2-9][0-9]/)!==undefined}var e,t,n,r,i,s,o,u;return e=a(),t=e&&qq.isXhrUploadSupported(),n=t&&f(),r=t&&qq.isFileChunkingSupported(),i=t&&r&&qq.areCookiesEnabled(),s=t&&l(),o=e&&(window.postMessage!==undefined||t),u=t,{uploading:e,ajaxUploading:t,fileDrop:t,folderDrop:n,chunking:r,resume:i,uploadCustomHeaders:t,uploadNonMultipart:t,itemSizeValidation:t,uploadViaPaste:s,progressBar:t,uploadCors:o,deleteFileCors:u,canDetermineSize:t}}(),qq.Promise=function(){"use strict";var e,t,n=[],r=[],i=[],s=0;return{then:function(i,o){return s===0?(i&&n.push(i),o&&r.push(o)):s===-1&&o?o(t):i&&i(e),this},done:function(e){return s===0?i.push(e):e(),this},success:function(t){return s=1,e=t,n.length&&qq.each(n,function(e,n){n(t)}),i.length&&qq.each(i,function(e,t){t()}),this},failure:function(e){return s=-1,t=e,r.length&&qq.each(r,function(t,n){n(e)}),i.length&&qq.each(i,function(e,t){t()}),this}}},qq.isPromise=function(e){return e&&e.then&&e.done},qq.UploadButton=function(e){"use strict";function i(){var e=document.createElement("input");return r.multiple&&e.setAttribute("multiple","multiple"),r.acceptFiles&&e.setAttribute("accept",r.acceptFiles),e.setAttribute("type","file"),e.setAttribute("name",r.name),qq(e).css({position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:"118px",margin:0,padding:0,cursor:"pointer",opacity:0}),r.element.appendChild(e),n.attach(e,"change",function(){r.onChange(e)}),n.attach(e,"mouseover",function(){qq(r.element).addClass(r.hoverClass)}),n.attach(e,"mouseout",function(){qq(r.element).removeClass(r.hoverClass)}),n.attach(e,"focus",function(){qq(r.element).addClass(r.focusClass)}),n.attach(e,"blur",function(){qq(r.element).removeClass(r.focusClass)}),window.attachEvent&&e.setAttribute("tabIndex","-1"),e}var t,n=new qq.DisposeSupport,r={element:null,multiple:!1,acceptFiles:null,name:"file",onChange:function(e){},hoverClass:"qq-upload-button-hover",focusClass:"qq-upload-button-focus"};return qq.extend(r,e),qq(r.element).css({position:"relative",overflow:"hidden",direction:"ltr"}),t=i(),{getInput:function(){return t},reset:function(){t.parentNode&&qq(t).remove(),qq(r.element).removeClass(r.focusClass),t=i()}}},qq.UploadData=function(e){function o(e){if(qq.isArray(e)){var r=[];return qq.each(e,function(e,i){r.push(t[n[i]])}),r}return t[n[e]]}function u(e){if(qq.isArray(e)){var n=[];return qq.each(e,function(e,i){n.push(t[r[i]])}),n}return t[r[e]]}function a(e){var n=[],r=[].concat(e);return qq.each(r,function(e,r){var s=i[r];s!==undefined&&qq.each(s,function(e,r){n.push(t[r])})}),n}var t=[],n={},r={},i={},s;return s={added:function(s){var o=e.getUuid(s),u=e.getName(s),a=e.getSize(s),f=qq.status.SUBMITTING,l=t.push({id:s,name:u,uuid:o,size:a,status:f})-1;n[s]=l,r[o]=l,i[f]===undefined&&(i[f]=[]),i[f].push(l),e.onStatusChange(s,undefined,f)},retrieve:function(e){if(!qq.isObject(e)||!t.length)return qq.extend([],t,!0);if(e.id!==undefined)return o(e.id);if(e.uuid!==undefined)return u(e.uuid);if(e.status)return a(e.status)},reset:function(){t=[],n={},r={},i={}},setStatus:function(r,s){var o=n[r],u=t[o].status,a=qq.indexOf(i[u],o);i[u].splice(a,1),t[o].status=s,i[s]===undefined&&(i[s]=[]),i[s].push(o),e.onStatusChange(r,u,s)},uuidChanged:function(e,i){var s=n[e],o=t[s].uuid;t[s].uuid=i,r[i]=s,delete r[o]}},s},qq.status={SUBMITTING:"submitting",SUBMITTED:"submitted",REJECTED:"rejected",QUEUED:"queued",CANCELED:"canceled",UPLOADING:"uploading",UPLOAD_RETRYING:"retrying upload",UPLOAD_SUCCESSFUL:"upload successful",UPLOAD_FAILED:"upload failed",DELETE_FAILED:"delete failed",DELETING:"deleting",DELETED:"deleted"},qq.AjaxRequestor=function(e){"use strict";function o(e){var t=qq.indexOf(r,e),n=s.maxConnections,o;delete i[e],r.splice(t,1),r.length>=n&&t<n&&(o=r[n-1],a(o))}function u(e){var n=i[e].xhr,r=d(),u=!1;o(e),p(n.status)||(u=!0,t(r+" request for "+e+" has failed - response code "+n.status,"error")),s.onComplete(e,n,u)}function a(e){var r=new XMLHttpRequest,o=d(),u={},a;s.onSend(e),s.paramsStore.getParams&&(u=s.paramsStore.getParams(e)),a=f(e,u),i[e].xhr=r,r.onreadystatechange=l(e),r.open(o,a,!0),s.cors.expected&&s.cors.sendCredentials&&(r.withCredentials=!0),c(e),t("Sending "+o+" request for "+e),!n&&u?r.send(qq.obj2url(u,"")):r.send()}function f(e,t){var r=s.endpointStore.getEndpoint(e),o=i[e].addToPath;return o!==undefined&&(r+="/"+o),n&&t?qq.obj2url(t,r):r}function l(e){var t=i[e].xhr;return function(){t.readyState===4&&u(e,t)}}function c(e){var t=i[e].xhr,n=s.customHeaders;t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.setRequestHeader("Cache-Control","no-cache"),qq.each(n,function(e,n){t.setRequestHeader(e,n)})}function h(e){var n=i[e].xhr,r=d();return n?(n.onreadystatechange=null,n.abort(),o(e),t("Cancelled "+r+" for "+e),s.onCancel(e),!0):!1}function p(e){return qq.indexOf(s.successfulResponseCodes,e)>=0}function d(){return s.demoMode?"GET":s.method}var t,n,r=[],i=[],s={method:"POST",maxConnections:3,customHeaders:{},endpointStore:{},paramsStore:{},successfulResponseCodes:[200],demoMode:!1,cors:{expected:!1,sendCredentials:!1},log:function(e,t){},onSend:function(e){},onComplete:function(e,t,n){},onCancel:function(e){}};return qq.extend(s,e),t=s.log,n=d()==="GET"||d()==="DELETE",{send:function(e,t){i[e]={addToPath:t};var n=r.push(e);n<=s.maxConnections&&a(e)},cancel:function(e){return h(e)}}},qq.DeleteFileAjaxRequestor=function(e){"use strict";var t,n={endpointStore:{},maxConnections:3,customHeaders:{},paramsStore:{},demoMode:!1,cors:{expected:!1,sendCredentials:!1},log:function(e,t){},onDelete:function(e){},onDeleteComplete:function(e,t,n){}};return qq.extend(n,e),t=new qq.AjaxRequestor({method:"DELETE",endpointStore:n.endpointStore,paramsStore:n.paramsStore,maxConnections:n.maxConnections,customHeaders:n.customHeaders,successfulResponseCodes:[200,202,204],demoMode:n.demoMode,log:n.log,onSend:n.onDelete,onComplete:n.onDeleteComplete}),{sendDelete:function(e,r){t.send(e,r),n.log("Submitted delete file request for "+e)}}},qq.UploadHandler=function(e){"use strict";function o(e){var r=qq.indexOf(t,e),s=n.maxConnections,o;r>=0&&(t.splice(r,1),t.length>=s&&r<s&&(o=t[s-1],i.upload(o)))}function u(e){r("Cancelling "+e),n.paramsStore.remove(e),o(e)}var t=[],n,r,i,s;return n={debug:!1,forceMultipart:!0,paramsInBody:!1,paramsStore:{},endpointStore:{},cors:{expected:!1,sendCredentials:!1},maxConnections:3,uuidParamName:"qquuid",totalFileSizeParamName:"qqtotalfilesize",chunking:{enabled:!1,partSize:2e6,paramNames:{partIndex:"qqpartindex",partByteOffset:"qqpartbyteoffset",chunkSize:"qqchunksize",totalParts:"qqtotalparts",filename:"qqfilename"}},resume:{enabled:!1,id:null,cookiesExpireIn:7,paramNames:{resuming:"qqresume"}},blobs:{paramNames:{name:"qqblobname"}},log:function(e,t){},onProgress:function(e,t,n,r){},onComplete:function(e,t,n,r){},onCancel:function(e,t){},onUpload:function(e,t){},onUploadChunk:function(e,t,n){},onAutoRetry:function(e,t,n,r){},onResume:function(e,t,n){},onUuidChanged:function(e,t){}},qq.extend(n,e),r=n.log,qq.supportedFeatures.ajaxUploading?i=new qq.UploadHandlerXhr(n,o,n.onUuidChanged,r):i=new qq.UploadHandlerForm(n,o,n.onUuidChanged,r),s={add:function(e){return i.add(e)},upload:function(e){var r=t.push(e);return r<=n.maxConnections?(i.upload(e),!0):!1},retry:function(e){var n=qq.indexOf(t,e);return n>=0?i.upload(e,!0):this.upload(e)},cancel:function(e){var t=i.cancel(e);qq.isPromise(t)?t.then(function(){u(e)}):t!==!1&&u(e)},cancelAll:function(){var e=this,n=[];qq.extend(n,t),qq.each(n,function(t,n){e.cancel(n)}),t=[]},getName:function(e){return i.getName(e)},getSize:function(e){if(i.getSize)return i.getSize(e)},getFile:function(e){if(i.getFile)return i.getFile(e)},reset:function(){r("Resetting upload handler"),s.cancelAll(),t=[],i.reset()},expunge:function(e){return i.expunge(e)},getUuid:function(e){return i.getUuid(e)},isValid:function(e){return i.isValid(e)},getResumableFilesData:function(){return i.getResumableFilesData?i.getResumableFilesData():[]}},s},qq.WindowReceiveMessage=function(e){var t={log:function(e,t){}},n={};return qq.extend(t,e),{receiveMessage:function(e,t){var r=function(e){t(e.data)};window.postMessage?n[e]=qq(window).attach("message",r):log("iframe message passing not supported in this browser!","error")},stopReceivingMessages:function(e){if(window.postMessage){var t=n[e];t&&t()}}}},qq.UploadHandlerForm=function(e,t,n,r){"use strict";function v(e){u[e]!==undefined&&(u[e](),delete u[e])}function m(e,t){var n=e.id,r=x(n);h[o[r]]=t,u[r]=qq(e).attach("load",function(){s[r]&&(l("Received iframe load event for CORS upload request (iframe name "+n+")"),a[n]=setTimeout(function(){var e="No valid message received from loaded iframe for iframe name "+n;l(e,"error"),t({error:e})},1e3))}),c.receiveMessage(n,function(e){l("Received the following window message: '"+e+"'");var t=b(x(n),e),r=t.uuid,i;r&&h[r]?(l("Handling response for iframe name "+n),clearTimeout(a[n]),delete a[n],v(n),i=h[r],delete h[r],c.stopReceivingMessages(n),i(t)):r||l("'"+e+"' does not contain a UUID - ignoring.")})}function g(e,t){i.cors.expected?m(e,t):u[e.id]=qq(e).attach("load",function(){l("Received response for "+e.id);if(!e.parentNode)return;try{if(e.contentDocument&&e.contentDocument.body&&e.contentDocument.body.innerHTML=="false")return}catch(n){l("Error when attempting to access iframe during handling of upload response ("+n+")","error")}t()})}function y(e,t){var n;try{var r=t.contentDocument||t.contentWindow.document,i=r.body.innerHTML;l("converting iframe's innerHTML to JSON"),l("innerHTML = "+i),i&&i.match(/^<pre/i)&&(i=r.body.firstChild.firstChild.nodeValue),n=b(e,i)}catch(s){l("Error when attempting to parse form upload response ("+s+")","error"),n={success:!1}}return n}function b(e,t){var n;try{n=qq.parseJson(t),n.newUuid!==undefined&&(l("Server requested UUID change from '"+o[e]+"' to '"+n.newUuid+"'"),o[e]=n.newUuid,onUuidChanged(e,n.newUuid))}catch(r){l("Error when attempting to parse iframe upload response ("+r+")","error"),n={}}return n}function w(e){var t=T(e),n=qq.toElement('<iframe src="javascript:false;" name="'+t+'" />');return n.setAttribute("id",t),n.style.display="none",document.body.appendChild(n),n}function E
(e,t){var n=i.paramsStore.getParams(e),r=i.demoMode?"GET":"POST",s=qq.toElement('<form method="'+r+'" enctype="multipart/form-data"></form>'),u=i.endpointStore.getEndpoint(e),a=u;return n[i.uuidParamName]=o[e],i.paramsInBody?qq.obj2Inputs(n,s):a=qq.obj2url(n,u),s.setAttribute("action",a),s.setAttribute("target",t.name),s.style.display="none",document.body.appendChild(s),s}function S(e){delete s[e],delete o[e],delete u[e],i.cors.expected&&(clearTimeout(a[e]),delete a[e],c.stopReceivingMessages(e));var t=document.getElementById(T(e));t&&(t.setAttribute("src","java"+String.fromCharCode(115)+"cript:false;"),qq(t).remove())}function x(e){return e.split("_")[0]}function T(e){return e+"_"+p}var i=e,s=[],o=[],u={},a={},f=t,l=r,c=new qq.WindowReceiveMessage({log:l}),h={},p=qq.getUniqueId(),d;return d={add:function(e){e.setAttribute("name",i.inputName);var t=s.push(e)-1;return o[t]=qq.getUniqueId(),e.parentNode&&qq(e).remove(),t},getName:function(e){if(d.isValid(e))return s[e].value.replace(/.*(\/|\\)/,"");l(e+" is not a valid item ID.","error")},isValid:function(e){return s[e]!==undefined},reset:function(){s=[],o=[],u={},p=qq.getUniqueId()},expunge:function(e){return S(e)},getUuid:function(e){return o[e]},cancel:function(e){var t=i.onCancel(e,d.getName(e));return qq.isPromise(t)?t.then(function(){S(e)}):t!==!1?(S(e),!0):!1},upload:function(e){var t=s[e],n=d.getName(e),r=w(e),o;if(!t)throw new Error("file with passed id was not added, or already uploaded or cancelled");i.onUpload(e,d.getName(e)),o=E(e,r),o.appendChild(t),g(r,function(t){l("iframe loaded");var s=t?t:y(e,r);v(e),i.cors.expected||qq(r).remove();if(!s.success&&i.onAutoRetry(e,n,s))return;i.onComplete(e,n,s),f(e)}),l("Sending upload request for "+e),o.submit(),qq(o).remove()}},d},qq.UploadHandlerXhr=function(e,t,n,r){"use strict";function d(e,t,n){var r=p.getSize(e),s=p.getName(e);t[i.chunking.paramNames.partIndex]=n.part,t[i.chunking.paramNames.partByteOffset]=n.start,t[i.chunking.paramNames.chunkSize]=n.size,t[i.chunking.paramNames.totalParts]=n.count,t[i.totalFileSizeParamName]=r,h&&(t[i.chunking.paramNames.filename]=s)}function v(e){e[i.resume.paramNames.resuming]=!0}function m(e,t,n){if(e.slice)return e.slice(t,n);if(e.mozSlice)return e.mozSlice(t,n);if(e.webkitSlice)return e.webkitSlice(t,n)}function g(e,t){var n=i.chunking.partSize,r=p.getSize(e),s=u[e].file||u[e].blobData.blob,o=n*t,a=o+n>=r?r:o+n,f=y(e);return{part:t,start:o,end:a,count:f,blob:m(s,o,a),size:a-o}}function y(e){var t=p.getSize(e),n=i.chunking.partSize;return Math.ceil(t/n)}function b(e){var t=new XMLHttpRequest;return u[e].xhr=t,t}function w(e,t,n,r){var s=new FormData,o=i.demoMode?"GET":"POST",a=i.endpointStore.getEndpoint(r),f=a,l=p.getName(r),c=p.getSize(r),d=u[r].blobData;return e[i.uuidParamName]=u[r].uuid,h&&(e[i.totalFileSizeParamName]=c,d&&(e[i.blobs.paramNames.name]=d.name)),i.paramsInBody||(h||(e[i.inputName]=l),f=qq.obj2url(e,a)),t.open(o,f,!0),i.cors.expected&&i.cors.sendCredentials&&(t.withCredentials=!0),h?(i.paramsInBody&&qq.obj2FormData(e,s),s.append(i.inputName,n),s):n}function E(e,t){var n=i.customHeaders,r=u[e].file||u[e].blobData.blob;t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.setRequestHeader("Cache-Control","no-cache"),h||(t.setRequestHeader("Content-Type","application/octet-stream"),t.setRequestHeader("X-Mime-Type",r.type)),qq.each(n,function(e,n){t.setRequestHeader(e,n)})}function S(e,t,n){var r=p.getName(e),o=p.getSize(e);u[e].attemptingResume=!1,i.onProgress(e,r,o,o),i.onComplete(e,r,t,n),u[e]&&delete u[e].xhr,s(e)}function x(e){var t=u[e].remainingChunkIdxs[0],n=g(e,t),r=b(e),s=p.getSize(e),a=p.getName(e),f,c;u[e].loaded===undefined&&(u[e].loaded=0),l&&u[e].file&&H(e,n),r.onreadystatechange=P(e,r),r.upload.onprogress=function(n){if(n.lengthComputable){var r=n.loaded+u[e].loaded,s=T(e,t,n.total);i.onProgress(e,a,r,s)}},i.onUploadChunk(e,a,D(n)),c=i.paramsStore.getParams(e),d(e,c,n),u[e].attemptingResume&&v(c),f=w(c,r,n.blob,e),E(e,r),o("Sending chunked upload request for item "+e+": bytes "+(n.start+1)+"-"+n.end+" of "+s),r.send(f)}function T(e,t,n){var r=g(e,t),i=r.size,s=n-i,o=p.getSize(e),a=r.count,f=u[e].initialRequestOverhead,l=s-f;return u[e].lastRequestOverhead=s,t===0?(u[e].lastChunkIdxProgress=0,u[e].initialRequestOverhead=s,u[e].estTotalRequestsSize=o+a*s):u[e].lastChunkIdxProgress!==t&&(u[e].lastChunkIdxProgress=t,u[e].estTotalRequestsSize+=l),u[e].estTotalRequestsSize}function N(e){return h?u[e].lastRequestOverhead:0}function C(e,t,n){var r=u[e].remainingChunkIdxs.shift(),i=g(e,r);u[e].attemptingResume=!1,u[e].loaded+=i.size+N(e),u[e].remainingChunkIdxs.length>0?x(e):(l&&B(e),S(e,t,n))}function k(e,t){return e.status!==200||!t.success||t.reset}function L(e,t){var n;try{n=qq.parseJson(t.responseText),n.newUuid!==undefined&&(o("Server requested UUID change from '"+u[e].uuid+"' to '"+n.newUuid+"'"),u[e].uuid=n.newUuid,onUuidChanged(e,n.newUuid))}catch(r){o("Error when attempting to parse xhr response text ("+r+")","error"),n={}}return n}function A(e){o("Server has ordered chunking effort to be restarted on next attempt for item ID "+e,"error"),l&&(B(e),u[e].attemptingResume=!1),u[e].remainingChunkIdxs=[],delete u[e].loaded,delete u[e].estTotalRequestsSize,delete u[e].initialRequestOverhead}function O(e){u[e].attemptingResume=!1,o("Server has declared that it cannot handle resume for item ID "+e+" - starting from the first chunk","error"),A(e),p.upload(e,!0)}function M(e,t,n){var r=p.getName(e);if(i.onAutoRetry(e,r,t,n))return;S(e,t,n)}function _(e,t){var n;if(!u[e])return;o("xhr - server response received for "+e),o("responseText = "+t.responseText),n=L(e,t),k(t,n)?(n.reset&&A(e),u[e].attemptingResume&&n.reset?O(e):M(e,n,t)):f?C(e,n,t):S(e,n,t)}function D(e){return{partIndex:e.part,startByte:e.start+1,endByte:e.end,totalParts:e.count}}function P(e,t){return function(){t.readyState===4&&_(e,t)}}function H(e,t){var n=p.getUuid(e),r=u[e].loaded,s=u[e].initialRequestOverhead,o=u[e].estTotalRequestsSize,f=F(e),l=n+a+t.part+a+r+a+s+a+o,c=i.resume.cookiesExpireIn;qq.setCookie(f,l,c)}function B(e){if(u[e].file){var t=F(e);qq.deleteCookie(t)}}function j(e){var t=qq.getCookie(F(e)),n=p.getName(e),r,i,s,u,f,l;if(t){r=t.split(a);if(r.length===5)return i=r[0],s=parseInt(r[1],10),u=parseInt(r[2],10),f=parseInt(r[3],10),l=parseInt(r[4],10),{uuid:i,part:s,lastByteSent:u,initialRequestOverhead:f,estTotalRequestsSize:l};o("Ignoring previously stored resume/chunk cookie for "+n+" - old cookie format","warn")}}function F(e){var t=p.getName(e),n=p.getSize(e),r=i.chunking.partSize,s;return s="qqfilechunk"+a+encodeURIComponent(t)+a+n+a+r,c!==undefined&&(s+=a+c),s}function I(){if(i.resume.id!==null&&i.resume.id!==undefined&&!qq.isFunction(i.resume.id)&&!qq.isObject(i.resume.id))return i.resume.id}function q(e,t){var n;for(n=y(e)-1;n>=t;n-=1)u[e].remainingChunkIdxs.unshift(n);x(e)}function R(e,t,n,r){n=r.part,u[e].loaded=r.lastByteSent,u[e].estTotalRequestsSize=r.estTotalRequestsSize,u[e].initialRequestOverhead=r.initialRequestOverhead,u[e].attemptingResume=!0,o("Resuming "+t+" at partition index "+n),q(e,n)}function U(e,t,n){var r=p.getName(e),s=g(e,t.part),u;u=i.onResume(e,r,D(s)),qq.isPromise(u)?(o("Waiting for onResume promise to be fulfilled for "+e),u.then(function(){R(e,r,n,t)},function(){o("onResume promise fulfilled - failure indicated.  Will not resume."),q(e,n)})):u!==!1?R(e,r,n,t):(o("onResume callback returned false.  Will not resume."),q(e,n))}function z(e,t){var n=0,r;!u[e].remainingChunkIdxs||u[e].remainingChunkIdxs.length===0?(u[e].remainingChunkIdxs=[],l&&!t&&u[e].file?(r=j(e),r?U(e,r,n):q(e,n)):q(e,n)):x(e)}function W(e){var t=u[e].file||u[e].blobData.blob,n=p.getName(e),r,s,a;u[e].loaded=0,r=b(e),r.upload.onprogress=function(t){t.lengthComputable&&(u[e].loaded=t.loaded,i.onProgress(e,n,t.loaded,t.total))},r.onreadystatechange=P(e,r),s=i.paramsStore.getParams(e),a=w(s,r,t,e),E(e,r),o("Sending upload request for "+e),r.send(a)}function X(e){var t=u[e].xhr;t&&(t.onreadystatechange=null,t.abort()),l&&B(e),delete u[e]}var i=e,s=t,o=r,u=[],a="|",f=i.chunking.enabled&&qq.supportedFeatures.chunking,l=i.resume.enabled&&f&&qq.supportedFeatures.resume,c=I(),h=i.forceMultipart||i.paramsInBody,p;return p={add:function(e){var t,n,r=qq.getUniqueId();if(qq.isFile(e))t=u.push({file:e})-1;else{if(!qq.isBlob(e.blob))throw new Error("Passed obj in not a File or BlobData (in qq.UploadHandlerXhr)");t=u.push({blobData:e})-1}return l&&(n=j(t),n&&(r=n.uuid)),u[t].uuid=r,t},getName:function(e){if(p.isValid(e)){var t=u[e].file,n=u[e].blobData;return t?t.fileName!==null&&t.fileName!==undefined?t.fileName:t.name:n.name}o(e+" is not a valid item ID.","error")},getSize:function(e){var t=u[e].file||u[e].blobData.blob;return qq.isFileOrInput(t)?t.fileSize!=null?t.fileSize:t.size:t.size},getFile:function(e){if(u[e])return u[e].file||u[e].blobData.blob},isValid:function(e){return u[e]!==undefined},reset:function(){u=[]},expunge:function(e){return X(e)},getUuid:function(e){return u[e].uuid},upload:function(e,t){var n=this.getName(e);this.isValid(e)&&(i.onUpload(e,n),f?z(e,t):W(e))},cancel:function(e){var t=i.onCancel(e,this.getName(e));return qq.isPromise(t)?t.then(function(){X(e)}):t!==!1?(X(e),!0):!1},getResumableFilesData:function(){var e=[],t=[];return f&&l?(c===undefined?e=qq.getCookieNames(new RegExp("^qqfilechunk\\"+a+".+\\"+a+"\\d+\\"+a+i.chunking.partSize+"=")):e=qq.getCookieNames(new RegExp("^qqfilechunk\\"+a+".+\\"+a+"\\d+\\"+a+i.chunking.partSize+"\\"+a+c+"=")),qq.each(e,function(e,n){var r=n.split(a),i=qq.getCookie(n).split(a);t.push({name:decodeURIComponent(r[1]),size:r[2],uuid:i[0],partIdx:i[1]})}),t):[]}},p},qq.PasteSupport=function(e){"use strict";function r(e){return e.type&&e.type.indexOf("image/")===0}function i(){qq(t.targetElement).attach("paste",function(e){var n=e.clipboardData;n&&qq.each(n.items,function(e,n){if(r(n)){var i=n.getAsFile();t.callbacks.pasteReceived(i)}})})}function s(){n&&n()}var t,n;return t={targetElement:null,callbacks:{log:function(e,t){},pasteReceived:function(e){}}},qq.extend(t,e),i(),{reset:function(){s()}}},qq.FineUploaderBasic=function(e){this._options={debug:!1,button:null,multiple:!0,maxConnections:3,disableCancelForFormUploads:!1,autoUpload:!0,request:{endpoint:"/server/upload",params:{},paramsInBody:!0,customHeaders:{},forceMultipart:!0,inputName:"qqfile",uuidName:"qquuid",totalFileSizeName:"qqtotalfilesize"},validation:{allowedExtensions:[],sizeLimit:0,minSizeLimit:0,itemLimit:0,stopOnFirstInvalidFile:!0,acceptFiles:null},callbacks:{onSubmit:function(e,t){},onSubmitted:function(e,t){},onComplete:function(e,t,n,r){},onCancel:function(e,t){},onUpload:function(e,t){},onUploadChunk:function(e,t,n){},onResume:function(e,t,n){},onProgress:function(e,t,n,r){},onError:function(e,t,n,r){},onAutoRetry:function(e,t,n){},onManualRetry:function(e,t){},onValidateBatch:function(e){},onValidate:function(e){},onSubmitDelete:function(e){},onDelete:function(e){},onDeleteComplete:function(e,t,n){},onPasteReceived:function(e){},onStatusChange:function(e,t,n){}},messages:{typeError:"{file} has an invalid extension. Valid extension(s): {extensions}.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",emptyError:"{file} is empty, please select files again without it.",noFilesError:"No files to upload.",tooManyItemsError:"Too many items ({netItems}) would be uploaded.  Item limit is {itemLimit}.",retryFailTooManyItems:"Retry failed - you have reached your file limit.",onLeave:"The files are being uploaded, if you leave now the upload will be cancelled."},retry:{enableAuto:!1,maxAutoAttempts:3,autoAttemptDelay:5,preventRetryResponseProperty:"preventRetry"},classes:{buttonHover:"qq-upload-button-hover",buttonFocus:"qq-upload-button-focus"},chunking:{enabled:!1,partSize:2e6,paramNames:{partIndex:"qqpartindex",partByteOffset:"qqpartbyteoffset",chunkSize:"qqchunksize",totalFileSize:"qqtotalfilesize",totalParts:"qqtotalparts",filename:"qqfilename"}},resume:{enabled:!1,id:null,cookiesExpireIn:7,paramNames:{resuming:"qqresume"}},formatFileName:function(e){return e.length>33&&(e=e.slice(0,19)+"..."+e.slice(-14)),e},text:{defaultResponseError:"Upload failure reason unknown",sizeSymbols:["kB","MB","GB","TB","PB","EB"]},deleteFile:{enabled:!1,endpoint:"/server/upload",customHeaders:{},params:{}},cors:{expected:!1,sendCredentials:!1},blobs:{defaultName:"misc_data",paramNames:{name:"qqblobname"}},paste:{targetElement:null,defaultName:"pasted_image"},camera:{ios:!1}},qq.extend(this._options,e,!0),this._handleCameraAccess(),this._wrapCallbacks(),this._disposeSupport=new qq.DisposeSupport,this._filesInProgress=[],this._storedIds=[],this._autoRetries=[],this._retryTimeouts=[],this._preventRetries=[],this._netUploadedOrQueued=0,this._netUploaded=0,this._uploadData=this._createUploadDataTracker(),this._paramsStore=this._createParamsStore("request"),this._deleteFileParamsStore=this._createParamsStore("deleteFile"),this._endpointStore=this._createEndpointStore("request"),this._deleteFileEndpointStore=this._createEndpointStore("deleteFile"),this._handler=this._createUploadHandler(),this._deleteHandler=this._createDeleteHandler(),this._options.button&&(this._button=this._createUploadButton(this._options.button)),this._options.paste.targetElement&&(this._pasteHandler=this._createPasteHandler()),this._preventLeaveInProgress()},qq.FineUploaderBasic.prototype={log:function(e,t){this._options.debug&&(!t||t==="info")?qq.log("[FineUploader "+qq.version+"] "+e):t&&t!=="info"&&qq.log("[FineUploader "+qq.version+"] "+e,t)},setParams:function(e,t){t==null?this._options.request.params=e:this._paramsStore.setParams(e,t)},setDeleteFileParams:function(e,t){t==null?this._options.deleteFile.params=e:this._deleteFileParamsStore.setParams(e,t)},setEndpoint:function(e,t){t==null?this._options.request.endpoint=e:this._endpointStore.setEndpoint(e,t)},getInProgress:function(){return this._filesInProgress.length},getNetUploads:function(){return this._netUploaded},uploadStoredFiles:function(){"use strict";var e;while(this._storedIds.length)e=this._storedIds.shift(),this._filesInProgress.push(e),this._handler.upload(e)},clearStoredFiles:function(){this._storedIds=[]},retry:function(e){return this._onBeforeManualRetry(e)?(this._netUploadedOrQueued++,this._uploadData.setStatus(e,qq.status.UPLOAD_RETRYING),this._handler.retry(e),!0):!1},cancel:function(e){this._handler.cancel(e)},cancelAll:function(){var e=[],t=this;qq.extend(e,this._storedIds),qq.each(e,function(e,n){t.cancel(n)}),this._handler.cancelAll()},reset:function(){this.log("Resetting uploader..."),this._handler.reset(),this._filesInProgress=[],this._storedIds=[],this._autoRetries=[],this._retryTimeouts=[],this._preventRetries=[],this._button.reset(),this._paramsStore.reset(),this._endpointStore.reset(),this._netUploadedOrQueued=0,this._netUploaded=0,this._uploadData.reset(),this._pasteHandler&&this._pasteHandler.reset()},addFiles:function(e,t,n){var r=this,i=[],s,o,u;if(e){qq.isFileList(e)||(e=[].concat(e));for(s=0;s<e.length;s+=1){o=e[s];if(qq.isFileOrInput(o))if(qq.isInput(o)&&qq.supportedFeatures.ajaxUploading)for(u=0;u<o.files.length;u++)i.push(o.files[u]);else i.push(o);else r.log(o+" is not a File or INPUT element!  Ignoring!","warn")}this.log("Received "+i.length+" files or inputs."),this._prepareItemsForUpload(i,t,n)}},addBlobs:function(e,t,n){if(e){var r=[].concat(e),i=[],s=this;qq.each(r,function(e,t){qq.isBlob(t)&&!qq.isFileOrInput(t)?i.push({blob:t,name:s._options.blobs.defaultName}):qq.isObject(t)&&t.blob&&t.name?i.push(t):s.log("addBlobs: entry at index "+e+" is not a Blob or a BlobData object","error")}),this._prepareItemsForUpload(i,t,n)}else this.log("undefined or non-array parameter passed into addBlobs","error")},getUuid:function(e){return this._handler.getUuid(e)},getResumableFilesData:function(){return this._handler.getResumableFilesData()},getSize:function(e){return this._handler.getSize(e)},getName:function(e){return this._handler.getName(e)},getFile:function(e){return this._handler.getFile(e)},deleteFile:function(e){this._onSubmitDelete(e)},setDeleteFileEndpoint:function(e,t){t==null?this._options.deleteFile.endpoint=e:this._deleteFileEndpointStore.setEndpoint(e,t)},doesExist:function(e){return this._handler.isValid(e)},getUploads:function(e){return this._uploadData.retrieve(e)},_handleCheckedCallback:function(e){var t=this,n=e.callback();return qq.isPromise(n)?(this.log(e.name+" - waiting for "+e.name+" promise to be fulfilled for "+e.identifier),n.then(function(n){t.log(e.name+" promise success for "+e.identifier),e.onSuccess(n)},function(){e.onFailure?(t.log(e.name+" promise failure for "+e.identifier),e.onFailure()):t.log(e.name+" promise failure for "+e.identifier)})):(n!==!1?e.onSuccess(n):e.onFailure?(this.log(e.name+" - return value was 'false' for "+e.identifier+".  Invoking failure callback."),e.onFailure()):this.log(e.name+" - return value was 'false' for "+e.identifier+".  Will not proceed."),n)},_createUploadButton:function(e){var t=this,n=new qq.UploadButton({element:e,multiple:this._options.multiple&&qq.supportedFeatures.ajaxUploading,acceptFiles:this._options.validation.acceptFiles,onChange:function(e){t._onInputChange(e)},hoverClass:this._options.classes.buttonHover,focusClass:this._options.classes.buttonFocus});return this._disposeSupport.addDisposer(function(){n.dispose()}),n},_createUploadHandler:function(){var e=this;return new qq.UploadHandler({debug:this._options.debug,forceMultipart:this._options.request.forceMultipart,maxConnections:this._options.maxConnections,customHeaders:this._options.request.customHeaders,inputName:this._options.request.inputName,uuidParamName:this._options.request.uuidName,totalFileSizeParamName:this._options.request.totalFileSizeName,cors:this._options.cors,demoMode:this._options.demoMode,paramsInBody:this._options.request.paramsInBody,paramsStore:this._paramsStore,endpointStore:this._endpointStore,chunking:this._options.chunking,resume:this._options.resume,blobs:this._options.blobs,log:function(t,n){e.log(t,n)},onProgress:function(t,n,r,i){e._onProgress(t,n,r,i),e._options.callbacks.onProgress(t,n,r,i)},onComplete:function(t,n,r,i){e._onComplete(t,n,r,i),e._options.callbacks.onComplete(t,n,r,i)},onCancel:function(t,n){return e._handleCheckedCallback({name:"onCancel",callback:qq.bind(e._options.callbacks.onCancel,e,t,n),onSuccess:qq.bind(e._onCancel,e,t,n),identifier:t})},onUpload:function(t,n){e._onUpload(t,n),e._options.callbacks.onUpload(t,n)},onUploadChunk:function(t,n,r){e._options.callbacks.onUploadChunk(t,n,r)},onResume:function(t,n,r){return e._options.callbacks.onResume(t,n,r)},onAutoRetry:function(t,n,r,i){return e._preventRetries[t]=r[e._options.retry.preventRetryResponseProperty],e._shouldAutoRetry(t,n,r)?(e._maybeParseAndSendUploadError(t,n,r,i),e._options.callbacks.onAutoRetry(t,n,e._autoRetries[t]+1),e._onBeforeAutoRetry(t,n),e._retryTimeouts[t]=setTimeout(function(){e._onAutoRetry(t,n,r)},e._options.retry.autoAttemptDelay*1e3),!0):!1},onUuidChanged:function(t,n){e._uploadData.uuidChanged(t,n)}})},_createDeleteHandler:function(){var e=this;return new qq.DeleteFileAjaxRequestor({maxConnections:this._options.maxConnections,customHeaders:this._options.deleteFile.customHeaders,paramsStore:this._deleteFileParamsStore,endpointStore:this._deleteFileEndpointStore,demoMode:this._options.demoMode,cors:this._options.cors,log:function(t,n){e.log(t,n)},onDelete:function(t){e._onDelete(t),e._options.callbacks.onDelete(t)},onDeleteComplete:function(t,n,r){e._onDeleteComplete(t,n,r),e._options.callbacks.onDeleteComplete(t,n,r)}})},_createPasteHandler:function(){var e=this;return new qq.PasteSupport({targetElement:this._options.paste.targetElement,callbacks:{log:function(t,n){e.log(t,n)},pasteReceived:function(t){e._handleCheckedCallback({name:"onPasteReceived",callback:qq.bind(e._options.callbacks.onPasteReceived,e,t),onSuccess:qq.bind(e._handlePasteSuccess,e,t),identifier:"pasted image"})}}})},_createUploadDataTracker:function(){var e=this;return new qq.UploadData({getName:function(t){return e.getName(t)},getUuid:function(t){return e.getUuid(t)},getSize:function(t){return e.getSize(t)},onStatusChange:function(t,n,r){e._options.callbacks.onStatusChange(t,n,r)}})},_handlePasteSuccess:function(e,t){var n=e.type.split("/")[1],r=t;r==null&&(r=this._options.paste.defaultName),r+="."+n,this.addBlobs({name:r,blob:e})},_preventLeaveInProgress:function(){var e=this;this._disposeSupport.attach(window,"beforeunload",function(t){if(!e._filesInProgress.length)return;var t=t||window.event;return t.returnValue=e._options.messages.onLeave,e._options.messages.onLeave})},_onSubmit:function(e,t){this._netUploadedOrQueued++,this._options.autoUpload&&this._filesInProgress.push(e)},_onProgress:function(e,t,n,r){},_onComplete:function(e,t,n,r){n.success?(this._uploadData.setStatus(e,qq.status.UPLOAD_SUCCESSFUL),this._netUploaded++):(this._uploadData.setStatus(e,qq.status.UPLOAD_FAILED),this._netUploadedOrQueued--),this._removeFromFilesInProgress(e),this._maybeParseAndSendUploadError(e,t,n,r)},_onCancel:function(e,t){this._uploadData.setStatus(e,qq.status.CANCELED),this._netUploadedOrQueued--,this._removeFromFilesInProgress(e),clearTimeout(this._retryTimeouts[e]);var n=qq.indexOf(this._storedIds,e);!this._options.autoUpload&&n>=0&&this._storedIds.splice(n,1)},_isDeletePossible:function(){return this._options.deleteFile.enabled&&(!this._options.cors.expected||qq.supportedFeatures.deleteFileCors)},_onSubmitDelete:function(e,t){return this._isDeletePossible()?this._handleCheckedCallback({name:"onSubmitDelete",callback:qq.bind(this._options.callbacks.onSubmitDelete,this,e),onSuccess:t||qq.bind(this._deleteHandler.sendDelete,this,e,this.getUuid(e)),identifier:e}):(this.log("Delete request ignored for ID "+e+", delete feature is disabled or request not possible "+"due to CORS on a user agent that does not support pre-flighting.","warn"),!1)},_onDelete:function(e){this._uploadData.setStatus(e,qq.status.DELETING)},_onDeleteComplete:function(e,t,n){var r=this._handler.getName(e);n?(this._uploadData.setStatus(e,qq.status.DELETE_FAILED),this.log("Delete request for '"+r+"' has failed.","error"),this._options.callbacks.onError(e,r,"Delete request failed with response code "+t.status,t)):(this._uploadData.setStatus(e,qq.status.DELETED),this._netUploadedOrQueued--,this._netUploaded--,this._handler.expunge(e),this.log("Delete request for '"+r+"' has succeeded."))},_removeFromFilesInProgress:function(e){var t=qq.indexOf(this._filesInProgress,e);t>=0&&this._filesInProgress.splice(t,1)},_onUpload:function(e,t){this._uploadData.setStatus(e,qq.status.UPLOADING)},_onInputChange:function(e){qq.supportedFeatures.ajaxUploading?this.addFiles(e.files):this.addFiles(e),this._button.reset()},_onBeforeAutoRetry:function(e,t){this.log("Waiting "+this._options.retry.autoAttemptDelay+" seconds before retrying "+t+"...")},_onAutoRetry:function(e,t,n){this.log("Retrying "+t+"..."),this._autoRetries[e]++,this._uploadData.setStatus(e,qq.status.UPLOAD_RETRYING),this._handler.retry(e)},_shouldAutoRetry:function(e,t,n){return!this._preventRetries[e]&&this._options.retry.enableAuto?(this._autoRetries[e]===undefined&&(this._autoRetries[e]=0),this._autoRetries[e]<this._options.retry.maxAutoAttempts):!1},_onBeforeManualRetry:function(e){var t=this._options.validation.itemLimit;if(this._preventRetries[e])return this.log("Retries are forbidden for id "+e,"warn"),!1;if(this._handler.isValid(e)){var n=this._handler.getName(e);return this._options.callbacks.onManualRetry(e,n)===!1?!1:t>0&&this._netUploadedOrQueued+1>t?(this._itemError("retryFailTooManyItems",""),!1):(this.log("Retrying upload for '"+n+"' (id: "+e+")..."),this._filesInProgress.push(e),!0)}return this.log("'"+e+"' is not a valid file ID","error"),!1},_maybeParseAndSendUploadError:function(e,t,n,r){if(!n.success)if(r&&r.status!==200&&!n.error)this._options.callbacks.onError(e,t,"XHR returned response code "+r.status,r);else{var i=n.error?n.error:this._options.text.defaultResponseError;this._options.callbacks.onError(e,t,i,r)}},_prepareItemsForUpload:function(e,t,n){var r=this._getValidationDescriptors(e);this._handleCheckedCallback({name:"onValidateBatch",callback:qq.bind(this._options.callbacks.onValidateBatch,this,r),onSuccess:qq.bind(this._onValidateBatchCallbackSuccess,this,r,e,t,n),identifier:"batch validation"})},_upload:function(e,t,n){var r=this._handler.add(e),i=this._handler.getName(r);this._uploadData.added(r),t&&this.setParams(t,r),n&&this.setEndpoint(n,r),this._handleCheckedCallback({name:"onSubmit",callback:qq.bind(this._options.callbacks.onSubmit,this,r,i),onSuccess:qq.bind(this._onSubmitCallbackSuccess,this,r,i),onFailure:qq.bind(this._fileOrBlobRejected,this,r,i),identifier:r})},_onSubmitCallbackSuccess:function(e,t){this._uploadData.setStatus(e,qq.status.SUBMITTED),this._onSubmit(e,t),this._options.callbacks.onSubmitted(e,t),this._options.autoUpload?this._handler.upload(e)||this._uploadData.setStatus(e,qq.status.QUEUED):this._storeForLater(e)},_storeForLater:function(e){this._storedIds.push(e)},_onValidateBatchCallbackSuccess:function(e,t,n,r){var i,s=this._options.validation.itemLimit,o=this._netUploadedOrQueued+e.length;s===0||o<=s?t.length>0?this._handleCheckedCallback({name:"onValidate",callback:qq.bind(this._options.callbacks.onValidate,this,t[0]),onSuccess:qq.bind(this._onValidateCallbackSuccess,this,t,0,n,r),onFailure:qq.bind(this._onValidateCallbackFailure,this,t,0,n,r),identifier:"Item '"+t[0].name+"', size: "+t[0].size}):this._itemError("noFilesError",""):(i=this._options.messages.tooManyItemsError.replace(/\{netItems\}/g,o).replace(/\{itemLimit\}/g,s),this._batchError(i))},_onValidateCallbackSuccess:function(e,t,n,r){var i=t+1,s=this._getValidationDescriptor(e[t]),o=!1;this._validateFileOrBlobData(e[t],s)&&(o=!0,this._upload(e[t],n,r)),this._maybeProcessNextItemAfterOnValidateCallback(o,e,i,n,r)},_onValidateCallbackFailure:function(e,t,n,r){var i=t+1;this._fileOrBlobRejected(undefined,e[0].name),this._maybeProcessNextItemAfterOnValidateCallback(!1,e,i,n,r)},_maybeProcessNextItemAfterOnValidateCallback:function(e,t,n,r,i){var s=this;t.length>n&&(e||!this._options.validation.stopOnFirstInvalidFile)&&setTimeout(function(){var e=s._getValidationDescriptor(t[n]);s._handleCheckedCallback({name:"onValidate",callback:qq.bind(s._options.callbacks.onValidate,s,t[n]),onSuccess:qq.bind(s._onValidateCallbackSuccess,s,t,n,r,i),onFailure:qq.bind(s._onValidateCallbackFailure,s,t,n,r,i),identifier:"Item '"+e.name+"', size: "+e.size})},0)},_validateFileOrBlobData:function(e,t){var n=t.name,r=t.size,i=!0;return this._options.callbacks.onValidate(t)===!1&&(i=!1),qq.isFileOrInput(e)&&!this._isAllowedExtension(n)?(this._itemError("typeError",n),i=!1):r===0?(this._itemError("emptyError",n),i=!1):r&&this._options.validation.sizeLimit&&r>this._options.validation.sizeLimit?(this._itemError("sizeError",n),i=!1):r&&r<this._options.validation.minSizeLimit&&(this._itemError("minSizeError",n),i=!1),i||this._fileOrBlobRejected(undefined,n),i},_fileOrBlobRejected:function(e,t){e!==undefined&&this._uploadData.setStatus(e,qq.status.REJECTED)},_itemError:function(e,t){function a(e,t){n=n.replace(e,t)}var n=this._options.messages[e],r=[],i=[].concat(t),s=i[0],o,u;return qq.each(this._options.validation.allowedExtensions,function(e,t){qq.isString(t)&&r.push(t)}),o=r.join(", ").toLowerCase(),a("{file}",this._options.formatFileName(s)),a("{extensions}",o),a("{sizeLimit}",this._formatSize(this._options.validation.sizeLimit)),a("{minSizeLimit}",this._formatSize(this._options.validation.minSizeLimit)),u=n.match(/(\{\w+\})/g),u!==null&&qq.each(u,function(e,t){a(t,i[e])}),this._options.callbacks.onError(null,s,n,undefined),n},_batchError:function(e){this._options.callbacks.onError(null,null,e,undefined)},_isAllowedExtension:function(e){var t=this._options.validation.allowedExtensions,n=!1;return t.length?(qq.each(t,function(t,r){if(qq.isString(r)){var i=new RegExp("\\."+r+"$","i");if(e.match(i)!=null)return n=!0,!1}}),n):!0},_formatSize:function(e){var t=-1;do e/=1e3,t++;while(e>999);return Math.max(e,.1).toFixed(1)+this._options.text.sizeSymbols[t]},_wrapCallbacks:function(){var e,t;e=this,t=function(t,n,r){try{return n.apply(e,r)}catch(i){e.log("Caught exception in '"+t+"' callback - "+i.message,"error")}};for(var n in this._options.callbacks)(function(){var r,i;r=n,i=e._options.callbacks[r],e._options.callbacks[r]=function(){return t(r,i,arguments)}})()},_parseFileOrBlobDataName:function(e){var t;return qq.isFileOrInput(e)?e.value?t=e.value.replace(/.*(\/|\\)/,""):t=e.fileName!==null&&e.fileName!==undefined?e.fileName:e.name:t=e.name,t},_parseFileOrBlobDataSize:function(e){var t;return qq.isFileOrInput(e)?e.value||(t=e.fileSize!==null&&e.fileSize!==undefined?e.fileSize:e.size):t=e.blob.size,t},_getValidationDescriptor:function(e){var t,n,r;return r={},t=this._parseFileOrBlobDataName(e),n=this._parseFileOrBlobDataSize(e),r.name=t,n!==undefined&&(r.size=n),r},_getValidationDescriptors:function(e){var t=this,n=[];return qq.each(e,function(e,r){n.push(t._getValidationDescriptor(r))}),n},_createParamsStore:function(e){var t={},n=this;return{setParams:function(e,n){var r={};qq.extend(r,e),t[n]=r},getParams:function(r){var i={};return r!=null&&t[r]?qq.extend(i,t[r]):qq.extend(i,n._options[e].params),i},remove:function(e){return delete t[e]},reset:function(){t={}}}},_createEndpointStore:function(e){var t={},n=this;return{setEndpoint:function(e,n){t[n]=e},getEndpoint:function(r){return r!=null&&t[r]?t[r]:n._options[e].endpoint},remove:function(e){return delete t[e]},reset:function(){t={}}}},_handleCameraAccess:function(){this._options.camera.ios&&qq.ios()&&(this._options.multiple=!1,this._options.validation.acceptFiles===null?this._options.validation.acceptFiles="image/*;capture=camera":this._options.validation.acceptFiles+=",image/*;capture=camera")}},qq.DragAndDrop=function(e){"use strict";function s(e){t.callbacks.dropLog("Grabbed "+e.length+" dropped files."),n.dropDisabled(!1),t.callbacks.processingDroppedFilesComplete(e)}function o(e){var n,i,s=new qq.Promise;return e.isFile?e.file(function(e){r.push(e),s.success()},function(n){t.callbacks.dropLog("Problem parsing '"+e.fullPath+"'.  FileError code "+n.code+".","error"),s.failure()}):e.isDirectory&&(n=e.createReader(),n.readEntries(function(e){var t=e.length;for(i=0;i<e.length;i+=1)o(e[i]).done(function(){t-=1,t===0&&s.success()});e.length||s.success()},function(n){t.callbacks.dropLog("Problem parsing '"+e.fullPath+"'.  FileError code "+n.code+".","error"),s.failure()})),s}function u(e){var i,s,u,a=[],f=new qq.Promise;t.callbacks.processingDroppedFiles(),n.dropDisabled(!0);if(e.files.length>1&&!t.allowMultipleItems)t.callbacks.processingDroppedFilesComplete([]),t.callbacks.dropError("tooManyFilesError",""),n.dropDisabled(!1),f.failure();else{r=[];if(qq.isFolderDropSupported(e)){s=e.items;for(i=0;i<s.length;i+=1)u=s[i].webkitGetAsEntry(),u&&(u.isFile?r.push(s[i].getAsFile()):a.push(o(u).done(function(){a.pop(),a.length===0&&f.success()})))}else r=e.files;a.length===0&&f.success()}return f}function a(e){n=new qq.UploadDropZone({element:e,onEnter:function(n){qq(e).addClass(t.classes.dropActive),n.stopPropagation()},onLeaveNotDescendants:function(n){qq(e).removeClass(t.classes.dropActive)},onDrop:function(n){t.hideDropZonesBeforeEnter&&qq(e).hide(),qq(e).removeClass(t.classes.dropActive),u(n.dataTransfer).done(function(){s(r)})}}),i.addDisposer(function(){n.dispose()}),t.hideDropZonesBeforeEnter&&qq(e).hide()}function f(e){var t;return qq.each(e.dataTransfer.types,function(e,n){if(n==="Files")return t=!0,!1}),t}function l(){var e=t.dropZoneElements;qq.each(e,function(e,t){a(t)}),e.length&&(!qq.ie()||qq.ie10())&&i.attach(document,"dragenter",function(t){!n.dropDisabled()&&f(t)&&qq.each(e,function(e,t){qq(t).css({display:"block"})})}),i.attach(document,"dragleave",function(n){t.hideDropZonesBeforeEnter&&qq.FineUploader.prototype._leaving_document_out(n)&&qq.each(e,function(e,t){qq(t).hide()})}),i.attach(document,"drop",function(n){t.hideDropZonesBeforeEnter&&qq.each(e,function(e,t){qq(t).hide()}),n.preventDefault()})}var t,n,r=[],i=new qq.DisposeSupport;return t={dropZoneElements:[],hideDropZonesBeforeEnter:!1,allowMultipleItems:!0,classes:{dropActive:null},callbacks:new qq.DragAndDrop.callbacks},qq.extend(t,e,!0),l(),{setupExtraDropzone:function(e){t.dropZoneElements.push(e),a(e)},removeDropzone:function(e){var n,r=t.dropZoneElements;for(n in r)if(r[n]===e)return r.splice(n,1)},dispose:function(){i.dispose(),n.dispose()}}},qq.DragAndDrop.callbacks=function(){return{processingDroppedFiles:function(){},processingDroppedFilesComplete:function(e){},dropError:function(e,t){qq.log("Drag & drop error code '"+
        e+" with these specifics: '"+t+"'","error")},dropLog:function(e,t){qq.log(e,t)}}},qq.UploadDropZone=function(e){"use strict";function o(){return qq.safari()||qq.firefox()&&qq.windows()}function u(e){i||(o?s.attach(document,"dragover",function(e){e.preventDefault()}):s.attach(document,"dragover",function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="none",e.preventDefault())}),i=!0)}function a(e){if(qq.ie()&&!qq.ie10())return!1;var t,n=e.dataTransfer,r=qq.safari();return t=qq.ie10()?!0:n.effectAllowed!=="none",n&&t&&(n.files||!r&&n.types.contains&&n.types.contains("Files"))}function f(e){return e!==undefined&&(r=e),r}function l(){s.attach(n,"dragover",function(e){if(!a(e))return;var t=qq.ie()?null:e.dataTransfer.effectAllowed;t==="move"||t==="linkMove"?e.dataTransfer.dropEffect="move":e.dataTransfer.dropEffect="copy",e.stopPropagation(),e.preventDefault()}),s.attach(n,"dragenter",function(e){if(!f()){if(!a(e))return;t.onEnter(e)}}),s.attach(n,"dragleave",function(e){if(!a(e))return;t.onLeave(e);var n=document.elementFromPoint(e.clientX,e.clientY);if(qq(this).contains(n))return;t.onLeaveNotDescendants(e)}),s.attach(n,"drop",function(e){if(!f()){if(!a(e))return;e.preventDefault(),t.onDrop(e)}})}var t,n,r,i,s=new qq.DisposeSupport;return t={element:null,onEnter:function(e){},onLeave:function(e){},onLeaveNotDescendants:function(e){},onDrop:function(e){}},qq.extend(t,e),n=t.element,u(),l(),{dropDisabled:function(e){return f(e)},dispose:function(){s.dispose()}}},qq.FineUploader=function(e){qq.FineUploaderBasic.apply(this,arguments),qq.extend(this._options,{element:null,listElement:null,dragAndDrop:{extraDropzones:[],hideDropzones:!0,disableDefaultDropzone:!1},text:{uploadButton:"Upload a file",cancelButton:"Cancel",retryButton:"Retry",deleteButton:"Delete",failUpload:"Upload failed",dragZone:"Drop files here to upload",dropProcessing:"Processing dropped files...",formatProgress:"{percent}% / {total_size}",waitingForResponse:"Processing..."},template:'<div class="qq-uploader">'+(!this._options.dragAndDrop||!this._options.dragAndDrop.disableDefaultDropzone?'<div class="qq-upload-drop-area"><span>{dragZoneText}</span></div>':"")+(this._options.button?"":'<div class="qq-upload-button"><div>{uploadButtonText}</div></div>')+'<span class="qq-drop-processing"><span>{dropProcessingText}</span><span class="qq-drop-processing-spinner"></span></span>'+(this._options.listElement?"":'<ul class="qq-upload-list"></ul>')+"</div>",fileTemplate:'<li><div class="qq-progress-bar"></div><span class="qq-upload-spinner"></span><span class="qq-upload-finished"></span><span class="qq-upload-file"></span><span class="qq-upload-size"></span><a class="qq-upload-cancel" href="#">{cancelButtonText}</a><a class="qq-upload-retry" href="#">{retryButtonText}</a><a class="qq-upload-delete" href="#">{deleteButtonText}</a><span class="qq-upload-status-text">{statusText}</span></li>',classes:{button:"qq-upload-button",drop:"qq-upload-drop-area",dropActive:"qq-upload-drop-area-active",list:"qq-upload-list",progressBar:"qq-progress-bar",file:"qq-upload-file",spinner:"qq-upload-spinner",finished:"qq-upload-finished",retrying:"qq-upload-retrying",retryable:"qq-upload-retryable",size:"qq-upload-size",cancel:"qq-upload-cancel",deleteButton:"qq-upload-delete",retry:"qq-upload-retry",statusText:"qq-upload-status-text",success:"qq-upload-success",fail:"qq-upload-fail",successIcon:null,failIcon:null,dropProcessing:"qq-drop-processing",dropProcessingSpinner:"qq-drop-processing-spinner"},failedUploadTextDisplay:{mode:"default",maxChars:50,responseProperty:"error",enableTooltip:!0},messages:{tooManyFilesError:"You may only drop one file",unsupportedBrowser:"Unrecoverable error - this browser does not permit file uploading of any kind."},retry:{showAutoRetryNote:!0,autoRetryNote:"Retrying {retryNum}/{maxAuto}...",showButton:!1},deleteFile:{forceConfirm:!1,confirmMessage:"Are you sure you want to delete {filename}?",deletingStatusText:"Deleting...",deletingFailedText:"Delete failed"},display:{fileSizeOnSubmit:!1,prependFiles:!1},paste:{promptForName:!1,namePromptMessage:"Please name this image"},showMessage:function(e){setTimeout(function(){window.alert(e)},0)},showConfirm:function(e,t,n){setTimeout(function(){var r=window.confirm(e);r?t():n&&n()},0)},showPrompt:function(e,t){var n=new qq.Promise,r=window.prompt(e,t);return r!=null&&qq.trimStr(r).length>0?n.success(r):n.failure("Undefined or invalid user-supplied value."),n}},!0),qq.extend(this._options,e,!0),!qq.supportedFeatures.uploading||this._options.cors.expected&&!qq.supportedFeatures.uploadCors?this._options.element.innerHTML="<div>"+this._options.messages.unsupportedBrowser+"</div>":(this._wrapCallbacks(),this._options.template=this._options.template.replace(/\{dragZoneText\}/g,this._options.text.dragZone),this._options.template=this._options.template.replace(/\{uploadButtonText\}/g,this._options.text.uploadButton),this._options.template=this._options.template.replace(/\{dropProcessingText\}/g,this._options.text.dropProcessing),this._options.fileTemplate=this._options.fileTemplate.replace(/\{cancelButtonText\}/g,this._options.text.cancelButton),this._options.fileTemplate=this._options.fileTemplate.replace(/\{retryButtonText\}/g,this._options.text.retryButton),this._options.fileTemplate=this._options.fileTemplate.replace(/\{deleteButtonText\}/g,this._options.text.deleteButton),this._options.fileTemplate=this._options.fileTemplate.replace(/\{statusText\}/g,""),this._element=this._options.element,this._element.innerHTML=this._options.template,this._listElement=this._options.listElement||this._find(this._element,"list"),this._classes=this._options.classes,this._button||(this._button=this._createUploadButton(this._find(this._element,"button"))),this._bindCancelAndRetryEvents(),this._dnd=this._setupDragAndDrop(),this._options.paste.targetElement&&this._options.paste.promptForName&&this._setupPastePrompt(),this._totalFilesInBatch=0,this._filesInBatchAddedToUi=0)},qq.extend(qq.FineUploader.prototype,qq.FineUploaderBasic.prototype),qq.extend(qq.FineUploader.prototype,{clearStoredFiles:function(){qq.FineUploaderBasic.prototype.clearStoredFiles.apply(this,arguments),this._listElement.innerHTML=""},addExtraDropzone:function(e){this._dnd.setupExtraDropzone(e)},removeExtraDropzone:function(e){return this._dnd.removeDropzone(e)},getItemByFileId:function(e){var t=this._listElement.firstChild;while(t){if(t.qqFileId==e)return t;t=t.nextSibling}},reset:function(){qq.FineUploaderBasic.prototype.reset.apply(this,arguments),this._element.innerHTML=this._options.template,this._listElement=this._options.listElement||this._find(this._element,"list"),this._options.button||(this._button=this._createUploadButton(this._find(this._element,"button"))),this._bindCancelAndRetryEvents(),this._dnd.dispose(),this._dnd=this._setupDragAndDrop(),this._totalFilesInBatch=0,this._filesInBatchAddedToUi=0},_removeFileItem:function(e){var t=this.getItemByFileId(e);qq(t).remove()},_setupDragAndDrop:function(){var e=this,t=this._find(this._element,"dropProcessing"),n=this._options.dragAndDrop.extraDropzones,r;return r=function(e){e.preventDefault()},this._options.dragAndDrop.disableDefaultDropzone||n.push(this._find(this._options.element,"drop")),new qq.DragAndDrop({dropZoneElements:n,hideDropZonesBeforeEnter:this._options.dragAndDrop.hideDropzones,allowMultipleItems:this._options.multiple,classes:{dropActive:this._options.classes.dropActive},callbacks:{processingDroppedFiles:function(){var n=e._button.getInput();qq(t).css({display:"block"}),qq(n).attach("click",r)},processingDroppedFilesComplete:function(n){var i=e._button.getInput();qq(t).hide(),qq(i).detach("click",r),n&&e.addFiles(n)},dropError:function(t,n){e._itemError(t,n)},dropLog:function(t,n){e.log(t,n)}}})},_leaving_document_out:function(e){return(qq.chrome()||qq.safari()&&qq.windows())&&e.clientX==0&&e.clientY==0||qq.firefox()&&!e.relatedTarget},_storeForLater:function(e){qq.FineUploaderBasic.prototype._storeForLater.apply(this,arguments);var t=this.getItemByFileId(e);qq(this._find(t,"spinner")).hide()},_find:function(e,t){var n=qq(e).getByClass(this._options.classes[t])[0];if(!n)throw new Error("element not found "+t);return n},_onSubmit:function(e,t){qq.FineUploaderBasic.prototype._onSubmit.apply(this,arguments),this._addToList(e,t)},_onProgress:function(e,t,n,r){qq.FineUploaderBasic.prototype._onProgress.apply(this,arguments);var i,s,o,u;i=this.getItemByFileId(e),s=this._find(i,"progressBar"),o=Math.round(n/r*100),n===r?(u=this._find(i,"cancel"),qq(u).hide(),qq(s).hide(),qq(this._find(i,"statusText")).setText(this._options.text.waitingForResponse),this._displayFileSize(e)):(this._displayFileSize(e,n,r),qq(s).css({display:"block"})),qq(s).css({width:o+"%"})},_onComplete:function(e,t,n,r){qq.FineUploaderBasic.prototype._onComplete.apply(this,arguments);var i=this.getItemByFileId(e);qq(this._find(i,"statusText")).clearText(),qq(i).removeClass(this._classes.retrying),qq(this._find(i,"progressBar")).hide(),(!this._options.disableCancelForFormUploads||qq.supportedFeatures.ajaxUploading)&&qq(this._find(i,"cancel")).hide(),qq(this._find(i,"spinner")).hide(),n.success?(this._isDeletePossible()&&this._showDeleteLink(e),qq(i).addClass(this._classes.success),this._classes.successIcon&&(this._find(i,"finished").style.display="inline-block",qq(i).addClass(this._classes.successIcon))):(qq(i).addClass(this._classes.fail),this._classes.failIcon&&(this._find(i,"finished").style.display="inline-block",qq(i).addClass(this._classes.failIcon)),this._options.retry.showButton&&!this._preventRetries[e]&&qq(i).addClass(this._classes.retryable),this._controlFailureTextDisplay(i,n))},_onUpload:function(e,t){qq.FineUploaderBasic.prototype._onUpload.apply(this,arguments),this._showSpinner(e)},_onCancel:function(e,t){qq.FineUploaderBasic.prototype._onCancel.apply(this,arguments),this._removeFileItem(e)},_onBeforeAutoRetry:function(e){var t,n,r,i,s,o;qq.FineUploaderBasic.prototype._onBeforeAutoRetry.apply(this,arguments),t=this.getItemByFileId(e),n=this._find(t,"progressBar"),this._showCancelLink(t),n.style.width=0,qq(n).hide(),this._options.retry.showAutoRetryNote&&(r=this._find(t,"statusText"),i=this._autoRetries[e]+1,s=this._options.retry.maxAutoAttempts,o=this._options.retry.autoRetryNote.replace(/\{retryNum\}/g,i),o=o.replace(/\{maxAuto\}/g,s),qq(r).setText(o),i===1&&qq(t).addClass(this._classes.retrying))},_onBeforeManualRetry:function(e){var t=this.getItemByFileId(e);return qq.FineUploaderBasic.prototype._onBeforeManualRetry.apply(this,arguments)?(this._find(t,"progressBar").style.width=0,qq(t).removeClass(this._classes.fail),qq(this._find(t,"statusText")).clearText(),this._showSpinner(e),this._showCancelLink(t),!0):(qq(t).addClass(this._classes.retryable),!1)},_onSubmitDelete:function(e){var t=qq.bind(this._onSubmitDeleteSuccess,this,e);qq.FineUploaderBasic.prototype._onSubmitDelete.call(this,e,t)},_onSubmitDeleteSuccess:function(e){this._options.deleteFile.forceConfirm?this._showDeleteConfirm(e):this._sendDeleteRequest(e)},_onDeleteComplete:function(e,t,n){qq.FineUploaderBasic.prototype._onDeleteComplete.apply(this,arguments);var r=this.getItemByFileId(e),i=this._find(r,"spinner"),s=this._find(r,"statusText");qq(i).hide(),n?(qq(s).setText(this._options.deleteFile.deletingFailedText),this._showDeleteLink(e)):this._removeFileItem(e)},_sendDeleteRequest:function(e){var t=this.getItemByFileId(e),n=this._find(t,"deleteButton"),r=this._find(t,"statusText");qq(n).hide(),this._showSpinner(e),qq(r).setText(this._options.deleteFile.deletingStatusText),this._deleteHandler.sendDelete(e,this.getUuid(e))},_showDeleteConfirm:function(e){var t=this._handler.getName(e),n=this._options.deleteFile.confirmMessage.replace(/\{filename\}/g,t),r=this.getUuid(e),i=this;this._options.showConfirm(n,function(){i._sendDeleteRequest(e)})},_addToList:function(e,t){var n=qq.toElement(this._options.fileTemplate);if(this._options.disableCancelForFormUploads&&!qq.supportedFeatures.ajaxUploading){var r=this._find(n,"cancel");qq(r).remove()}n.qqFileId=e;var i=this._find(n,"file");qq(i).setText(this._options.formatFileName(t)),qq(this._find(n,"size")).hide(),this._options.multiple||(this._handler.cancelAll(),this._clearList()),this._options.display.prependFiles?this._prependItem(n):this._listElement.appendChild(n),this._filesInBatchAddedToUi+=1,this._options.display.fileSizeOnSubmit&&qq.supportedFeatures.ajaxUploading&&this._displayFileSize(e)},_prependItem:function(e){var t=this._listElement,n=t.firstChild;this._totalFilesInBatch>1&&this._filesInBatchAddedToUi>0&&(n=qq(t).children()[this._filesInBatchAddedToUi-1].nextSibling),t.insertBefore(e,n)},_clearList:function(){this._listElement.innerHTML="",this.clearStoredFiles()},_displayFileSize:function(e,t,n){var r=this.getItemByFileId(e),i=this.getSize(e),s=this._formatSize(i),o=this._find(r,"size");t!==undefined&&n!==undefined&&(s=this._formatProgress(t,n)),qq(o).css({display:"inline"}),qq(o).setText(s)},_bindCancelAndRetryEvents:function(){var e=this,t=this._listElement;this._disposeSupport.attach(t,"click",function(t){t=t||window.event;var n=t.target||t.srcElement;if(qq(n).hasClass(e._classes.cancel)||qq(n).hasClass(e._classes.retry)||qq(n).hasClass(e._classes.deleteButton)){qq.preventDefault(t);var r=n.parentNode;while(r.qqFileId===undefined)r=r.parentNode;qq(n).hasClass(e._classes.deleteButton)?e.deleteFile(r.qqFileId):qq(n).hasClass(e._classes.cancel)?e.cancel(r.qqFileId):(qq(r).removeClass(e._classes.retryable),e.retry(r.qqFileId))}})},_formatProgress:function(e,t){function r(e,t){n=n.replace(e,t)}var n=this._options.text.formatProgress;return r("{percent}",Math.round(e/t*100)),r("{total_size}",this._formatSize(t)),n},_controlFailureTextDisplay:function(e,t){var n,r,i,s,o;n=this._options.failedUploadTextDisplay.mode,r=this._options.failedUploadTextDisplay.maxChars,i=this._options.failedUploadTextDisplay.responseProperty,n==="custom"?(s=t[i],s?s.length>r&&(o=s.substring(0,r)+"..."):(s=this._options.text.failUpload,this.log("'"+i+"' is not a valid property on the server response.","warn")),qq(this._find(e,"statusText")).setText(o||s),this._options.failedUploadTextDisplay.enableTooltip&&this._showTooltip(e,s)):n==="default"?qq(this._find(e,"statusText")).setText(this._options.text.failUpload):n!=="none"&&this.log("failedUploadTextDisplay.mode value of '"+n+"' is not valid","warn")},_showTooltip:function(e,t){e.title=t},_showSpinner:function(e){var t=this.getItemByFileId(e),n=this._find(t,"spinner");n.style.display="inline-block"},_showCancelLink:function(e){if(!this._options.disableCancelForFormUploads||qq.supportedFeatures.ajaxUploading){var t=this._find(e,"cancel");qq(t).css({display:"inline"})}},_showDeleteLink:function(e){var t=this.getItemByFileId(e),n=this._find(t,"deleteButton");qq(n).css({display:"inline"})},_itemError:function(e,t){var n=qq.FineUploaderBasic.prototype._itemError.apply(this,arguments);this._options.showMessage(n)},_batchError:function(e){qq.FineUploaderBasic.prototype._batchError.apply(this,arguments),this._options.showMessage(e)},_setupPastePrompt:function(){var e=this;this._options.callbacks.onPasteReceived=function(){var t=e._options.paste.namePromptMessage,n=e._options.paste.defaultName;return e._options.showPrompt(t,n)}},_fileOrBlobRejected:function(e,t){this._totalFilesInBatch-=1,qq.FineUploaderBasic.prototype._fileOrBlobRejected.apply(this,arguments)},_prepareItemsForUpload:function(e,t,n){this._totalFilesInBatch=e.length,this._filesInBatchAddedToUi=0,qq.FineUploaderBasic.prototype._prepareItemsForUpload.apply(this,arguments)}}),function(e){"use strict";function u(e,t){var n,r,i,s,o,u,f=t.window,l=p()!==0,c=t.useLayoutViewport&&e==="Width",d=l||!h()||c,v=d?f.document.documentElement["client"+e]:E(e,f);return t.useLayoutViewport&&!d&&(r=v,i=a(f,{asRange:!0}),v=Math.round(r*i.calculated),x()||(n=f.document.documentElement.clientHeight,o=(r-1)*i.min,u=(r+1)*i.max,s=v<=n+3&&v>=n-3||o<=n&&u>=n&&u<n+30,s&&(v=n))),v}function a(e,t){var n,r,i=t&&t.asRange,s={calculated:1,min:1,max:1},o=p()!==0||!h();return o||(e||(e=window),n=e.document.documentElement.clientWidth,r=b(e),s.calculated=n/r,i&&(x()?s.min=s.max=s.calculated:(s.min=n/(r+1),s.max=n/(r-1)))),i?s:s.calculated}function f(e){var t,n,r,i=window,s=!0;return e&&e.length&&(e=Array.prototype.slice.call(e),t=T(e[0]),t||(e[0]=c(e[0])),n=!t&&e[0],n||(e[1]=c(e[1])),r=!n&&e[1],t?(i=e[0],r&&e[1].viewport&&(s=l(e[1].viewport))):n?(e[0].viewport&&(s=l(e[0].viewport)),T(e[1])&&(i=e[1])):!e[0]&&e[1]&&(r&&e[1].viewport?s=l(e[1].viewport):T(e[1])&&(i=e[1]))),{window:i,useVisualViewport:s,useLayoutViewport:!s}}function l(e){var t=N(e)&&e.toLowerCase();if(e&&!t)throw new Error("Invalid viewport option: "+e);if(t&&t!=="visual"&&t!=="layout")throw new Error("Invalid viewport name: "+e);return t==="visual"}function c(e){return N(e)&&e!==""?{viewport:e}:e}function h(){return n===undefined&&(n=b()>10),n}function p(){var e;return t===undefined&&(e=document.createElement("div"),e.style.cssText="width: 100px; height: 100px; overflow: scroll; position: absolute; top: -500px; left: -500px; margin: 0px; padding: 0px; border: none;",document.body.appendChild(e),t=e.offsetWidth-e.clientWidth,document.body.removeChild(e)),t}function d(){var e,t,n,r,s=v(),o=s&&s.contentDocument||document,u=o.body,a=o!==document;t=o.createElement("div"),t.style.cssText="width: 1px; height: 1px; position: relative; top: 0px; left: 32000px;",a||(e=m()),n=u.scrollWidth,u.appendChild(t),r=n!==u.scrollWidth,u.removeChild(t),a||g(e),i=r?"documentElement":"body",s&&document.body.removeChild(s)}function v(){var e=document.createElement("iframe"),t=document.body;e.style.cssText="position: absolute; top: -600px; left: -600px; width: 500px; height: 500px; margin: 0px; padding: 0px; border: none; display: block;",e.frameborder="0",t.appendChild(e),e.src="about:blank";if(!e.contentDocument)return;return e.contentDocument.write('<!DOCTYPE html><html><head><meta charset="UTF-8"><title></title><style type="text/css">html, body { overflow: hidden; }</style></head><body></body></html>'),e}function m(){var e,t,n=document.documentElement,r=document.body,i=o?window.getComputedStyle(n,null):n.currentStyle,s=o?window.getComputedStyle(r,null):r.currentStyle,u=(i.overflowX||i.overflow||"visible").toLowerCase(),a=(s.overflowX||s.overflow||"visible").toLowerCase(),f=a!=="hidden",l=u==="visible",c={documentElement:{modified:l},body:{modified:f}};return l&&(e=n.style,c.documentElement.styleOverflowX=e.overflowX,e.overflowX="auto"),f&&(t=r.style,c.body.styleOverflowX=t.overflowX,t.overflowX="hidden"),c}function g(e){e.documentElement.modified&&(document.documentElement.style.overflowX=e.documentElement.styleOverflowX),e.body.modified&&(document.body.style.overflowX=e.body.styleOverflowX)}function y(e,t){var n=t.documentElement;return Math.max(n.body["scroll"+e],t["scroll"+e],n.body["offset"+e],t["offset"+e],t["client"+e])}function b(e){return E("Width",e)}function w(e){return E("Height",e)}function E(e,t){var n=(t||window)["inner"+e];return n&&S(n),n}function S(e){!r&&k(e)&&(r=!0)}function x(){return!!r}function T(e){return e!=null&&e.window==e}function N(e){return typeof e=="string"||e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object String]"||!1}function C(e){var t=typeof e=="number"||e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Number]"||!1;return t&&e===+e}function k(e){return e===+e&&e!==(e|0)}function L(){var e,t;return s===undefined&&(s=!1,e=navigator&&navigator.userAgent,navigator&&navigator.appName==="Microsoft Internet Explorer"&&e&&(t=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),t.exec(e)!=null&&(s=parseFloat(RegExp.$1)))),s}function A(){var e=L();return e&&e<8}function O(){return L()===9}var t,n,r,i,s,o=!!window.getComputedStyle;e.documentWidth=function(e){var t;e||(e=document);try{i===undefined&&d(),t=e[i].scrollWidth}catch(n){t=y("Width",e)}return t},e.documentHeight=function(e){var t;e||(e=document);try{i===undefined&&d(),t=e[i].scrollHeight}catch(n){t=y("Height",e)}return t},e.windowWidth=function(e,t){var n=f(arguments);return u("Width",n)},e.windowHeight=function(e,t){var n=f(arguments);return u("Height",n)},e.pinchZoomFactor=function(e){return a(e)},e.scrollbarWidth=p;if(typeof e=="function"&&!A()&&!O())try{e(function(){i===undefined&&d(),p()})}catch(M){}}(typeof jQuery!="undefined"?jQuery:typeof Zepto!="undefined"?Zepto:$),jQuery.fn.reverse=[].reverse;var a2a_config={color_main:"D7E5ED",color_border:"AECADB",color_link_text:"333333",color_link_text_hover:"333333",delay:200,num_services:10,onclick:1},wMVPval=null;jQuery(window).on("resize.metavp",function(){var e;try{e=jQuery.documentWidth()}catch(t){e=jQuery(window).width()}if(wMVPval!=e){var n=jQuery("head meta[name=viewport]").attr("content","width=device-width"),r=jQuery(window).width();r<768?jQuery("head meta[name=viewport]").attr("content","width=660"):r<=1024&&jQuery("head meta[name=viewport]").attr("content","width=830"),wMVPval=e}}).trigger("resize.metavp"),jQuery(function(e){e(window).trigger("resize.metavp");var t=e("#userActionsOptions"),n=t.parent(),r=e("#moreActionsOptions"),i=r.parent();e("#userActionsProfile").click(function(){t.toggle()}),e(document).on("mousedown.selectBox",function(s){if(1===s.which){var o=e(s.target).parents().andSelf();o.index(n)==-1&&t.hide(),o.index(i)==-1&&r.hide()}}),e("#userActionsProfileVeil").click(function(){e("#userActionsOptions").hide(),e(this).hide()}),e(".infoMessageWrapper .close").on("click",function(){e(this).closest(".infoMessageWrapper").slideUp("fast")}),e("#moreLink").click(function(){e("#moreActionsOptions").toggle()}),e(".disabled a").click(function(e){return!1}),e(document).tooltip({show:{delay:200},track:!1,position:{at:"right top-10",my:"right bottom"},open:function(t,n){e(document).tooltip.temporarilyOff&&n.tooltip.stop().remove()},content:function(){var t=e(this);if(t.is(".noTT"))return null;var n=t.attr("title")||"";return e("<a>").text(n).html()}}),e.ui.dialog.prototype.options.autoReposition=!0,e.ui.dialog.prototype.options.minWidth=650,e.ui.dialog.prototype.options.minHeight=150,e(window).on("resize",function(){function t(e,t,n,r){var i=e.dialog("option",t);n<r&&(n=r),n<=i?(e.data(t)||e.data(t,i),e.dialog("option",t,n)):e.data(t)&&e.dialog("option",t,e.data(t))}e(".ui-dialog-content:visible").each(function(){var n=e(this),r=n.data("uiDialog");if(r.options.autoReposition){try{t(n,"width",e(window).width()*.95,r.options.minWidth),t(n,"height",e(window).height()*.95,r.options.minHeight)}catch(i){}r.option("position",r.options.position)}})}),e(".navbar-toggle").on("click",function(){var t=e(this),n=e(t.data("target"));t.hasClass("collapsed")?n.slideDown():n.slideUp(),t.toggleClass("collapsed")}),e(".has-to-sign-in").on("click",function(){e("#infomsg").data("infomsg",lMsg["has-to-sign-in-info"]).dialog("open")}),e(document).on("loginBoxInline",function(){var t=e("#sign-in-inline-form");return t.length==0&&(t=e('<div id="sign-in-inline-form" class="hidden"><div class="ajax-loading"></div><div class="content"></div></div>').appendTo("body"),t.dialog({autoOpen:!1,dialogClass:"sign-in-dialog",height:420,modal:!0,width:300,minWidth:300,beforeClose:function(){e(".ui-widget-overlay").off("click.my-dialog")},close:function(){var t=e(this);t.removeClass("loading")},open:function(){var t=e(this);e(".ui-widget-overlay").on("click.my-dialog",function(){t.dialog("close")}),t.addClass("loading"),e(window).triggerHandler("resize"),t.find(".content").empty().load(urlSignIn,function(){t.removeClass("loading")})}})),t.dialog("open"),!1}),e(".has-to-sign-in-inline").on("click",function(){return e(document).trigger("loginBoxInline"),!1}),e('<div id="infomsg" class="hidden"><div class="ajax-loading"></div><div class="content"></div></div>').appendTo("body").dialog({autoOpen:!1,dialogClass:"infomsg-dialog",height:200,modal:!0,width:300,minWidth:300,beforeClose:function(){e(".ui-widget-overlay").off("click.my-dialog")},close:function(){var t=e(this);t.removeClass("loading")},open:function(){var t=e(this);e(".ui-widget-overlay").on("click.my-dialog",function(){t.dialog("close")}),e(window).triggerHandler("resize"),t.find(".content").empty().html('<p class="info-msg">'+e(this).data("infomsg")+"</p>")},buttons:[{text:lMsg.Close,click:function(){e(this).dialog("close")}}]}),e("#myVehicleTitle").on("click.clear",".highlight img",function(){e(document).trigger("myVehicleDialogClear")}),e("#myTyresTitle").on("click.clear",".highlight img",function(){e(document).trigger("myTyresDialogClear")}),e("#myOilTitle").on("click.clear",".highlight img",function(){e(document).trigger("myOilDialogClear")}),e("#mySearchTitle").on("click.clear",".highlight img",function(){e(document).trigger("mySearchDialogClear")})}),function(e){e.extend(e.ui.autocomplete.prototype,{_renderItem:function(t,n){var r=e.ui.autocomplete.escapeRegex(this.element.val()),i=new RegExp(r,"ig"),s='<span class="ac-highlight">$&</span>',o=this.options.highlite&&n.label?n.label.replace(i,s):n.label;return e("<li></li>").data("item.autocomplete",n).append(e("<a></a>").html(o)).appendTo(t)}})}(jQuery),function(e){e.widget("custom.combobox",{_create:function(){this.wrapper=e("<span>").addClass("custom-combobox").insertAfter(this.element),this.element.hide(),this._createAutocomplete(),this._createShowAllButton(),this.input.attr("placeholder",this.element.attr("placeholder")),this.input.attr("title",this.element.attr("title"))},_createAutocomplete:function(){var t=this.element.children(":selected"),n=t.val()?t.text():"";this.input=e("<input>").appendTo(this.wrapper).val(n).attr("title","").addClass("custom-combobox-input ui-widget ui-widget-content ui-state-default ui-corner-left").autocomplete({delay:0,minLength:0,source:e.proxy(this,"_source"),open:function(){e(this).data("uiAutocomplete").menu.element.addClass("custom-combobox-autocomplete").css({"z-index":"10000000000","max-height":"150px"})}}).tooltip({classes:{"ui-tooltip":"ui-state-highlight"}}),this._on(this.input,{autocompleteselect:function(e,t){t.item.option.selected=!0,this._trigger("select",e,{item:t.item.option})},autocompletechange:"_removeIfInvalid"})},_createShowAllButton:function(){var t=this.input,n=!1;e("<a>").attr("tabIndex",-1).attr("title","Show All Items").tooltip().appendTo(this.wrapper).button({icons:{primary:"ui-icon-triangle-1-s"},text:!1}).removeClass("ui-corner-all").addClass("custom-combobox-toggle ui-corner-right").on("mousedown",function(){n=t.autocomplete("widget").is(":visible")}).on("click",function(){t.trigger("focus");if(n)return;t.autocomplete("search","")})},_source:function(t,n){var r=new RegExp(e.ui.autocomplete.escapeRegex(t.term),"i");n(this.element.children("option").map(function(){var n=e(this).text();if(this.value&&(!t.term||r.test(n)))return{label:n,value:n,option:this}}))},_removeIfInvalid:function(t,n){if(n.item)return;var r=this.input.val(),i=r.toLowerCase(),s=!1;this.element.children("option").each(function(){if(e(this).text().toLowerCase()===i)return this.selected=s=!0,!1});if(s)return;this.input.val("").attr("title",r+" didn't match any item").tooltip("open"),this.element.val(""),this._delay(function(){this.input.tooltip("close").attr("title","")},2500),this.input.autocomplete("instance").term=""},_destroy:function(){this.wrapper.remove(),this.element.show()}})}(jQuery),!function(e){var t={},n={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:!1,captions:!1,ticker:!1,tickerHover:!1,adaptiveHeight:!1,adaptiveHeightSpeed:500,video:!1,useCSS:!0,preloadImages:"visible",responsive:!0,slideZIndex:50,wrapperClass:"bx-wrapper",touchEnabled:!0,swipeThreshold:50,oneToOneTouch:!0,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:!0,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:!1,startText:"Start",stopText:"Stop",autoControlsCombine:!1,autoControlsSelector:null,auto:!1,pause:4e3,autoStart:!0,autoDirection:"next",autoHover:!1,autoDelay:0,autoSlideForOnePage:!1,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,onSliderLoad:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){},onSliderResize:function(){}};e.fn.bxSlider=function(r){if(0==this.length)return this;if(this.length>1)return this.each(function(){e(this).bxSlider(r)}),this;var s={},o=this;t.el=this;var u=e(window).width(),f=e(window).height(),l=function(){s.settings=e.extend({},n,r),s.settings.slideWidth=parseInt(s.settings.slideWidth),s.children=o.children(s.settings.slideSelector),s.children.length<s.settings.minSlides&&(s.settings.minSlides=s.children.length),s.children.length<s.settings.maxSlides&&(s.settings.maxSlides=s.children.length),s.settings.randomStart&&(s.settings.startSlide=Math.floor(Math.random()*s.children.length)),s.active={index:s.settings.startSlide},s.carousel=s.settings.minSlides>1||s.settings.maxSlides>1,s.carousel&&(s.settings.preloadImages="all"),s.minThreshold=s.settings.minSlides*s.settings.slideWidth+(s.settings.minSlides-1)*s.settings.slideMargin,s.maxThreshold=s.settings.maxSlides*s.settings.slideWidth+(s.settings.maxSlides-1)*s.settings.slideMargin,s.working=!1,s.controls={},s.interval=null,s.animProp="vertical"==s.settings.mode?"top":"left",s.usingCSS=s.settings.useCSS&&"fade"!=s.settings.mode&&function(){var e=document.createElement("div"),t=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var n in t)if(void 0!==e.style[t[n]])return s.cssPrefix=t[n].replace("Perspective","").toLowerCase(),s.animProp="-"+s.cssPrefix+"-transform",!0;return!1}(),"vertical"==s.settings.mode&&(s.settings.maxSlides=s.settings.minSlides),o.data("origStyle",o.attr("style")),o.children(s.settings.slideSelector).each(function(){e(this).data("origStyle",e(this).attr("style"))}),h()},h=function(){o.wrap('<div class="'+s.settings.wrapperClass+'"><div class="bx-viewport"></div></div>'),s.viewport=o.parent(),s.loader=e('<div class="bx-loading" />'),s.viewport.prepend(s.loader),o.css({width:"horizontal"==s.settings.mode?100*s.children.length+215+"%":"auto",position:"relative"}),s.usingCSS&&s.settings.easing?o.css("-"+s.cssPrefix+"-transition-timing-function",s.settings.easing):s.settings.easing||(s.settings.easing="swing"),y(),s.viewport.css({width:"100%",overflow:"hidden",position:"relative"}),s.viewport.parent().css({maxWidth:m()}),s.settings.pager||s.viewport.parent().css({margin:"0 auto 0px"}),s.children.css({"float":"horizontal"==s.settings.mode?"left":"none",listStyle:"none",position:"relative"}),s.children.css("width",g()),"horizontal"==s.settings.mode&&s.settings.slideMargin>0&&s.children.css("marginRight",s.settings.slideMargin),"vertical"==s.settings.mode&&s.settings.slideMargin>0&&s.children.css("marginBottom",s.settings.slideMargin),"fade"==s.settings.mode&&(s.children.css({position:"absolute",zIndex:0,display:"none"}),s.children.eq(s.settings.startSlide).css({zIndex:s.settings.slideZIndex,display:"block"})),s.controls.el=e('<div class="bx-controls" />'),s.settings.captions&&L(),s.active.last=s.settings.startSlide==w()-1,s.settings.video&&o.fitVids();var t=s.children.eq(s.settings.startSlide);"all"==s.settings.preloadImages&&(t=s.children),s.settings.ticker?s.settings.pager=!1:(s.settings.pager&&N(),s.settings.controls&&C(),s.settings.auto&&s.settings.autoControls&&k(),(s.settings.controls||s.settings.autoControls||s.settings.pager)&&s.viewport.after(s.controls.el)),p(t,d)},p=function(t,n){var r=t.find("img, iframe").length;if(0==r)return void n();var i=0;t.find("img, iframe").each(function(){e(this).one("load",function(){++i==r&&n()}).each(function(){this.complete&&e(this).load()})})},d=function(){if(s.settings.infiniteLoop&&"fade"!=s.settings.mode&&!s.settings.ticker){var t="vertical"==s.settings.mode?s.settings.minSlides:s.settings.maxSlides,n=s.children.slice(0,t).clone().addClass("bx-clone"),r=s.children.slice(-t).clone().addClass("bx-clone");o.append(n).prepend(r)}s.loader.remove(),S(),"vertical"==s.settings.mode&&(s.settings.adaptiveHeight=!0),s.viewport.height(v()),o.redrawSlider(),s.settings.onSliderLoad(s.active.index),s.initialized=!0,s.settings.responsive&&e(window).bind("resize",X),s.settings.auto&&s.settings.autoStart&&(w()>1||s.settings.autoSlideForOnePage)&&F(),s.settings.ticker&&I(),s.settings.pager&&P(s.settings.startSlide),s.settings.controls&&j(),s.settings.touchEnabled&&!s.settings.ticker&&R()},v=function(){var t=0,n=e();if("vertical"==s.settings.mode||s.settings.adaptiveHeight)if(s.carousel){var r=1==s.settings.moveSlides?s.active.index:s.active.index*E();for(n=s.children.eq(r),i=1;i<=s.settings.maxSlides-1;i++)n=r+i>=s.children.length?n.add
(s.children.eq(i-1)):n.add(s.children.eq(r+i))}else n=s.children.eq(s.active.index);else n=s.children;return"vertical"==s.settings.mode?(n.each(function(n){t+=e(this).outerHeight()}),s.settings.slideMargin>0&&(t+=s.settings.slideMargin*(s.settings.minSlides-1))):t=Math.max.apply(Math,n.map(function(){return e(this).outerHeight(!1)}).get()),"border-box"==s.viewport.css("box-sizing")?t+=parseFloat(s.viewport.css("padding-top"))+parseFloat(s.viewport.css("padding-bottom"))+parseFloat(s.viewport.css("border-top-width"))+parseFloat(s.viewport.css("border-bottom-width")):"padding-box"==s.viewport.css("box-sizing")&&(t+=parseFloat(s.viewport.css("padding-top"))+parseFloat(s.viewport.css("padding-bottom"))),t},m=function(){var e="100%";return s.settings.slideWidth>0&&(e="horizontal"==s.settings.mode?s.settings.maxSlides*s.settings.slideWidth+(s.settings.maxSlides-1)*s.settings.slideMargin:s.settings.slideWidth),e},g=function(){var e=s.settings.slideWidth,t=s.viewport.width();return 0==s.settings.slideWidth||s.settings.slideWidth>t&&!s.carousel||"vertical"==s.settings.mode?e=t:s.settings.maxSlides>1&&"horizontal"==s.settings.mode&&(t>s.maxThreshold||t<s.minThreshold&&(e=(t-s.settings.slideMargin*(s.settings.minSlides-1))/s.settings.minSlides)),e},y=function(){var e=1;if("horizontal"==s.settings.mode&&s.settings.slideWidth>0)if(s.viewport.width()<s.minThreshold)e=s.settings.minSlides;else if(s.viewport.width()>s.maxThreshold)e=s.settings.maxSlides;else{var t=s.children.first().width()+s.settings.slideMargin;e=Math.floor((s.viewport.width()+s.settings.slideMargin)/t)}else"vertical"==s.settings.mode&&(e=s.settings.minSlides);return e},w=function(){var e=0;if(s.settings.moveSlides>0)if(s.settings.infiniteLoop)e=Math.ceil(s.children.length/E());else for(var t=0,n=0;t<s.children.length;)++e,t=n+y(),n+=s.settings.moveSlides<=y()?s.settings.moveSlides:y();else e=Math.ceil(s.children.length/y());return e},E=function(){return s.settings.moveSlides>0&&s.settings.moveSlides<=y()?s.settings.moveSlides:y()},S=function(){if(s.children.length>s.settings.maxSlides&&s.active.last&&!s.settings.infiniteLoop){if("horizontal"==s.settings.mode){var e=s.children.last(),t=e.position();x(-(t.left-(s.viewport.width()-e.outerWidth())),"reset",0)}else if("vertical"==s.settings.mode){var n=s.children.length-s.settings.minSlides,t=s.children.eq(n).position();x(-t.top,"reset",0)}}else{var t=s.children.eq(s.active.index*E()).position();s.active.index==w()-1&&(s.active.last=!0),void 0!=t&&("horizontal"==s.settings.mode?x(-t.left,"reset",0):"vertical"==s.settings.mode&&x(-t.top,"reset",0))}},x=function(e,t,n,r){if(s.usingCSS){var i="vertical"==s.settings.mode?"translate3d(0, "+e+"px, 0)":"translate3d("+e+"px, 0, 0)";o.css("-"+s.cssPrefix+"-transition-duration",n/1e3+"s"),"slide"==t?(o.css(s.animProp,i),o.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){o.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),H()})):"reset"==t?o.css(s.animProp,i):"ticker"==t&&(o.css("-"+s.cssPrefix+"-transition-timing-function","linear"),o.css(s.animProp,i),o.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){o.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),x(r.resetValue,"reset",0),q()}))}else{var u={};u[s.animProp]=e,"slide"==t?o.animate(u,n,s.settings.easing,function(){H()}):"reset"==t?o.css(s.animProp,e):"ticker"==t&&o.animate(u,speed,"linear",function(){x(r.resetValue,"reset",0),q()})}},T=function(){for(var t="",n=w(),r=0;r<n;r++){var i="";s.settings.buildPager&&e.isFunction(s.settings.buildPager)?(i=s.settings.buildPager(r),s.pagerEl.addClass("bx-custom-pager")):(i=r+1,s.pagerEl.addClass("bx-default-pager")),t+='<div class="bx-pager-item"><a href="" data-slide-index="'+r+'" class="bx-pager-link">'+i+"</a></div>"}s.pagerEl.html(t)},N=function(){s.settings.pagerCustom?s.pagerEl=e(s.settings.pagerCustom):(s.pagerEl=e('<div class="bx-pager" />'),s.settings.pagerSelector?e(s.settings.pagerSelector).html(s.pagerEl):s.controls.el.addClass("bx-has-pager").append(s.pagerEl),T()),s.pagerEl.on("click","a",D)},C=function(){s.controls.next=e('<a class="bx-next" href="">'+s.settings.nextText+"</a>"),s.controls.prev=e('<a class="bx-prev" href="">'+s.settings.prevText+"</a>"),s.controls.next.bind("click",A),s.controls.prev.bind("click",O),s.settings.nextSelector&&e(s.settings.nextSelector).append(s.controls.next),s.settings.prevSelector&&e(s.settings.prevSelector).append(s.controls.prev),s.settings.nextSelector||s.settings.prevSelector||(s.controls.directionEl=e('<div class="bx-controls-direction" />'),s.controls.directionEl.append(s.controls.prev).append(s.controls.next),s.controls.el.addClass("bx-has-controls-direction").append(s.controls.directionEl))},k=function(){s.controls.start=e('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+s.settings.startText+"</a></div>"),s.controls.stop=e('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+s.settings.stopText+"</a></div>"),s.controls.autoEl=e('<div class="bx-controls-auto" />'),s.controls.autoEl.on("click",".bx-start",M),s.controls.autoEl.on("click",".bx-stop",_),s.settings.autoControlsCombine?s.controls.autoEl.append(s.controls.start):s.controls.autoEl.append(s.controls.start).append(s.controls.stop),s.settings.autoControlsSelector?e(s.settings.autoControlsSelector).html(s.controls.autoEl):s.controls.el.addClass("bx-has-controls-auto").append(s.controls.autoEl),B(s.settings.autoStart?"stop":"start")},L=function(){s.children.each(function(t){var n=e(this).find("img:first").attr("title");void 0!=n&&(""+n).length&&e(this).append('<div class="bx-caption"><span>'+n+"</span></div>")})},A=function(e){s.settings.auto&&o.stopAuto(),o.goToNextSlide(),e.preventDefault(),s.settings.auto&&o.startAuto()},O=function(e){s.settings.auto&&o.stopAuto(),o.goToPrevSlide(),e.preventDefault(),s.settings.auto&&o.startAuto()},M=function(e){o.startAuto(),e.preventDefault()},_=function(e){o.stopAuto(),e.preventDefault()},D=function(t){s.settings.auto&&o.stopAuto();var n=e(t.currentTarget);if(void 0!==n.attr("data-slide-index")){var r=parseInt(n.attr("data-slide-index"));r!=s.active.index&&o.goToSlide(r),t.preventDefault()}s.settings.auto&&o.startAuto()},P=function(t){var n=s.children.length;return"short"==s.settings.pagerType?(s.settings.maxSlides>1&&(n=Math.ceil(s.children.length/s.settings.maxSlides)),void s.pagerEl.html(t+1+s.settings.pagerShortSeparator+n)):(s.pagerEl.find("a").removeClass("active"),void s.pagerEl.each(function(n,r){e(r).find("a").eq(t).addClass("active")}))},H=function(){if(s.settings.infiniteLoop){var e="";0==s.active.index?e=s.children.eq(0).position():s.active.index==w()-1&&s.carousel?e=s.children.eq((w()-1)*E()).position():s.active.index==s.children.length-1&&(e=s.children.eq(s.children.length-1).position()),e&&("horizontal"==s.settings.mode?x(-e.left,"reset",0):"vertical"==s.settings.mode&&x(-e.top,"reset",0))}s.working=!1,s.settings.onSlideAfter(s.children.eq(s.active.index),s.oldIndex,s.active.index)},B=function(e){s.settings.autoControlsCombine?s.controls.autoEl.html(s.controls[e]):(s.controls.autoEl.find("a").removeClass("active"),s.controls.autoEl.find("a:not(.bx-"+e+")").addClass("active"))},j=function(){1==w()?(s.controls.prev.addClass("disabled"),s.controls.next.addClass("disabled")):!s.settings.infiniteLoop&&s.settings.hideControlOnEnd&&(0==s.active.index?(s.controls.prev.addClass("disabled"),s.controls.next.removeClass("disabled")):s.active.index==w()-1?(s.controls.next.addClass("disabled"),s.controls.prev.removeClass("disabled")):(s.controls.prev.removeClass("disabled"),s.controls.next.removeClass("disabled")))},F=function(){s.settings.autoDelay>0?setTimeout(o.startAuto,s.settings.autoDelay):o.startAuto(),s.settings.autoHover&&o.hover(function(){s.interval&&(o.stopAuto(!0),s.autoPaused=!0)},function(){s.autoPaused&&(o.startAuto(!0),s.autoPaused=null)})},I=function(){var t=0;if("next"==s.settings.autoDirection)o.append(s.children.clone().addClass("bx-clone"));else{o.prepend(s.children.clone().addClass("bx-clone"));var n=s.children.first().position();t="horizontal"==s.settings.mode?-n.left:-n.top}x(t,"reset",0),s.settings.pager=!1,s.settings.controls=!1,s.settings.autoControls=!1,s.settings.tickerHover&&!s.usingCSS&&s.viewport.hover(function(){o.stop()},function(){var t=0;s.children.each(function(n){t+="horizontal"==s.settings.mode?e(this).outerWidth(!0):e(this).outerHeight(!0)});var n=s.settings.speed/t,r="horizontal"==s.settings.mode?"left":"top",i=n*(t-Math.abs(parseInt(o.css(r))));q(i)}),q()},q=function(e){speed=e?e:s.settings.speed;var t={left:0,top:0},n={left:0,top:0};"next"==s.settings.autoDirection?t=o.find(".bx-clone").first().position():n=s.children.first().position();var r="horizontal"==s.settings.mode?-t.left:-t.top,i="horizontal"==s.settings.mode?-n.left:-n.top,u={resetValue:i};x(r,"ticker",speed,u)},R=function(){s.touch={start:{x:0,y:0},end:{x:0,y:0}},s.viewport.bind("touchstart",U)},U=function(e){if(s.working)e.preventDefault();else{s.touch.originalPos=o.position();var t=e.originalEvent;s.touch.start.x=t.changedTouches[0].pageX,s.touch.start.y=t.changedTouches[0].pageY,s.viewport.bind("touchmove",z),s.viewport.bind("touchend",W)}},z=function(e){var t=e.originalEvent,n=Math.abs(t.changedTouches[0].pageX-s.touch.start.x),r=Math.abs(t.changedTouches[0].pageY-s.touch.start.y);if(3*n>r&&s.settings.preventDefaultSwipeX?e.preventDefault():3*r>n&&s.settings.preventDefaultSwipeY&&e.preventDefault(),"fade"!=s.settings.mode&&s.settings.oneToOneTouch){var i=0;if("horizontal"==s.settings.mode){var o=t.changedTouches[0].pageX-s.touch.start.x;i=s.touch.originalPos.left+o}else{var o=t.changedTouches[0].pageY-s.touch.start.y;i=s.touch.originalPos.top+o}x(i,"reset",0)}},W=function(e){s.viewport.unbind("touchmove",z);var t=e.originalEvent,n=0;if(s.touch.end.x=t.changedTouches[0].pageX,s.touch.end.y=t.changedTouches[0].pageY,"fade"==s.settings.mode){var r=Math.abs(s.touch.start.x-s.touch.end.x);r>=s.settings.swipeThreshold&&(s.touch.start.x>s.touch.end.x?o.goToNextSlide():o.goToPrevSlide(),o.stopAuto())}else{var r=0;"horizontal"==s.settings.mode?(r=s.touch.end.x-s.touch.start.x,n=s.touch.originalPos.left):(r=s.touch.end.y-s.touch.start.y,n=s.touch.originalPos.top),!s.settings.infiniteLoop&&(0==s.active.index&&r>0||s.active.last&&r<0)?x(n,"reset",200):Math.abs(r)>=s.settings.swipeThreshold?(r<0?o.goToNextSlide():o.goToPrevSlide(),o.stopAuto()):x(n,"reset",200)}s.viewport.unbind("touchend",W)},X=function(t){if(s.initialized){var n=e(window).width(),r=e(window).height();u==n&&f==r||(u=n,f=r,o.redrawSlider(),s.settings.onSliderResize.call(o,s.active.index))}};return o.goToSlide=function(t,n){if(!s.working&&s.active.index!=t)if(s.working=!0,s.oldIndex=s.active.index,t<0?s.active.index=w()-1:t>=w()?s.active.index=0:s.active.index=t,s.settings.onSlideBefore(s.children.eq(s.active.index),s.oldIndex,s.active.index),"next"==n?s.settings.onSlideNext(s.children.eq(s.active.index),s.oldIndex,s.active.index):"prev"==n&&s.settings.onSlidePrev(s.children.eq(s.active.index),s.oldIndex,s.active.index),s.active.last=s.active.index>=w()-1,s.settings.pager&&P(s.active.index),s.settings.controls&&j(),"fade"==s.settings.mode)s.settings.adaptiveHeight&&s.viewport.height()!=v()&&s.viewport.animate({height:v()},s.settings.adaptiveHeightSpeed),s.children.filter(":visible").fadeOut(s.settings.speed).css({zIndex:0}),s.children.eq(s.active.index).css("zIndex",s.settings.slideZIndex+1).fadeIn(s.settings.speed,function(){e(this).css("zIndex",s.settings.slideZIndex),H()});else{s.settings.adaptiveHeight&&s.viewport.height()!=v()&&s.viewport.animate({height:v()},s.settings.adaptiveHeightSpeed);var r=0,i={left:0,top:0};if(!s.settings.infiniteLoop&&s.carousel&&s.active.last)if("horizontal"==s.settings.mode){var u=s.children.eq(s.children.length-1);i=u.position(),r=s.viewport.width()-u.outerWidth()}else{var f=s.children.length-s.settings.minSlides;i=s.children.eq(f).position()}else if(s.carousel&&s.active.last&&"prev"==n){var l=1==s.settings.moveSlides?s.settings.maxSlides-E():(w()-1)*E()-(s.children.length-s.settings.maxSlides),u=o.children(".bx-clone").eq(l);i=u.position()}else if("next"==n&&0==s.active.index)i=o.find("> .bx-clone").eq(s.settings.maxSlides).position(),s.active.last=!1;else if(t>=0){var c=t*E();i=s.children.eq(c).position()}if("undefined"!=typeof i){var h="horizontal"==s.settings.mode?-(i.left-r):-i.top;x(h,"slide",s.settings.speed)}}},o.goToNextSlide=function(){if(s.settings.infiniteLoop||!s.active.last){var e=parseInt(s.active.index)+1;o.goToSlide(e,"next")}},o.goToPrevSlide=function(){if(s.settings.infiniteLoop||0!=s.active.index){var e=parseInt(s.active.index)-1;o.goToSlide(e,"prev")}},o.startAuto=function(e){s.interval||(s.interval=setInterval(function(){"next"==s.settings.autoDirection?o.goToNextSlide():o.goToPrevSlide()},s.settings.pause),s.settings.autoControls&&1!=e&&B("stop"))},o.stopAuto=function(e){s.interval&&(clearInterval(s.interval),s.interval=null,s.settings.autoControls&&1!=e&&B("start"))},o.getCurrentSlide=function(){return s.active.index},o.getCurrentSlideElement=function(){return s.children.eq(s.active.index)},o.getSlideCount=function(){return s.children.length},o.redrawSlider=function(){s.children.add(o.find(".bx-clone")).width(g()),s.viewport.css("height",v()),s.settings.ticker||S(),s.active.last&&(s.active.index=w()-1),s.active.index>=w()&&(s.active.last=!0),s.settings.pager&&!s.settings.pagerCustom&&(T(),P(s.active.index))},o.destroySlider=function(){s.initialized&&(s.initialized=!1,e(".bx-clone",this).remove(),s.children.each(function(){void 0!=e(this).data("origStyle")?e(this).attr("style",e(this).data("origStyle")):e(this).removeAttr("style")}),void 0!=e(this).data("origStyle")?this.attr("style",e(this).data("origStyle")):e(this).removeAttr("style"),e(this).unwrap().unwrap(),s.controls.el&&s.controls.el.remove(),s.controls.next&&s.controls.next.remove(),s.controls.prev&&s.controls.prev.remove(),s.pagerEl&&s.settings.controls&&s.pagerEl.remove(),e(".bx-caption",this).remove(),s.controls.autoEl&&s.controls.autoEl.remove(),clearInterval(s.interval),s.settings.responsive&&e(window).unbind("resize",X))},o.reloadSlider=function(e){void 0!=e&&(r=e),o.destroySlider(),l()},l(),this}}(jQuery);